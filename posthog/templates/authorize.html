{% extends 'layout.html' %}

{% load i18n %}
{% load static %}
{% block content %}
<div class="form-signin w-full max-w-md mx-auto mt-16 bg-white rounded shadow p-8">
  <div class="flex flex-col items-center mb-6">
    <img src="{% static 'posthog-icon.svg' %}" alt="PostHog" class="h-12 w-12 mb-2" />
    <h1 class="text-2xl font-bold">PostHog</h1>
  </div>
  {% if not error %}
  <form id="authorizationForm" method="post" class="space-y-6">
    <h3 class="text-xl font-semibold text-center mb-4">{% trans "Authorize" %} {{ application.name }}?</h3>
    {% csrf_token %}

    {% for field in form %}
    {% if field.is_hidden %}
    {{ field }}
    {% endif %}
    {% endfor %}

    <div>
      <p class="text-base text-muted mb-2">{% trans "Application requires the following permissions" %}</p>
      <ul class="list-disc list-inside space-y-1">
        {% for scope in scopes_descriptions %}
        <li class="text-sm">{{ scope }}</li>
        {% endfor %}
      </ul>
    </div>

    {{ form.errors }}
    {{ form.non_field_errors }}

    <div class="flex justify-end space-x-2 pt-4">
      <input type="submit" class="btn btn-large" value="{% trans 'Cancel' %}" />
      <input type="submit" class="btn btn-large btn-primary" name="allow" value="{% trans 'Authorize' %}" />
    </div>
  </form>
  {% else %}
  <div class="text-center">
    <h2 class="text-xl font-bold text-danger mb-2">Error: {{ error.error }}</h2>
    <p class="text-muted">{{ error.description }}</p>
  </div>
  {% endif %}
</div>
{% endblock %}