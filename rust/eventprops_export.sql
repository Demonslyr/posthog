--
-- PostgreSQL database dump
--

-- Dumped from database version 12.22
-- Dumped by pg_dump version 14.15 (Homebrew)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: posthog_eventproperty; Type: TABLE; Schema: public; Owner: posthog
--

CREATE TABLE public.posthog_eventproperty (
    id bigint NOT NULL,
    event character varying(400) NOT NULL,
    property character varying(400) NOT NULL,
    team_id integer NOT NULL,
    project_id bigint
);


ALTER TABLE public.posthog_eventproperty OWNER TO posthog;

--
-- Name: posthog_eventproperty_id_seq; Type: SEQUENCE; Schema: public; Owner: posthog
--

ALTER TABLE public.posthog_eventproperty ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.posthog_eventproperty_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: posthog_eventproperty posthog_eventproperty_pkey; Type: CONSTRAINT; Schema: public; Owner: posthog
--

ALTER TABLE ONLY public.posthog_eventproperty
    ADD CONSTRAINT posthog_eventproperty_pkey PRIMARY KEY (id);


--
-- Name: posthog_eve_proj_id_22de03_idx; Type: INDEX; Schema: public; Owner: posthog
--

-- IMPORTANT(eli.r): I created this on the new PROPDEFS DB but I suspect we can eliminate it in favor of posthog_eve_team_id_22de03_idx ASAP (cc @BenWhite)

CREATE INDEX posthog_eve_proj_id_22de03_idx ON public.posthog_eventproperty USING btree (COALESCE(project_id, (team_id)::bigint), event);


--
-- Name: posthog_eve_proj_id_26dbfb_idx; Type: INDEX; Schema: public; Owner: posthog
--

-- IMPORTANT(eli.r): I created this on the new PROPDEFS DB but I suspect we can eliminate it in favor of posthog_eve_team_id_26dbfb_idx ASAP (cc @BenWhite)

CREATE INDEX posthog_eve_proj_id_26dbfb_idx ON public.posthog_eventproperty USING btree (COALESCE(project_id, (team_id)::bigint), property);


--
-- Name: posthog_eve_proj_id_dd2337d2; Type: INDEX; Schema: public; Owner: posthog
--

CREATE INDEX posthog_eve_proj_id_dd2337d2 ON public.posthog_eventproperty USING btree (project_id);


--
-- Name: posthog_eve_team_id_22de03_idx; Type: INDEX; Schema: public; Owner: posthog
--

CREATE INDEX posthog_eve_team_id_22de03_idx ON public.posthog_eventproperty USING btree (team_id, event);


--
-- Name: posthog_eve_team_id_26dbfb_idx; Type: INDEX; Schema: public; Owner: posthog
--

CREATE INDEX posthog_eve_team_id_26dbfb_idx ON public.posthog_eventproperty USING btree (team_id, property);


--
-- Name: posthog_event_property_unique_proj_event_property; Type: INDEX; Schema: public; Owner: posthog
--

CREATE UNIQUE INDEX posthog_event_property_unique_proj_event_property ON public.posthog_eventproperty USING btree (COALESCE(project_id, (team_id)::bigint), event, property);


--
-- Name: posthog_eventproperty_team_id_and_property_r32khd9s; Type: INDEX; Schema: public; Owner: posthog
--

-- IMPORTANT(eli.r): I skipped creating this index as redundant with posthog_eve_team_id_26dbfb_idx

CREATE INDEX posthog_eventproperty_team_id_and_property_r32khd9s ON public.posthog_eventproperty USING btree (team_id, property);


--
-- Name: posthog_eventproperty_team_id_be898eaa; Type: INDEX; Schema: public; Owner: posthog
--

CREATE INDEX posthog_eventproperty_team_id_be898eaa ON public.posthog_eventproperty USING btree (team_id);

--
-- Name: posthog_eventproperty posthog_eventproperty_project_id_dd2337d2_fk_posthog_project_id; Type: FK CONSTRAINT; Schema: public; Owner: posthog
--

-- IMPORTANT(eli.r): I did not create this on the new PROPDEFS DB

ALTER TABLE ONLY public.posthog_eventproperty
    ADD CONSTRAINT posthog_eventproperty_project_id_dd2337d2_fk_posthog_project_id FOREIGN KEY (project_id) REFERENCES public.posthog_project(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: posthog_eventproperty posthog_eventproperty_team_id_be898eaa_fk_posthog_team_id; Type: FK CONSTRAINT; Schema: public; Owner: posthog
--

-- IMPORTANT(eli.r): I did not create this on the new PROPDEFS DB

ALTER TABLE ONLY public.posthog_eventproperty
    ADD CONSTRAINT posthog_eventproperty_team_id_be898eaa_fk_posthog_team_id FOREIGN KEY (team_id) REFERENCES public.posthog_team(id) DEFERRABLE INITIALLY DEFERRED;


--
-- PostgreSQL database dump complete
--

