import{Dc as L,Eo as M,Ip as _,Ko as x,Sd as f,a as j,ac as H,b as u,ce as I,ee as B,h as q,ie as R,km as S,ne as U,r as h,re as z,se as W}from"/static/chunk-TW5IU73S.js";import{d as c,e as i,g as l,j as m}from"/static/chunk-SJXEOBQC.js";i();m();l();var r=c(j());var C={Person:"persons",Group:"groups",ProjectHomepage:"this project"},G=(0,r.kea)([(0,r.path)(e=>["lib","components","SceneDashboardChoice","sceneDashboardChoiceModalLogic",e||"unknown"]),(0,r.props)({}),(0,r.key)(e=>`${e.scene}`),(0,r.connect)({logic:[_],actions:[x,["updateCurrentTeam"],M,["setUserScenePersonalisation"]],values:[x,["currentTeam"],M,["user"],S,["nameSortedDashboards"]]}),(0,r.actions)({showSceneDashboardChoiceModal:()=>!0,closeSceneDashboardChoiceModal:()=>!0,setSceneDashboardChoice:e=>({dashboardId:e}),setSearchTerm:e=>({searchTerm:e})}),(0,r.reducers)({searchTerm:[null,{setSearchTerm:(e,{searchTerm:a})=>a}],isOpen:[!1,{showSceneDashboardChoiceModal:()=>!0,closeSceneDashboardChoiceModal:()=>!1}]}),(0,r.selectors)(({props:e})=>({currentDashboardId:[a=>[a.currentTeam,a.user],(a,n)=>{let s=n?.scene_personalisation?.find(p=>p.scene===e.scene)?.dashboard;return!s&&e.scene==="ProjectHomepage"&&(s=a?.primary_dashboard),(typeof s=="number"?s:s?.id)??null}],dashboards:[a=>[a.searchTerm,a.nameSortedDashboards],(a,n)=>(n=n.filter(s=>!s.deleted).sort((s,p)=>(s.name??"Untitled").localeCompare(p.name??"Untitled")),a?new z(n,{keys:["key","name","description","tags"],threshold:.3}).search(a).map(s=>s.item):n)]})),(0,r.listeners)(({actions:e,props:a})=>({setSceneDashboardChoice:async({dashboardId:n})=>{a.scene==="ProjectHomepage"?(e.updateCurrentTeam({primary_dashboard:n}),u.capture("primary dashboard changed")):(e.setUserScenePersonalisation(a.scene,n),u.capture("scene dashboard choice set",{scene:a.scene,dashboardId:n}))},showSceneDashboardChoiceModal:async()=>{a.scene==="ProjectHomepage"?u.capture("primary dashboard modal opened"):u.capture("scene dashboard choice modal opened",{scene:a.scene})}}))]);i();m();l();var b=c(j());i();m();l();var J=c(q());var D=c(h());function g(e){let a=(0,J.default)("text-warning",e.size==="small"?"text-lg":"text-3xl");return e.scene==="ProjectHomepage"?(0,D.jsx)(H,{className:a}):e.scene==="Group"?(0,D.jsx)(L,{className:a}):e.scene==="Person"?(0,D.jsx)(L,{className:a}):null}var o=c(h());function De({scene:e}){let a=G({scene:e}),{isOpen:n,currentDashboardId:s,dashboards:p,searchTerm:O}=(0,b.useValues)(a),{closeSceneDashboardChoiceModal:y,setSceneDashboardChoice:X,setSearchTerm:N}=(0,b.useActions)(a),{dashboardsLoading:$}=(0,b.useValues)(S);return(0,o.jsx)(I,{isOpen:n,onClose:y,title:(0,o.jsxs)(o.Fragment,{children:["Select a default dashboard for ",C[e]]}),footer:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(f,{type:"secondary","data-attr":"close-scene-dashboard-choice-modal",onClick:y,children:"Close"})}),children:$?(0,o.jsx)("div",{className:"space-y-2",children:(0,o.jsx)(W.Row,{repeat:4})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R,{type:"search",placeholder:"Search for dashboards",onChange:N,value:O??void 0,fullWidth:!0,allowClear:!0,className:"mb-4"}),(0,o.jsx)(B,{}),(0,o.jsx)("div",{className:"space-y-2 min-h-100",children:p.map(d=>{let T=d.id===s,k=(0,o.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[(0,o.jsx)("strong",{children:d.name}),(0,o.jsx)("span",{className:"text-text-3000 font-normal text-ellipsis",children:d.description})]}),T?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g,{scene:e,size:"small"})," ",(0,o.jsx)("span",{children:"Default"})]}):(0,o.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return T?(0,o.jsx)(U,{fullWidth:!0,status:"muted",className:"dashboard-row",children:k},d.id):(0,o.jsx)(f,{fullWidth:!0,className:"dashboard-row",onClick:()=>{X(d.id),N(""),y()},children:k},d.id)})})]})})}i();m();l();var t=c(h());function Te(e){return(0,t.jsxs)("div",{className:"empty-state-container flex flex-col items-center",children:[(0,t.jsxs)("h1",{children:[(0,t.jsx)(g,{scene:e.scene,size:"large"})," There isn\u2019t a"," ",e.scene==="ProjectHomepage"?(0,t.jsx)(t.Fragment,{children:"default "}):null,"dashboard set for"," ",C[e.scene]]}),e.scene==="ProjectHomepage"?(0,t.jsx)("p",{className:"mb-4",children:"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."}):null,(0,t.jsx)(f,{type:"primary","data-attr":`${e.scene}-choose-dashboard-from-empty`,onClick:e.open,children:"Select a dashboard"})]})}export{G as a,De as b,Te as c};
//# sourceMappingURL=/static/chunk-KBW4LJ4R.js.map
