import{a as A}from"/static/chunk-R6SH42VN.js";import{$a as h,Io as w,Lp as T,Sd as F,Tf as k,Wd as L,a as u,af as c,ie as y,m as f,r as d}from"/static/chunk-RFJTZKD6.js";import"/static/chunk-XPJ4MQJV.js";import"/static/chunk-3UDJFOQH.js";import"/static/chunk-HHT4SG7V.js";import"/static/chunk-K7LQKAJG.js";import"/static/chunk-QQTK3LZH.js";import"/static/chunk-IJQNM355.js";import"/static/chunk-4CN6THWS.js";import"/static/chunk-272RTCFX.js";import"/static/chunk-2ROB4QWU.js";import"/static/chunk-ALT2ZZSO.js";import"/static/chunk-UE6SLBBN.js";import"/static/chunk-GINZUAUY.js";import"/static/chunk-SQELCOUW.js";import"/static/chunk-IGYUTZ65.js";import"/static/chunk-YM6UBNGD.js";import"/static/chunk-C6TQ5FFZ.js";import"/static/chunk-GXGA523B.js";import"/static/chunk-N4MMWRNK.js";import"/static/chunk-NRLAI7OY.js";import"/static/chunk-LVVHNICT.js";import"/static/chunk-2AXSSSSX.js";import"/static/chunk-DGXQI7RB.js";import"/static/chunk-HUCRWDLX.js";import"/static/chunk-RFEQG3YN.js";import"/static/chunk-PUISI233.js";import{d as n,e as i,g as a,j as l}from"/static/chunk-SJXEOBQC.js";i();l();a();var g=n(u()),E=n(h());i();l();a();var e=n(u()),b=n(h());var s=(0,e.kea)([(0,e.path)(["scenes","authentication","login2FALogic"]),(0,e.connect)({values:[c,["preflight"],f,["featureFlags"]]}),(0,e.actions)({setGeneralError:(t,r)=>({code:t,detail:r}),setLoginStep:t=>({step:t}),clearGeneralError:!0}),(0,e.reducers)({generalError:[null,{setGeneralError:(t,r)=>r,clearGeneralError:()=>null}]}),(0,b.forms)(({actions:t})=>({twofactortoken:{defaults:{token:""},errors:({token:r})=>({token:r?null:"Please enter a token to continue"}),submit:async({token:r},m)=>{m();try{return await w.create("api/login/token",{token:r})}catch(p){let{code:B,detail:G}=p;throw t.setGeneralError(B,G),p}}}})),(0,e.listeners)({submitTwofactortokenSuccess:()=>{T(),window.location.reload()}})]);var o=n(d());function V(){let{isTwofactortokenSubmitting:t,generalError:r}=(0,g.useValues)(s),{preflight:m}=(0,g.useValues)(c);return(0,o.jsx)(A,{view:"login",hedgehog:!0,message:(0,o.jsxs)(o.Fragment,{children:["Welcome to",(0,o.jsx)("br",{})," PostHog",m?.cloud?" Cloud":"","!"]}),children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("h2",{children:"Two-Factor Authentication"}),(0,o.jsx)("p",{children:"Enter a token from your authenticator app or a backup code."}),(0,o.jsxs)(E.Form,{logic:s,formKey:"twofactortoken",enableFormOnSubmit:!0,className:"space-y-4",children:[r&&(0,o.jsx)(L,{type:"error",children:r.detail}),(0,o.jsx)(k,{name:"token",label:"Authenticator token",children:(0,o.jsx)(y,{className:"ph-ignore-input",autoFocus:!0,"data-attr":"token",placeholder:"123456",inputMode:"numeric",autoComplete:"one-time-code"})}),(0,o.jsx)(F,{type:"primary",status:"alt",htmlType:"submit","data-attr":"2fa-login",fullWidth:!0,center:!0,loading:t,size:"large",children:"Login"})]})]})})}export{V as Login2FA};
//# sourceMappingURL=/static/Login2FA-WN7PLT7C.js.map
