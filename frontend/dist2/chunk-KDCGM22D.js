import{Do as c,Io as P,Ip as v,Sn as T,Tn as h,Vd as _,Za as b,a as x,f as w,i as F}from"/static/chunk-TW5IU73S.js";import{Da as R,Ua as u,Za as y}from"/static/chunk-3UDJFOQH.js";import{d as p,e as m,g as f,j as S}from"/static/chunk-SJXEOBQC.js";m();S();f();var t=p(x()),L=p(b()),n=p(w());var g=30,j={createdBy:"All users",page:1,dateFrom:"all"},W=(0,t.kea)([(0,t.path)(e=>["scenes","session-recordings","saved-playlists","savedSessionRecordingPlaylistsLogic",e]),(0,t.props)({}),(0,t.key)(e=>e.tab),(0,t.connect)({actions:[v,["reportRecordingPlaylistCreated"]]}),(0,t.actions)(()=>({setSavedPlaylistsFilters:e=>({filters:e}),loadPlaylists:!0,updatePlaylist:(e,s)=>({shortId:e,properties:s}),deletePlaylist:e=>({playlist:e}),duplicatePlaylist:e=>({playlist:e})})),(0,t.reducers)(()=>({filters:[j,{setSavedPlaylistsFilters:(e,{filters:s})=>y({...e||{},...s,..."page"in s?{}:{page:1}})}],loadPlaylistsFailed:[!1,{loadPlaylists:()=>!1,loadPlaylistsSuccess:()=>!1,loadPlaylistsFailure:()=>!0}]})),(0,L.loaders)(({values:e,actions:s})=>({playlists:{__default:{results:[],count:0,filters:null},loadPlaylists:async(a,i)=>{e.playlists.filters!==null&&await i(300);let l={...e.filters},o=l.createdBy==="All users"?void 0:l.createdBy,r={limit:g,offset:Math.max(0,(l.page-1)*g),order:l.order??"-last_modified_at",created_by:o??void 0,search:l.search||void 0,date_from:l.dateFrom&&l.dateFrom!="all"?l.dateFrom:void 0,date_to:l.dateTo??void 0,pinned:l.pinned?!0:void 0},d=await P.recordings.listPlaylists(R(r));return i(),d},updatePlaylist:async({shortId:a,properties:i},l)=>{await l(100);let o=await P.recordings.updatePlaylist(a,i);l();let r=e.playlists.results.findIndex(d=>d.short_id===o.short_id);return r>-1&&(e.playlists.results[r]=o),{...e.playlists,results:[...e.playlists.results]}},deletePlaylist:async({playlist:a})=>(await h(a,()=>s.loadPlaylists()),e.playlists.results=e.playlists.results.filter(i=>i.short_id!==a.short_id),e.playlists),duplicatePlaylist:async({playlist:a},i)=>{await i(100);let{id:l,short_id:o,...r}=a;r.name=r.name?r.name+" (copy)":"";let d=await T(r);return s.reportRecordingPlaylistCreated("duplicate"),i(),d&&(_.success("Playlist duplicated successfully"),e.playlists.results=[d,...e.playlists.results]),e.playlists}}})),(0,t.listeners)(({actions:e})=>({setSavedPlaylistsFilters:()=>{e.loadPlaylists()}})),(0,t.selectors)(({actions:e})=>({sorting:[s=>[s.filters],s=>s.order?s.order.startsWith("-")?{columnKey:s.order.slice(1),order:-1}:{columnKey:s.order,order:1}:{columnKey:"last_modified_at",order:-1}],pagination:[s=>[s.filters,s.playlists],(s,a)=>({controlled:!0,pageSize:g,currentPage:s.page,entryCount:a.count,onBackward:a.previous?()=>e.setSavedPlaylistsFilters({page:s.page-1}):void 0,onForward:a.next?()=>e.setSavedPlaylistsFilters({page:s.page+1}):void 0})]})),(0,n.actionToUrl)(({values:e})=>{let s=()=>{if(F(n.router.values.location.pathname)===c.replay("playlists")){let a=e.filters,i=y(n.router.values.searchParams);if(!u(a,i))return[c.replay("playlists"),a,{},{replace:!1}]}};return{loadPlaylists:s,setSavedPlaylistsFilters:s}}),(0,n.urlToAction)(({actions:e,values:s})=>({[c.replay("playlists")]:(a,i)=>{let l=s.filters,o=y(i);u(l,o)||e.setSavedPlaylistsFilters(o)}})),(0,t.afterMount)(({actions:e})=>{e.loadPlaylists()})]);export{g as a,W as b};
//# sourceMappingURL=/static/chunk-KDCGM22D.js.map
