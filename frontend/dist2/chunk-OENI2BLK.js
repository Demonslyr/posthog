import{a as H,b as M,c as f}from"/static/chunk-G6Q3YRDS.js";import{Do as h,Pg as C,Qd as d,Sa as D,Sd as V,Ta as B,a as K,an as Q,bn as R,ch as W,cn as x,de as U,dn as Y,fe as y,hh as P,r as c,ve as w,xo as E,ze as _,zo as z}from"/static/chunk-TW5IU73S.js";import{n as A}from"/static/chunk-3UDJFOQH.js";import{d as r,e as n,g as u,j as p}from"/static/chunk-SJXEOBQC.js";n();p();u();var G="/static/assets/azure-2ZA5B3TY.png";var O="/static/assets/chargebee-DYJTQLJ4.png";var $="/static/assets/cloudflare-JWWGAIGA.png";var b="/static/assets/mysql-K2MUD3WV.png";var g="/static/assets/sql-azure-EMRMM5TI.png";var q="/static/assets/stripe-5M7G5HUZ.png";var F="/static/assets/vitally-TJ5EC35L.png";var S="/static/assets/zendesk-HXYUI66W.png";n();p();u();var l=r(K());var o=r(c()),sX={Running:"primary",Completed:"success",Error:"danger",Failed:"danger","Billing limits":"danger"};function PX(){let{dataWarehouseSources:t,dataWarehouseSourcesLoading:T,sourceReloadingById:s}=(0,l.useValues)(E),{deleteSource:m,reloadSource:I}=(0,l.useActions)(E);return(0,o.jsx)(_,{dataSource:t?.results??[],loading:T,disableTableWhileLoading:!1,pagination:{pageSize:10},columns:[{width:0,render:(a,X)=>(0,o.jsx)(k,{type:X.source_type})},{title:"Source",key:"name",render:(a,X)=>(0,o.jsx)(C,{to:h.pipelineNode("source",`managed-${X.id}`,"schemas"),title:z[X.source_type]?.label??X.source_type,description:X.prefix})},{title:"Last Successful Run",key:"last_run_at",tooltip:"Time of the last run that completed a data import",render:(a,X)=>X.last_run_at?(0,o.jsx)(W,{time:X.last_run_at,formatDate:"MMM\xA0DD,\xA0YYYY",formatTime:"HH:mm"}):"Never"},{title:"Total Rows Synced",key:"rows_synced",tooltip:"Total number of rows synced across all schemas in this source",render:(a,X)=>X.schemas.reduce((i,v)=>i+(v.table?.row_count??0),0).toLocaleString()},{title:"Status",key:"status",render:(a,X)=>{if(!X.status)return null;let i=(0,o.jsx)(y,{type:sX[X.status]||"default",children:X.status});return X.latest_error&&X.status==="Error"?(0,o.jsx)(D,{title:X.latest_error,children:i}):i}},{key:"actions",width:0,render:(a,X)=>(0,o.jsx)("div",{className:"flex flex-row justify-end",children:s[X.id]?(0,o.jsx)("div",{children:(0,o.jsx)(d,{})}):(0,o.jsx)("div",{children:(0,o.jsx)(w,{overlay:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(D,{title:"Start the data import for this schema again",children:(0,o.jsx)(V,{type:"tertiary","data-attr":`reload-data-warehouse-${X.source_type}`,onClick:()=>{I(X)},children:"Reload"},`reload-data-warehouse-${X.source_type}`)}),(0,o.jsx)(V,{status:"danger","data-attr":`delete-data-warehouse-${X.source_type}`,onClick:()=>{U.open({title:"Delete data source?",description:"Are you sure you want to delete this data source? All related tables will be deleted.",primaryButton:{children:"Delete",status:"danger",onClick:()=>m(X)},secondaryButton:{children:"Cancel"}})},children:"Delete"},`delete-data-warehouse-${X.source_type}`)]})})})})}]})}function L(t){return A.includes(t)?"https://posthog.com/docs/data-warehouse/setup#step-1-creating-a-bucket-in-s3":`https://posthog.com/docs/data-warehouse/setup#${t.toLowerCase()}`}var e=r(c());function jX(t){return t.includes(".s3.amazonaws.com")?"aws":t.startsWith("https://storage.googleapis.com")?"google-cloud":t.includes(".blob.")?"azure":t.includes(".r2.cloudflarestorage.com")?"cloudflare-r2":"BlushingHog"}function k({type:t,size:T="small"}){let s=T==="small"?30:60,m={Stripe:q,Hubspot:M,Zendesk:S,Postgres:x,MySQL:b,Snowflake:Y,aws:Q,"google-cloud":H,"cloudflare-r2":$,azure:G,Salesforce:f,MSSQL:g,Vitally:F,BigQuery:R,Chargebee:O,BlushingHog:P}[t];return(0,e.jsx)("div",{className:"flex items-center gap-4",children:(0,e.jsx)(D,{title:(0,e.jsxs)(e.Fragment,{children:[t,(0,e.jsx)("br",{}),"Click to view docs"]}),children:(0,e.jsx)(B,{to:L(t),children:(0,e.jsx)("img",{src:m,alt:t,height:s,width:s,className:"rounded object-contain max-w-none"})})})})}export{sX as a,PX as b,jX as c,k as d};
//# sourceMappingURL=/static/chunk-OENI2BLK.js.map
