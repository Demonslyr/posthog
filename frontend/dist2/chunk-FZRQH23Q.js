import{Ac as z,Be as j,Bg as f,Hd as y,Ia as L,Pe as v,Sa as U,Sd as o,a as tl,h as Zl,he as w,r as D}from"/static/chunk-TW5IU73S.js";import{Tb as T,a as al}from"/static/chunk-3UDJFOQH.js";import{d as b,e as u,g as H,j as M}from"/static/chunk-SJXEOBQC.js";u();M();H();var B=b(Zl()),O=b(tl());var e=b(al());var l=b(D());function Ql({name:p,value:a,onChange:N,onSave:K,saveOnBlur:x=!1,placeholder:C,minLength:t,maxLength:X,autoFocus:J=!1,multiline:Q=!1,markdown:r=!1,compactButtons:W=!1,paywallFeature:A,mode:Z,onModeToggle:R,editingIndication:P="outlined",className:_,style:q,"data-attr":$,saveButtonText:ll="Save",notice:G}){let{guardAvailableFeature:Y}=(0,O.useValues)(f),[g,V]=(0,e.useState)(Z==="edit"),[i,I]=(0,e.useState)(a),[dl,el]=(0,e.useState)(!1),h=(0,e.useRef)(null),n=(0,e.useRef)(null),F=(0,e.useRef)(null),S=(0,e.useRef)();(0,e.useEffect)(()=>{I(a)},[a]),(0,e.useEffect)(()=>{V(Z==="edit")},[Z]),(0,e.useEffect)(()=>{if(n.current&&S.current===!1&&g){let d=n.current.value.length;n.current.setSelectionRange(d,d),n.current.focus()}S.current=g},[g]),y({ref:h,onResize:()=>{F.current&&el(F.current.scrollWidth>F.current.clientWidth)}});let E=!t||i.length>=t,il=d=>{d.preventDefault()},c=()=>{V(!1),I(a),R?.("view")},m=()=>{K?.(i),V(!1),R?.("view")},s=Z==="edit"||g,k=d=>{s&&(E&&d.key==="Enter"&&(!Q||d.metaKey||d.ctrlKey)?(m(),d.stopPropagation(),d.preventDefault()):d.key==="Escape"&&(c(),d.stopPropagation(),d.preventDefault()))};return(0,l.jsxs)("div",{className:(0,B.default)("EditableField",Q&&"EditableField--multiline",s&&"EditableField--editing",P==="underlined"&&"EditableField--underlined",_),"data-attr":$,style:q,ref:h,children:[(0,l.jsx)("div",{className:"EditableField__highlight",children:s?(0,l.jsxs)(l.Fragment,{children:[Q?(0,l.jsx)(j,{name:p,value:i,onChange:d=>{N?.(d.target.value),I(d.target.value)},onBlur:x?i!==a?m:c:void 0,onKeyDown:k,placeholder:C,minLength:t,maxLength:X,autoFocus:J,ref:n}):(0,l.jsx)(w,{name:p,value:i,onChange:d=>{Y(A,()=>{N?.(d.currentTarget.value),I(d.currentTarget.value)})},onBlur:x?i!==a?m:c:void 0,onKeyDown:k,placeholder:C,minLength:t,maxLength:X,autoFocus:J,ref:n,wrapperClassName:"self-center py-px"}),(!Z||!!R)&&(0,l.jsxs)("div",{className:"EditableField__actions",children:[r&&(0,l.jsx)(U,{title:"Markdown formatting support",children:(0,l.jsx)("span",{className:"flex items-center",children:(0,l.jsx)(L,{className:"text-secondary text-2xl"})})}),(0,l.jsx)(o,{title:"Cancel editing",size:typeof W=="string"?W:"small",onClick:c,type:"secondary",onMouseDown:il,children:"Cancel"}),(0,l.jsx)(o,{title:t?`Save (at least ${T(t,"character","characters")} required)`:"Save",size:typeof W=="string"?W:"small",disabled:!E,onClick:m,type:"primary",children:ll})]})]}):(0,l.jsxs)(l.Fragment,{children:[i&&r?(0,l.jsx)(v,{lowKeyHeadings:!0,children:i}):(0,l.jsx)(U,{title:dl?i:void 0,placement:"bottom-start",delayMs:0,children:(0,l.jsx)("span",{className:"EditableField__display",ref:F,children:i||(0,l.jsx)("i",{children:C})})}),(!Z||!!R)&&(0,l.jsx)("div",{className:"EditableField__actions",children:(0,l.jsx)(o,{title:"Edit",icon:(0,l.jsx)(z,{}),size:W?"small":void 0,onClick:()=>{Y(A,()=>{V(!0),R?.("edit")})},"data-attr":`edit-prop-${p}`,noPadding:!0})})]})}),!s&&G&&(0,l.jsx)(U,{title:G.tooltip,placement:"right",children:(0,l.jsx)("span",{className:"flex items-center",children:e.default.cloneElement(G.icon,{...G.icon.props,className:(0,B.default)(G.icon.props.className,"EditableField__notice")})})})]})}export{Ql as a};
//# sourceMappingURL=/static/chunk-FZRQH23Q.js.map
