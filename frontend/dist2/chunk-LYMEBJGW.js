import{Eo as y,Io as d,Wm as g,Ym as f,Za as b,a as L,f as h,m as F,re as T}from"/static/chunk-RFJTZKD6.js";import{Ua as m}from"/static/chunk-3UDJFOQH.js";import{d as l,e as p,g as c,j as u}from"/static/chunk-SJXEOBQC.js";p();u();c();var t=l(L()),H=l(b()),o=l(h());var U=(e,i)=>!(!i||e.status==="alpha"&&!i.is_staff),R=(0,t.kea)([(0,t.props)({}),(0,t.key)(e=>`${e.syncFiltersWithUrl?"scene":"default"}/${e.type??"destination"}/${e.subTemplateId??""}`),(0,t.path)(e=>["scenes","pipeline","destinationsLogic",e]),(0,t.connect)({values:[g,["canEnableNewDestinations"],F,["featureFlags"],y,["user"]]}),(0,t.actions)({setFilters:e=>({filters:e}),resetFilters:!0}),(0,t.reducers)(({props:e})=>({filters:[{...e.defaultFilters||{},...e.forceFilters||{}},{setFilters:(i,{filters:r})=>({...i,...r,...e.forceFilters||{}}),resetFilters:()=>({...e.forceFilters||{}})}]})),(0,H.loaders)(({props:e})=>({templates:[[],{loadHogFunctionTemplates:async()=>(await d.hogFunctions.listTemplates({types:[e.type],sub_template_id:e.subTemplateId})).results}]})),(0,t.selectors)({loading:[e=>[e.templatesLoading],e=>e],templatesFuse:[e=>[e.templates],e=>new T(e||[],{keys:["name","description"],threshold:.3})],filteredTemplates:[e=>[e.filters,e.templates,e.templatesFuse,e.user],(e,i,r,a)=>{let{search:n}=e;return(n?r.search(n).map(s=>s.item):i).filter(s=>U(s,a))}],canEnableHogFunction:[e=>[e.canEnableNewDestinations],e=>i=>i?.free||e],urlForTemplate:[e=>[e.filters],e=>i=>(0,o.combineUrl)(f(i.type,i.id),{},{configuration:{filters:e.filters}}).url]}),(0,o.actionToUrl)(({props:e,values:i})=>{if(!e.syncFiltersWithUrl)return{};let r=()=>[o.router.values.location.pathname,i.filters,o.router.values.hashParams,{replace:!0}];return{setFilters:()=>r(),resetFilters:()=>r()}}),(0,o.urlToAction)(({props:e,actions:i,values:r})=>({"*":(a,n)=>{e.syncFiltersWithUrl&&(m(r.filters,n)||i.setFilters(n))}}))]);export{U as a,R as b};
//# sourceMappingURL=/static/chunk-LYMEBJGW.js.map
