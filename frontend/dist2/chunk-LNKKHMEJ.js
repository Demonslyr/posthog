import{a as w,b as j}from"/static/chunk-JNQTMPE2.js";import{l as L}from"/static/chunk-CDTERFC5.js";import{Do as p,Io as g,Ip as P,Ko as d,Za as H,a as h,hg as I,hm as y,r as f}from"/static/chunk-RFJTZKD6.js";import{a as T,na as u}from"/static/chunk-3UDJFOQH.js";import{d as r,e as n,g as a,j as m}from"/static/chunk-SJXEOBQC.js";n();m();a();var o=r(h()),b=r(H());var l=(0,o.kea)([(0,o.path)(["scenes","project-homepage","projectHomepageLogic"]),(0,o.connect)({values:[d,["currentTeam"],I,["currentProjectId"]]}),(0,o.selectors)({primaryDashboardId:[()=>[d.selectors.currentTeam],e=>e?.primary_dashboard],dashboardLogicProps:[e=>[e.primaryDashboardId],e=>e?{id:e,placement:"project-homepage"}:null]}),(0,b.loaders)(({values:e})=>({recentInsights:[[],{loadRecentInsights:async()=>(await g.get(`api/environments/${e.currentProjectId}/insights/my_last_viewed`)).map(c=>y(c))}],persons:[[],{loadPersons:async()=>(await g.persons.list()).results}]})),(0,o.afterMount)(({actions:e})=>{e.loadPersons()})]);n();m();a();var i=r(h());var v=r(T());var t=r(f());function x({insight:e}){let{reportInsightOpenedFromRecentInsightList:s}=(0,i.useActions)(P);return(0,t.jsx)(j,{title:e.name||e.derived_name||"Insight",subtitle:`Last modified ${(0,u.default)(e.last_modified_at).fromNow()}`,prefix:(0,t.jsx)(L,{insight:e}),to:p.insightView(e.short_id),onClick:()=>{s()}})}function ee(){let{recentInsights:e,recentInsightsLoading:s}=(0,i.useValues)(l),{loadRecentInsights:c}=(0,i.useActions)(l);return(0,v.useEffect)(()=>{c()},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(w,{title:"Your recently viewed insights",viewAllURL:p.savedInsights(),loading:s,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:p.savedInsights()},items:e.slice(0,5),renderRow:(M,R)=>(0,t.jsx)(x,{insight:M},R)})})}export{l as a,x as b,ee as c};
//# sourceMappingURL=/static/chunk-LNKKHMEJ.js.map
