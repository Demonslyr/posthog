import{a as Z,b as $}from"/static/chunk-7IEEMZ6G.js";import{a as X}from"/static/chunk-IVGZ2YI3.js";import{a as Q,b as y}from"/static/chunk-F4VW2WHG.js";import{a as q}from"/static/chunk-OYAHDROG.js";import{a as j}from"/static/chunk-DYVMG6MY.js";import{s as Y}from"/static/chunk-44P5EQSU.js";import{a as V}from"/static/chunk-GH3IWF3M.js";import{b as M}from"/static/chunk-HRNZBUVG.js";import{b as O,d as G}from"/static/chunk-OKGJSIGC.js";import{Ae as W,Dl as H,Do as s,Eo as J,Pg as D,Qd as A,Sd as n,Ta as _,Wb as w,Wd as R,Yh as U,a as ce,de as i,ee as x,f as ye,fe as E,ie as I,m as B,pe as z,r as N,ve as P,vo as K,ze as F}from"/static/chunk-RFJTZKD6.js";import{F as T,na as h}from"/static/chunk-3UDJFOQH.js";import{d as c,e as L,g as C,j as k}from"/static/chunk-SJXEOBQC.js";L();k();C();var l=c(ce()),f=c(ye());var e=c(N()),Je={component:pe,logic:y};function pe(){let{surveys:m,searchedSurveys:p,surveysLoading:u,surveysResponsesCount:v,surveysResponsesCountLoading:ee,searchTerm:te,filters:g,showSurveysDisabledBanner:re,tab:o,globalSurveyAppearanceConfigAvailable:ne}=(0,l.useValues)(y),{deleteSurvey:oe,updateSurvey:d,setSearchTerm:ae,setSurveysFilters:S,setTab:ie}=(0,l.useActions)(y),{user:se}=(0,l.useValues)(J),{featureFlags:le}=(0,l.useValues)(B),b=!u&&m.length===0,ue=U("HOG_FUNCTIONS_LINKED"),de=le[T.ENVIRONMENTS]?"environment":"project";return(0,e.jsxs)("div",{children:[(0,e.jsx)(K,{buttons:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n,{to:s.surveyTemplates(),type:"primary","data-attr":"new-survey",sideAction:{dropdown:{placement:"bottom-start",actionable:!0,overlay:(0,e.jsx)(n,{size:"small",to:s.survey("new"),children:"Create blank survey"})},"data-attr":"saved-insights-new-insight-dropdown"},children:"New survey"})}),caption:(0,e.jsxs)(e.Fragment,{children:["Check out our",(0,e.jsxs)(_,{"data-attr":"survey-help",to:"https://posthog.com/docs/surveys?utm_medium=in-product&utm_campaign=new-survey",target:"_blank",children:[" ","surveys docs"]})," ","to learn more."]}),tabbedPage:!0}),(0,e.jsx)(W,{activeKey:o,onChange:r=>ie(r),tabs:[{key:"active",label:"Active"},{key:"archived",label:"Archived"},ue?{key:"notifications",label:"Notifications"}:null,{key:"history",label:"History"},ne?{key:"settings",label:"Settings"}:null]}),o==="settings"&&(0,e.jsx)(Z,{}),o==="notifications"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:"Get notified whenever a survey result is submitted"}),(0,e.jsx)(q,{logicKey:"surveys",type:"destination",subTemplateId:"survey-response",filters:{events:[{id:"survey sent",type:"events",order:0}]}})]}),o==="history"&&(0,e.jsx)(Y,{scope:"Survey"}),(o==="active"||o==="archived")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(X,{}),re?(0,e.jsxs)(R,{type:"warning",action:{type:"secondary",icon:(0,e.jsx)(w,{}),onClick:()=>$(),children:"Configure"},className:"mb-2",children:["Survey popovers are currently disabled for this ",de," but there are active surveys running. Re-enable them in the settings."]}):null]}),(b||!se?.has_seen_product_intro_for?.surveys)&&(0,e.jsx)(V,{productName:"Surveys",thingName:"survey",description:"Use surveys to gather qualitative feedback from your users on new or existing features.",action:()=>f.router.actions.push(s.surveyTemplates()),isEmpty:m.length===0,productKey:"surveys"}),!b&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:"flex flex-wrap justify-between gap-2 mb-4",children:[(0,e.jsx)(I,{type:"search",placeholder:"Search for surveys",onChange:ae,value:te||""}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{children:(0,e.jsx)("b",{children:"Status"})}),(0,e.jsx)(z,{dropdownMatchSelectWidth:!1,onChange:r=>{S({status:r})},size:"small",options:[{label:"Any",value:"any"},{label:"Draft",value:"draft"},{label:"Running",value:"running"},{label:"Complete",value:"complete"}],value:g.status}),(0,e.jsx)("span",{className:"ml-1",children:(0,e.jsx)("b",{children:"Created by"})}),(0,e.jsx)(j,{defaultLabel:"Any user",value:g.created_by??null,onChange:r=>S({created_by:r?.id})})]})]})}),(0,e.jsx)(F,{dataSource:p,defaultSorting:{columnKey:"created_at",order:-1},rowKey:"name",nouns:["survey","surveys"],"data-attr":"surveys-table",emptyState:o==="active"?"No surveys. Create a new survey?":"No surveys found",loading:u,columns:[{dataIndex:"name",title:"Name",render:function(a,t){return(0,e.jsx)(D,{to:s.survey(t.id),title:H(t.name,17)})}},{title:"Responses",dataIndex:"id",render:function(a,t){return(0,e.jsx)(e.Fragment,{children:ee?(0,e.jsx)(A,{}):(0,e.jsx)("div",{children:v[t.id]??0})})},sorter:(r,a)=>{let t=v[r.id]??0,me=v[a.id]??0;return t-me}},{dataIndex:"type",title:"Mode"},{title:"Question type",render:function(a,t){return t.questions?.length===1?M[t.questions[0].type]:"Multiple"}},G(),O(),{title:"Status",width:100,render:function(a,t){return(0,e.jsx)(ve,{survey:t})}},{width:0,render:function(a,t){return(0,e.jsx)(P,{overlay:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n,{fullWidth:!0,onClick:()=>f.router.actions.push(s.survey(t.id)),children:"View"}),!t.start_date&&(0,e.jsx)(n,{fullWidth:!0,onClick:()=>i.open({title:"Launch this survey?",content:(0,e.jsx)("div",{className:"text-sm text-secondary",children:"The survey will immediately start displaying to users matching the display conditions."}),primaryButton:{children:"Launch",type:"primary",onClick:()=>{d({id:t.id,updatePayload:{start_date:(0,h.default)().toISOString()}})},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}}),children:"Launch survey"}),t.start_date&&!t.end_date&&(0,e.jsx)(n,{fullWidth:!0,onClick:()=>{i.open({title:"Stop this survey?",content:(0,e.jsx)("div",{className:"text-sm text-secondary",children:"The survey will no longer be visible to your users."}),primaryButton:{children:"Stop",type:"primary",onClick:()=>{d({id:t.id,updatePayload:{end_date:(0,h.default)().toISOString()}})},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},children:"Stop survey"}),t.end_date&&!t.archived&&(0,e.jsx)(n,{fullWidth:!0,onClick:()=>{i.open({title:"Resume this survey?",content:(0,e.jsx)("div",{className:"text-sm text-secondary",children:"Once resumed, the survey will be visible to your users again."}),primaryButton:{children:"Resume",type:"primary",onClick:()=>{d({id:t.id,updatePayload:{end_date:null}})},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},children:"Resume survey"}),(0,e.jsx)(x,{}),t.end_date&&t.archived&&(0,e.jsx)(n,{fullWidth:!0,onClick:()=>d({id:t.id,updatePayload:{archived:!1}}),children:"Unarchive"}),t.end_date&&!t.archived&&(0,e.jsx)(n,{fullWidth:!0,onClick:()=>{i.open({title:"Archive this survey?",content:(0,e.jsx)("div",{className:"text-sm text-secondary",children:"This action will remove the survey from your active surveys list. It can be restored at any time."}),primaryButton:{children:"Archive",type:"primary",onClick:()=>{d({id:t.id,updatePayload:{archived:!0}})},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},children:"Archive"}),(0,e.jsx)(n,{status:"danger",onClick:()=>{i.open({title:"Delete this survey?",content:(0,e.jsx)("div",{className:"text-sm text-secondary",children:"This action cannot be undone. All survey data will be permanently removed."}),primaryButton:{children:"Delete",type:"primary",onClick:()=>oe(t.id),size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},fullWidth:!0,children:"Delete"})]})})}}]})]})]})]})}function ve({survey:m}){let p={running:"success",draft:"default",complete:"completion"},u=Q(m);return(0,e.jsx)(E,{type:p[u],className:"font-semibold","data-attr":"status",children:u.toUpperCase()})}export{Je as a,pe as b,ve as c};
//# sourceMappingURL=/static/chunk-L75XFVXE.js.map
