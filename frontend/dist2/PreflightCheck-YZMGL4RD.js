import{a as R}from"/static/chunk-NZFSLWJ4.js";import{a as x}from"/static/chunk-R6SH42VN.js";import{Bd as U,Cb as s,Nb as J,Qd as B,Sd as d,Ta as i,a as H,af as I,da as o,ee as m,h as y,na as A,ne as p,r as N,tb as F}from"/static/chunk-RFJTZKD6.js";import"/static/chunk-XPJ4MQJV.js";import{Ha as G}from"/static/chunk-3UDJFOQH.js";import"/static/chunk-HHT4SG7V.js";import"/static/chunk-K7LQKAJG.js";import"/static/chunk-QQTK3LZH.js";import"/static/chunk-IJQNM355.js";import"/static/chunk-4CN6THWS.js";import"/static/chunk-272RTCFX.js";import"/static/chunk-2ROB4QWU.js";import"/static/chunk-ALT2ZZSO.js";import"/static/chunk-UE6SLBBN.js";import"/static/chunk-GINZUAUY.js";import"/static/chunk-SQELCOUW.js";import"/static/chunk-IGYUTZ65.js";import"/static/chunk-YM6UBNGD.js";import"/static/chunk-C6TQ5FFZ.js";import"/static/chunk-GXGA523B.js";import"/static/chunk-N4MMWRNK.js";import"/static/chunk-NRLAI7OY.js";import"/static/chunk-LVVHNICT.js";import"/static/chunk-2AXSSSSX.js";import"/static/chunk-DGXQI7RB.js";import"/static/chunk-HUCRWDLX.js";import"/static/chunk-RFEQG3YN.js";import"/static/chunk-PUISI233.js";import{d as n,e as V,g as r,j as b}from"/static/chunk-SJXEOBQC.js";V();b();r();var C=n(y()),a=n(H());var l=n(N()),dl={component:S,logic:I};function X({status:t,loading:g}){return g?(0,l.jsx)(B,{textColored:!0,className:"text-accent-primary"}):t==="validated"?(0,l.jsx)(F,{}):t==="warning"||t==="optional"?(0,l.jsx)(U,{}):(0,l.jsx)(o,{})}function f({name:t,status:g,caption:Z}){let{preflightLoading:e}=(0,a.useValues)(I);return(0,l.jsxs)("div",{className:(0,C.default)("PreflightItem",e?"Preflight--loading":`Preflight--${g}`),children:[(0,l.jsx)("div",{className:"PreflightItem__icon-container",children:(0,l.jsx)(X,{status:g,loading:e})}),(0,l.jsxs)("div",{className:"PreflightItem__text-container",children:[(0,l.jsx)("p",{className:"PreflightItem__item-name",children:t}),Z&&(0,l.jsx)("p",{"data-attr":"caption",className:"text-secondary",children:Z})]}),(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"Preflight__status-text","data-attr":"status-text",children:G(e?"checking":g)})})]})}function S(){let{preflight:t,preflightLoading:g,preflightMode:Z,checks:e,areChecksExpanded:c,checksSummary:W}=(0,a.useValues)(I),{setPreflightMode:Q,handlePreflightFinished:u,setChecksManuallyExpanded:Y,revalidatePreflight:k}=(0,a.useActions)(I);return(0,l.jsx)(x,{view:"preflight-check",footer:(0,l.jsxs)("p",{className:"text-center mt-4 mb-0",children:["Need help? Take a look at our"," ",(0,l.jsx)(i,{to:"https://posthog.com/docs/self-host/deploy/troubleshooting",target:"_blank",targetBlankIcon:!1,children:"documentation"})," ","or"," ",(0,l.jsx)(i,{to:"https://posthog.com/support",target:"_blank",targetBlankIcon:!1,children:"visit community support"}),"."]}),fixedWidth:!1,children:(0,l.jsx)("div",{className:"Preflight",children:Z?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"Preflight__header",children:[(0,l.jsx)("p",{className:"Preflight__header--title-text",children:"Validate implementation"}),(0,l.jsxs)("p",{className:"Preflight__header--secondary-text",children:["Validation happens immediately. You can rerun validation checks by clicking \u201Cvalidate requirements\u201D. If you get stuck, try our"," ",(0,l.jsx)(i,{to:"https://posthog.com/docs/self-host/deploy/troubleshooting",target:"_blank",children:"troubleshooting guide"})," ","or our"," ",(0,l.jsx)(i,{to:"https://posthog.com/docs/runbook",target:"_blank",children:"self-host runbook"}),"."]})]}),(0,l.jsxs)("div",{className:"Preflight__checks-container",children:[(0,l.jsxs)("div",{className:"Preflight__check-summary",children:[(0,l.jsx)("div",{className:(0,C.default)("Preflight__summary-icon-container",g?"Preflight--loading":`Preflight--${W.summaryStatus}`),children:(0,l.jsx)(X,{status:W.summaryStatus,loading:g})}),(0,l.jsxs)("div",{className:"Preflight__summary-text-container",children:[(0,l.jsx)("p",{className:"Preflight__summary-header",children:"Validation checks"}),(0,l.jsx)("p",{"data-attr":"caption",className:"text-secondary Preflight__summary-description",children:W.summaryString})]}),(0,l.jsx)(d,{icon:c?(0,l.jsx)(s,{style:{color:"var(--text-secondary)"}}):(0,l.jsx)(J,{style:{color:"var(--text-secondary)"}}),onClick:()=>{Y(!c)}})]}),(0,l.jsx)(R,{collapsed:!c,children:(0,l.jsx)(l.Fragment,{children:e.map(h=>(0,l.jsx)(f,{...h},h.id))})}),(0,l.jsx)(d,{center:!0,fullWidth:!0,size:"large","data-attr":"preflight-refresh",onClick:()=>k(),disabled:g||!t,icon:(0,l.jsx)(A,{}),children:"Validate requirements"})]}),(0,l.jsx)(m,{thick:!0,dashed:!0,className:"my-6"}),W.summaryStatus!=="error"||Z=="experimentation"?(0,l.jsx)(d,{fullWidth:!0,center:!0,type:"primary",className:"mt-2",size:"large","data-attr":"preflight-complete",onClick:u,children:"Continue"}):(0,l.jsx)(p,{fullWidth:!0,center:!0,className:"mt-2 Preflight__cannot-continue",size:"large",children:(0,l.jsx)("p",{className:"text-center text-secondary",children:"All required checks must pass before you can continue"})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"Preflight__header",children:[(0,l.jsx)("p",{className:"Preflight__header--title-text",children:"Select a launch mode"}),(0,l.jsx)("p",{className:"Preflight__header--secondary-text",children:"What's your plan for this installation? We'll make infrastructure checks accordingly."})]}),(0,l.jsx)(d,{fullWidth:!0,center:!0,type:"primary",className:"mt-2",size:"large","data-attr":"preflight-live",onClick:()=>Q("live"),children:"Live implementation"}),(0,l.jsx)(d,{type:"secondary",fullWidth:!0,center:!0,className:"mt-2",size:"large","data-attr":"preflight-experimentation",onClick:()=>Q("experimentation"),children:"Just experimenting"}),(0,l.jsx)(m,{thick:!0,dashed:!0,className:"my-6"}),(0,l.jsx)("p",{className:"text-secondary text-center mb-0",children:"We will not enforce some security requirements in experimentation mode."})]})})})}var Zl=S;export{S as PreflightCheck,Zl as default,dl as scene};
//# sourceMappingURL=/static/PreflightCheck-YZMGL4RD.js.map
