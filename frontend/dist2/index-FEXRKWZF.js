import{a as Qo}from"/static/chunk-ASGQOEM4.js";import{b as il}from"/static/chunk-UY3AB4XN.js";import{f as ee,g as Xo}from"/static/chunk-XP6SEOGC.js";import{a as Va}from"/static/chunk-ZBSYLSJK.js";import"/static/chunk-R2FGESDV.js";import"/static/chunk-FGATK7EO.js";import{b as So,c as Bo,d as Jo,e as zl}from"/static/chunk-MABMTRIP.js";import"/static/chunk-5JMOHJDR.js";import"/static/chunk-E5EBD4YF.js";import"/static/chunk-YMJSMEVZ.js";import"/static/chunk-G6ENRSAD.js";import"/static/chunk-YLWX37ZH.js";import"/static/chunk-HFSFMFXT.js";import"/static/chunk-FCOMHTD6.js";import{c as Uo}from"/static/chunk-B45QJOJV.js";import"/static/chunk-ZXSHFYOF.js";import"/static/chunk-YMADXPYD.js";import"/static/chunk-IPCVEVZF.js";import"/static/chunk-ZTROLN7N.js";import"/static/chunk-36DSVTR6.js";import"/static/chunk-DXU2OWVA.js";import"/static/chunk-UNRPRUE4.js";import"/static/chunk-FB53JKJK.js";import"/static/chunk-ZDFMFKTJ.js";import"/static/chunk-VZDALGXW.js";import"/static/chunk-TF53AUIP.js";import"/static/chunk-4MNNHUJC.js";import"/static/chunk-MHUMFW53.js";import"/static/chunk-I3JBH3PJ.js";import"/static/chunk-X3DMY2SE.js";import"/static/chunk-L75XFVXE.js";import"/static/chunk-7IEEMZ6G.js";import"/static/chunk-IVGZ2YI3.js";import"/static/chunk-CIEHRPUV.js";import"/static/chunk-HXWIHI4I.js";import"/static/chunk-XY7F5WGW.js";import"/static/chunk-FQ666B2X.js";import"/static/chunk-LYVLXNIU.js";import"/static/chunk-ZRP64K7H.js";import"/static/chunk-F4VW2WHG.js";import"/static/chunk-RMMNJQZ5.js";import"/static/chunk-IF5PCV5K.js";import"/static/chunk-NUJQT2B6.js";import"/static/chunk-336DAFEI.js";import"/static/chunk-LZ4U35M5.js";import"/static/chunk-Y4WAEGNO.js";import"/static/chunk-5QZ3UKWA.js";import"/static/chunk-L6OS4YDC.js";import"/static/chunk-N2KORDXB.js";import"/static/chunk-A5MOAJQD.js";import"/static/chunk-SSCAQKOK.js";import"/static/chunk-G6Q3YRDS.js";import{a as Hl}from"/static/chunk-XW2JOKCQ.js";import{e as Co}from"/static/chunk-YZ3UPBKV.js";import"/static/chunk-XXTLNI2H.js";import"/static/chunk-AUQGOGK2.js";import"/static/chunk-Z3ZSBYIV.js";import"/static/chunk-VVSLW35Y.js";import"/static/chunk-KYJ4OXJI.js";import"/static/chunk-GVAK35JD.js";import"/static/chunk-HOCRDURT.js";import"/static/chunk-KHKNIVWH.js";import"/static/chunk-OYAHDROG.js";import"/static/chunk-MEAB657I.js";import"/static/chunk-4HIBDE5Y.js";import"/static/chunk-TNG4S7TR.js";import"/static/chunk-LYMEBJGW.js";import"/static/chunk-QIBQKJHN.js";import"/static/chunk-34UVU7UN.js";import"/static/chunk-CDTERFC5.js";import"/static/chunk-LZWHW4MC.js";import"/static/chunk-RSTRTBMR.js";import"/static/chunk-DYVMG6MY.js";import"/static/chunk-44P5EQSU.js";import"/static/chunk-GH3IWF3M.js";import"/static/chunk-CBJ7RAUW.js";import"/static/chunk-XSEDUXPL.js";import"/static/chunk-HRNZBUVG.js";import"/static/chunk-OKGJSIGC.js";import"/static/chunk-NKVVAJQ7.js";import"/static/chunk-2HTNY362.js";import"/static/chunk-S27Q4QO6.js";import"/static/chunk-JUFFFVO5.js";import"/static/chunk-JZCOVRBI.js";import{a as $e}from"/static/chunk-2CUMU4XV.js";import"/static/chunk-EIJECEWK.js";import{$a as Di,$c as Pa,$g as Wo,A as Ml,Ac as wa,Bc as Ha,Bd as Ke,Cd as _t,Co as Fo,Dc as za,Do as I,Ed as lo,Eo as Ne,Fc as ja,Fd as ao,Fo as No,Gb as xa,Hb as Aa,Ib as Bt,If as po,Ik as Xt,Io as ne,Ip as ol,Jc as Oa,Jd as Pt,Jf as bo,Jp as ge,Kd as oo,Kf as go,Ko as pt,Kp as nl,Nd as qe,Ne as Ue,Np as ue,Qd as Ae,R as Ca,Rb as ka,Rc as Ct,Rd as vl,Sa as Pe,Sc as _a,Sd as w,T as Ja,Ta as xe,Ud as no,Vd as io,Vl as Ro,Wb as zt,Wd as Kt,Wn as al,Xi as uo,Yb as ya,Yh as Io,Yi as ll,Za as fl,Zb as Ta,Zc as jt,_c as Ll,_e as mt,a as Y,ad as Ka,af as Dl,b as Qe,bb as Xa,be as pe,bf as so,c as Ei,d as Li,dg as wi,ee as ro,f as _e,fe as qt,fi as tl,g as yl,h as Ye,i as Sa,ie as $t,ig as el,im as Go,j as Tl,jc as El,kd as qa,lc as Ma,ld as $a,li as wl,m as ve,mb as wt,mc as fa,n as vi,oo as Vo,p as Dt,po as be,qh as Zo,r as R,rc as Ea,rd as eo,sc as La,sd as to,se as Jt,to as ho,ub as Qa,uo as Fe,vb as Ht,vc as va,ve as co,wc as Da,x as Ba,yb as Ya,yd as Ot,yf as mo}from"/static/chunk-RFJTZKD6.js";import"/static/chunk-XPJ4MQJV.js";import"/static/chunk-KQJ3FYBQ.js";import{F as Ie,Ha as st,J as ha,Kb as Na,Ob as Ua,Z as vt,a as k,aa as Fa,na as St}from"/static/chunk-3UDJFOQH.js";import"/static/chunk-HHT4SG7V.js";import"/static/chunk-K7LQKAJG.js";import"/static/chunk-QQTK3LZH.js";import"/static/chunk-IJQNM355.js";import"/static/chunk-4CN6THWS.js";import"/static/chunk-272RTCFX.js";import"/static/chunk-2ROB4QWU.js";import"/static/chunk-ALT2ZZSO.js";import"/static/chunk-UE6SLBBN.js";import"/static/chunk-GINZUAUY.js";import"/static/chunk-SQELCOUW.js";import"/static/chunk-IGYUTZ65.js";import"/static/chunk-YM6UBNGD.js";import"/static/chunk-C6TQ5FFZ.js";import"/static/chunk-GXGA523B.js";import"/static/chunk-N4MMWRNK.js";import"/static/chunk-NRLAI7OY.js";import"/static/chunk-LVVHNICT.js";import"/static/chunk-2AXSSSSX.js";import"/static/chunk-DGXQI7RB.js";import"/static/chunk-HUCRWDLX.js";import"/static/chunk-RFEQG3YN.js";import"/static/chunk-PUISI233.js";import{b as fi,d as i,e as c,g as s,j as m}from"/static/chunk-SJXEOBQC.js";var Ui=fi(Xe=>{"use strict";c();m();s();var hi=Xe&&Xe.__spreadArray||function(e,t){for(var l=0,a=t.length,o=e.length;l<a;l++,o++)e[o]=t[l];return e};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.persistentReducers=Xe.persistReducer=Xe.localStoragePlugin=void 0;var Ra=Y(),ft;try{ft=window.localStorage,xl="__storage_test__",ft.setItem(xl,xl),ft.removeItem(xl)}catch{ft=void 0}var xl,kr=function(e){var t,l,a;e===void 0&&(e={});var o=(t=e.prefix)!==null&&t!==void 0?t:"",n=(l=e.separator)!==null&&l!==void 0?l:".",r=(a=e.storageEngine)!==null&&a!==void 0?a:ft;return{name:"localStorage",events:{afterPlugin:function(){Ra.setPluginContext("localStorage",{storageCache:{},storageEngine:r,prefix:o,separator:n})},afterLogic:function(d,b){for(var g,u=0,G=Object.entries(d.reducerOptions);u<G.length;u++){var V=G[u],W=V[0],p=V[1];p?.persist&&Ni((g={},g[W]={},g))(d)}}}}};Xe.localStoragePlugin=kr;function Fi(e){return function(t){var l,a,o,n,r,d,b,g,u,G,V,W=e,p=Ra.getPluginContext("localStorage"),U=p.storageCache,Z=p.storageEngine,J=p.prefix,S=p.separator,D=((l=t.reducerOptions[W])===null||l===void 0?void 0:l.prefix)||J,z=((a=t.reducerOptions[W])===null||a===void 0?void 0:a.separator)||S,f=((o=t.reducerOptions[W])===null||o===void 0?void 0:o.storageKey)||hi(hi([],t.path),[e]).join(z),j=""+(D?D+z:"")+f;if(!Z)throw new Error('[KEA] LocalStorage plugin requires a "storageEngine"');if(t.pathString.indexOf("kea.logic.")===0)throw new Error("[KEA] Logic must have a unique path to persist reducers");if((n=(u=t.cache).localStorage)!==null&&n!==void 0||(u.localStorage={}),(r=(G=t.cache).localStorageDefaults)!==null&&r!==void 0||(G.localStorageDefaults={}),(d=(V=t.cache.localStorageDefaults)[e])!==null&&d!==void 0||(V[e]=(b=t.defaults[e])!==null&&b!==void 0?b:null),typeof Z[j]<"u")try{t.defaults[e]=JSON.parse(Z[j])}catch{Z[j]=void 0}else Z[j]=(g=t.defaults[e])!==null&&g!==void 0?g:null;U[j]=t.defaults[e];var me=t.reducers[e];me&&(t.reducers[e]=function(he,Ut){var Oe=me(he,Ut);return U[j]!==Oe&&(U[j]=Oe,Z[j]=JSON.stringify(Oe)),Oe})}}Xe.persistReducer=Fi;function Ni(e){return function(t){var l=typeof e=="function"?e(t):e;Ra.reducers(l)(t);for(var a=0,o=Object.keys(l);a<o.length;a++){var n=o[a];Fi(n)(t)}}}Xe.persistentReducers=Ni});c();m();s();c();m();s();var nZ=i(Y());var Ti=i(Li());c();m();s();var M=i(Y());c();m();s();var jl=i(Y()),rl=i(k());function Yo(e=!0){let{isDarkModeOn:t,customCss:l}=(0,jl.useValues)(Ue),{sceneConfig:a}=(0,jl.useValues)(ue),o="ph-custom-theme-styles";(0,rl.useEffect)(()=>{let n=document.getElementById(o);if(n&&document.head.removeChild(n),document.body.setAttribute("theme",t?"dark":"light"),l){let r=document.createElement("style");r.id=o,r.appendChild(document.createTextNode(l)),document.head.appendChild(r)}},[t,l]),(0,rl.useEffect)(()=>{e&&document.body.classList.add("overflow-hidden")},[e]),(0,rl.useEffect)(()=>{try{let n=document.documentElement,r=getComputedStyle(n),d=a?.projectBased?r.getPropertyValue("--surface-secondary"):r.getPropertyValue("--bg-bridge");document.head.querySelector('meta[name="theme-color"]')?.remove(),document.head.insertAdjacentHTML("beforeend",`<meta name="theme-color" content="${d}">`)}catch(n){console.warn("Failed to set theme-color meta tag. This could indicate the variables no longer exist",n),vt(new Error("Failed to set theme-color meta tag"),{extra:{error:n}})}},[t,a?.projectBased])}c();m();s();var Ao={"404":()=>({default:nl["404"].component}),"4xx":()=>({default:nl["4xx"].component}),ProjectUnavailable:()=>({default:nl.ProjectUnavailable.component}),...Fo,Dashboards:()=>import("/static/Dashboards-BBN4T3H7.js"),Dashboard:()=>import("/static/Dashboard-HYEW57AP.js"),Insight:()=>import("/static/InsightScene-HZXNUYQJ.js"),WebAnalytics:()=>import("/static/WebAnalyticsScene-6LT3UP4J.js"),WebAnalyticsWebVitals:()=>import("/static/WebAnalyticsScene-6LT3UP4J.js"),Cohort:()=>import("/static/Cohort-N5QL7CCM.js"),DataManagement:()=>import("/static/DataManagementScene-L6S5CQB3.js"),Activity:()=>import("/static/ActivityScene-TFLWJI7T.js"),EventDefinition:()=>import("/static/DefinitionView-DKVIXOI5.js"),EventDefinitionEdit:()=>import("/static/DefinitionEdit-YSP3II45.js"),PropertyDefinition:()=>import("/static/DefinitionView-DKVIXOI5.js"),PropertyDefinitionEdit:()=>import("/static/DefinitionEdit-YSP3II45.js"),Replay:()=>import("/static/SessionRecordings-RMO5KEI4.js"),ReplaySingle:()=>import("/static/SessionRecordingDetail-VJ7YU7DX.js"),ReplayPlaylist:()=>import("/static/SessionRecordingsPlaylistScene-BDF6JSTZ.js"),ReplayFilePlayback:()=>import("/static/SessionRecordingFilePlaybackScene-LDUZ6KV2.js"),PersonsManagement:()=>import("/static/PersonsManagementScene-RFRW4VHO.js"),Person:()=>import("/static/PersonScene-2HO3NRHX.js"),PipelineNodeNew:()=>import("/static/PipelineNodeNew-P5SYV7K4.js"),Pipeline:()=>import("/static/Pipeline-2TTWWPBG.js"),PipelineNode:()=>import("/static/PipelineNode-6FCBP3CG.js"),Group:()=>import("/static/Group-O4S35CGP.js"),Action:()=>import("/static/Action-EM4DQZAY.js"),Experiments:()=>import("/static/Experiments-VRQ6XWMW.js"),ExperimentsSharedMetrics:()=>import("/static/SharedMetrics-VVAIRBJC.js"),ExperimentsSharedMetric:()=>import("/static/SharedMetric-UTSMDI4B.js"),Experiment:()=>import("/static/Experiment-HBGJJFNU.js"),FeatureFlags:()=>import("/static/FeatureFlags-K3CMYBOE.js"),FeatureManagement:()=>import("/static/FeatureManagement-D7ONZ73D.js"),FeatureFlag:()=>import("/static/FeatureFlag-6UWNTHRY.js"),ErrorTracking:()=>import("/static/ErrorTrackingScene-7LDOMJEO.js"),ErrorTrackingConfiguration:()=>import("/static/ErrorTrackingConfigurationScene-SU54LBXL.js"),ErrorTrackingAlert:()=>import("/static/ErrorTrackingAlert-TDPZTJ6P.js"),ErrorTrackingIssue:()=>import("/static/ErrorTrackingIssueScene-5PCMBBOO.js"),Surveys:()=>import("/static/Surveys-4AWP2OKT.js"),Survey:()=>import("/static/Survey-T6NA3R7T.js"),CustomCss:()=>import("/static/CustomCssScene-BKE2KKZY.js"),SurveyTemplates:()=>import("/static/SurveyTemplates-ZB3OCQBO.js"),DataWarehouse:()=>import("/static/DataWarehouseExternalScene-SYD7ECID.js"),SQLEditor:()=>import("/static/EditorScene-X7FTOVIO.js"),DataWarehouseTable:()=>import("/static/NewSourceWizard-3VVMQWQA.js"),DataWarehouseExternal:()=>import("/static/DataWarehouseExternalScene-SYD7ECID.js"),DataWarehouseRedirect:()=>import("/static/DataWarehouseRedirectScene-D4UHXGZF.js"),OrganizationCreate:()=>import("/static/Create-HA53GNHT.js"),OrganizationCreationConfirm:()=>import("/static/ConfirmOrganization-HIAKJFQO.js"),ProjectHomepage:()=>import("/static/ProjectHomepage-TYDW4STT.js"),Max:()=>import("/static/Max-JGOUTDDB.js"),ProjectCreate:()=>import("/static/Create-BY3EKGRC.js"),SystemStatus:()=>import("/static/SystemStatus-SNAVBU32.js"),ToolbarLaunch:()=>import("/static/ToolbarLaunch-5XL5VVZI.js"),Site:()=>import("/static/Site-KP3IOXMT.js"),AsyncMigrations:()=>import("/static/AsyncMigrations-P5X562NE.js"),DeadLetterQueue:()=>import("/static/DeadLetterQueue-XRM7YS6L.js"),PreflightCheck:()=>import("/static/PreflightCheck-YZMGL4RD.js"),Signup:()=>import("/static/SignupContainer-TREQXVJC.js"),InviteSignup:()=>import("/static/InviteSignup-UEXO74O5.js"),Billing:()=>import("/static/Billing-XOVXHEZY.js"),BillingSection:()=>import("/static/BillingSection-CQHPXPGO.js"),BillingAuthorizationStatus:()=>import("/static/AuthorizationStatus-VGRXO3MB.js"),Login:()=>import("/static/Login-3FWDP6AZ.js"),Login2FA:()=>import("/static/Login2FA-WN7PLT7C.js"),SavedInsights:()=>import("/static/SavedInsights-BRGDEWCV.js"),PasswordReset:()=>import("/static/PasswordReset-3AMINWD2.js"),PasswordResetComplete:()=>import("/static/PasswordResetComplete-RU5BHXY4.js"),Unsubscribe:()=>import("/static/Unsubscribe-AUU3V3IR.js"),IntegrationsRedirect:()=>import("/static/IntegrationsRedirect-MHQAJBZG.js"),DebugQuery:()=>import("/static/DebugScene-E3O6XFHL.js"),DebugHog:()=>import("/static/HogRepl-VDHTH7YB.js"),VerifyEmail:()=>import("/static/VerifyEmail-SPHQ2FT3.js"),Notebooks:()=>import("/static/NotebooksScene-AIHKHC26.js"),Notebook:()=>import("/static/NotebookScene-PYTOWQDH.js"),Canvas:()=>import("/static/NotebookCanvasScene-5SUMHBDC.js"),Products:()=>import("/static/Products-ZJSWNTJ6.js"),Onboarding:()=>import("/static/Onboarding-N4JAYMZM.js"),Settings:()=>import("/static/SettingsScene-VO6MRK5I.js"),MoveToPostHogCloud:()=>import("/static/MoveToPostHogCloud-WT6WOWEL.js"),Heatmaps:()=>import("/static/HeatmapsScene-QEMO6BVC.js"),SessionAttributionExplorer:()=>import("/static/SessionAttributionExplorerScene-Z4RBYBZD.js")};c();m();s();var ua=i(Ye()),Yl=i(Y());c();m();s();var ko=i(Ye()),bt=i(Y()),yo=i(_e());var dl=i(k());var gt=i(R());function To(){let{billingAlert:e}=(0,bt.useValues)(wl),{reportBillingAlertShown:t,reportBillingAlertActionClicked:l}=(0,bt.useActions)(wl),{currentLocation:a}=(0,bt.useValues)(yo.router),{sceneConfig:o}=(0,bt.useValues)(ue),[n,r]=(0,dl.useState)(!1);if((0,dl.useEffect)(()=>{e?.pathName&&a.pathname!==e?.pathName?r(!0):r(!1),e&&t(e)},[e,a]),!e||n)return null;let d=e.action||e.contactSupport||a.pathname!==I.organizationBilling(),b=o?.layout&&["app-raw","app-raw-no-header"].includes(o.layout),g=e.action?e.action:e.contactSupport?{to:"mailto:sales@posthog.com",children:e.buttonCTA||"Contact support",onClick:()=>l(e)}:{to:I.organizationBilling(),children:"Manage billing",onClick:()=>l(e)};return(0,gt.jsx)("div",{className:(0,ko.default)("my-4",b&&"mx-4"),children:(0,gt.jsxs)(Kt,{type:e.status,action:d?g:void 0,onClose:e.status!=="error"?()=>r(!0):e.onClose?()=>e.onClose?.():void 0,dismissKey:e.dismissKey,children:[(0,gt.jsx)("b",{children:e.title}),(0,gt.jsx)("br",{}),e.message]})})}c();m();s();var Wl=i(Y());var Zl=i(k());c();m();s();var Oo=i(Y());c();m();s();var Re=i(Y()),fo=i(yl());var ke=(0,Re.kea)([(0,Re.path)(["lib","components","CommandBar","actionBarLogic"]),(0,Re.connect)({actions:[ge,["hideCommandBar","setCommandBar","clearInitialQuery"],zl,["showPalette","hidePalette","setInput","executeResult","backFlow","onArrowUp","onArrowDown"],ol,["reportCommandBarActionSearch","reportCommandBarActionResultExecuted"]],values:[ge,["initialQuery","barStatus"],zl,["input","activeResultIndex","commandRegistrations","commandSearchResults","commandSearchResultsGrouped","activeFlow"]]}),(0,Re.listeners)(({actions:e})=>({hidePalette:()=>{e.hideCommandBar()},setInput:({input:t})=>{e.reportCommandBarActionSearch(t)},executeResult:({result:t})=>{e.reportCommandBarActionResultExecuted(t.display)}})),(0,fo.subscriptions)(({values:e,actions:t})=>({barStatus:(l,a)=>{l!=="show_actions"||a==="show_actions"||e.initialQuery!==null&&(t.setInput(e.initialQuery),t.clearInitialQuery())}})),(0,Re.afterMount)(({actions:e,values:t,cache:l})=>{e.showPalette(),l.onKeyDown=a=>{if(a.key==="Enter"&&t.commandSearchResults.length){let o=t.commandSearchResults[t.activeResultIndex];!!o.executor&&e.executeResult(o)}else a.key==="ArrowDown"?(a.preventDefault(),e.onArrowDown(t.commandSearchResults.length-1)):a.key==="ArrowUp"?(a.preventDefault(),e.onArrowUp()):a.key==="Escape"&&a.repeat===!1?(a.preventDefault(),t.activeFlow?e.backFlow():t.input?e.setInput(""):e.hidePalette()):a.key==="Backspace"&&t.input.length===0&&a.repeat===!1&&e.setCommandBar("show_search")},window.addEventListener("keydown",l.onKeyDown)}),(0,Re.beforeUnmount)(({actions:e,cache:t})=>{e.hidePalette(),window.removeEventListener("keydown",t.onKeyDown)})]);c();m();s();var cl=i(Y());var De=i(R()),Hi=({activeFlow:e})=>e?(0,De.jsx)(e.icon,{className:"palette__icon"})??(0,De.jsx)(wa,{className:"palette__icon"}):(0,De.jsx)(Ca,{className:"palette__icon"}),Eo=()=>{let{input:e,activeFlow:t}=(0,cl.useValues)(ke),{setInput:l}=(0,cl.useActions)(ke);return(0,De.jsx)("div",{className:"border-b",children:(0,De.jsx)($t,{"data-attr":"action-bar-input",className:"CommandBar__input",fullWidth:!0,prefix:(0,De.jsx)(Hi,{activeFlow:t}),suffix:(0,De.jsx)(pe,{escape:!0}),placeholder:t?.instruction??`Run a command\u2026 or press ${Na()?"Delete":"Backspace"} for search`,autoFocus:!0,value:e,onChange:l})})};c();m();s();var zo=i(Y());c();m();s();c();m();s();var Ol={global:"Global",insights:"Insights"};var Lo={all:"All",event_data:"Event data",posthog:"PostHog"},Qt=(Z=>(Z.All="all",Z.Action="action",Z.Cohort="cohort",Z.Dashboard="dashboard",Z.EventDefinition="event_definition",Z.Experiment="experiment",Z.FeatureFlag="feature_flag",Z.Insight="insight",Z.Notebook="notebook",Z.Person="person",Z.Group0="group_0",Z.Group1="group_1",Z.Group2="group_2",Z.Group3="group_3",Z.Group4="group_4",Z.Survey="survey",Z))(Qt||{}),_l=["person","group_0","group_1","group_2","group_3","group_4"],Wt={all:"All",action:"Actions",cohort:"Cohorts",dashboard:"Dashboards",event_definition:"Events",experiment:"Experiments",feature_flag:"Feature flags",insight:"Insights",notebook:"Notebooks",person:"Persons",group_0:null,group_1:null,group_2:null,group_3:null,group_4:null,survey:"Surveys"};var vo=e=>e in Ol?Ol[e]:e;c();m();s();var Do=i(Ye()),wo=i(Y()),sl=i(k());var we=i(R()),Ho=({result:e,focused:t})=>{let{executeResult:l}=(0,wo.useActions)(ke),a=(0,sl.useRef)(null),o=!!e.executor;return(0,sl.useEffect)(()=>{t&&a.current?.scrollIntoView()},[t]),(0,we.jsx)("div",{className:(0,Do.default)("border-l-4",t?"border-accent-primary":o?null:"border-transparent"),children:(0,we.jsxs)("div",{className:`flex items-center w-full px-2 hover:bg-surface-secondary ${t?"bg-surface-secondary":"bg-surface-primary"} border-b cursor-pointer`,onClick:()=>{o&&l(e)},ref:a,children:[(0,we.jsxs)("div",{className:"px-2 py-3 w-full space-y-0.5 flex items-center",children:[(0,we.jsx)(e.icon,{className:"text-muted-3000"}),(0,we.jsx)("span",{className:"ml-2 text-text-3000 font-bold",children:e.display})]}),t&&(0,we.jsx)("div",{className:"shrink-0 text-primary-3000",children:"Run command"})]})})};var ye=i(R()),zi=({scope:e,results:t,activeResultIndex:l})=>(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)("div",{className:"border-b px-5 pt-1 pb-1 bg-primary text-xs font-bold text-secondary uppercase",children:vo(e)}),t.map(a=>(0,ye.jsx)(Ho,{result:a,focused:a.index===l},`command_result_${a.index}`))]}),jo=()=>{let{commandSearchResultsGrouped:e,activeResultIndex:t}=(0,zo.useValues)(ke);return(0,ye.jsx)("div",{className:"grow overscroll-none overflow-y-auto",children:e.map(([l,a])=>(0,ye.jsx)(zi,{scope:l,results:a,activeResultIndex:t},l))})};var Yt=i(R()),_o=()=>{let{activeFlow:e}=(0,Oo.useValues)(ke);return(0,Yt.jsxs)("div",{className:"flex flex-col h-full",children:[(!e||e.instruction)&&(0,Yt.jsx)(Eo,{}),(0,Yt.jsx)(jo,{})]})};c();m();s();var pn=i(Y()),bn=i(k());c();m();s();var te=i(Y()),Po=i(fl()),Ko=i(_e()),qo=i(yl());var et=300;function $o(e){return e.length/(e.length+2)}function ji(e,t){let l=$o(t);return e.map(a=>({type:"person",result_id:a.distinct_ids[0],extra_fields:{...a},rank:l}))}function xt(e,t){let l=$o(t);return e.map(a=>({type:"group",result_id:a.group_key,extra_fields:{...a},rank:l}))}var _=(0,te.kea)([(0,te.path)(["lib","components","CommandBar","searchBarLogic"]),(0,te.connect)({values:[ge,["initialQuery","barStatus"],el,["groupTypes","aggregationLabel"]],actions:[ge,["hideCommandBar","setCommandBar","clearInitialQuery"],ol,["reportCommandBarSearch","reportCommandBarSearchResultOpened"]]}),(0,te.actions)({search:!0,setSearchQuery:e=>({query:e}),setActiveTab:e=>({tab:e}),onArrowUp:(e,t)=>({activeIndex:e,maxIndex:t}),onArrowDown:(e,t)=>({activeIndex:e,maxIndex:t}),openResult:e=>({index:e}),setActiveResultIndex:e=>({index:e})}),(0,Po.loaders)(({values:e,actions:t})=>({rawSearchResponse:[null,{loadSearchResponse:async(l,a)=>{await a(et),t.reportCommandBarSearch(e.searchQuery.length);let o;return e.activeTab!=="all"&&_l.includes(e.activeTab)?null:(_l.includes(e.activeTab)?o=e.rawSearchResponse:e.activeTab==="all"?o=await ne.search.list({q:e.searchQuery}):o=await ne.search.list({q:e.searchQuery,entities:[e.activeTab.toLowerCase()]}),a(),o)}}],rawPersonsResponse:[null,{loadPersonsResponse:async(l,a)=>{if(await a(et),e.activeTab!=="all"&&e.activeTab!=="person")return null;let o=await ne.persons.list({search:e.searchQuery});return a(),o}}],rawGroup0Response:[null,{loadGroup0Response:async(l,a)=>{if(await a(et),e.activeTab!=="all"&&e.activeTab!=="group_0")return null;let o=await ne.groups.list({group_type_index:0,search:e.searchQuery});return a(),o}}],rawGroup1Response:[null,{loadGroup1Response:async(l,a)=>{if(await a(et),e.activeTab!=="all"&&e.activeTab!=="group_1")return null;let o=await ne.groups.list({group_type_index:1,search:e.searchQuery});return a(),o}}],rawGroup2Response:[null,{loadGroup2Response:async(l,a)=>{if(await a(et),e.activeTab!=="all"&&e.activeTab!=="group_2")return null;let o=await ne.groups.list({group_type_index:2,search:e.searchQuery});return a(),o}}],rawGroup3Response:[null,{loadGroup3Response:async(l,a)=>{if(await a(et),e.activeTab!=="all"&&e.activeTab!=="group_3")return null;let o=await ne.groups.list({group_type_index:3,search:e.searchQuery});return a(),o}}],rawGroup4Response:[null,{loadGroup4Response:async(l,a)=>{if(await a(et),e.activeTab!=="all"&&e.activeTab!=="group_4")return null;let o=await ne.groups.list({group_type_index:4,search:e.searchQuery});return a(),o}}]})),(0,te.reducers)({searchQuery:["",{setSearchQuery:(e,{query:t})=>t}],rawSearchResponse:[null,{search:()=>null}],rawPersonsResponse:[null,{search:()=>null}],rawGroup0Response:[null,{search:()=>null}],rawGroup1Response:[null,{search:()=>null}],rawGroup2Response:[null,{search:()=>null}],rawGroup3Response:[null,{search:()=>null}],rawGroup4Response:[null,{search:()=>null}],activeResultIndex:[0,{setSearchQuery:()=>0,setActiveTab:()=>0,openResult:()=>0,onArrowUp:(e,{activeIndex:t,maxIndex:l})=>t>0?t-1:l,onArrowDown:(e,{activeIndex:t,maxIndex:l})=>t<l?t+1:0,setActiveResultIndex:(e,{index:t})=>t}],activeTab:["all",{setActiveTab:(e,{tab:t})=>t}]}),(0,te.selectors)({combinedSearchResults:[e=>[e.rawSearchResponse,e.rawPersonsResponse,e.rawGroup0Response,e.rawGroup1Response,e.rawGroup2Response,e.rawGroup3Response,e.rawGroup4Response,e.searchQuery],(e,t,l,a,o,n,r,d)=>!e&&!t&&!l&&!a&&!o&&!n&&!r?null:[...e?e.results:[],...t?ji(t.results,d):[],...l?xt(l.results,d):[],...a?xt(a.results,d):[],...o?xt(o.results,d):[],...n?xt(n.results,d):[],...r?xt(r.results,d):[]].sort((b,g)=>b.rank&&g.rank?b.rank-g.rank:1)],combinedSearchLoading:[e=>[e.rawSearchResponseLoading,e.rawPersonsResponseLoading,e.rawGroup0ResponseLoading,e.rawGroup1ResponseLoading,e.rawGroup2ResponseLoading,e.rawGroup3ResponseLoading,e.rawGroup4ResponseLoading],(e,t,l,a,o,n,r)=>e||t||l||a||o||n||r],tabsForGroups:[e=>[e.groupTypes],e=>Array.from(e.values()).map(({group_type_index:t})=>`group_${t}`)],tabsGrouped:[e=>[e.tabsForGroups],e=>({all:["all"],event_data:["event_definition","action","person","cohort",...e],posthog:["insight","dashboard","notebook","experiment","feature_flag","survey"]})],tabs:[e=>[e.tabsGrouped],e=>Object.values(e).reduce((t,l)=>t.concat(l),[])],tabsCount:[e=>[e.tabsCountMemoized],e=>e[0]],tabsCountMemoized:[e=>[e.rawSearchResponse,e.rawPersonsResponse,e.rawGroup0Response,e.rawGroup1Response,e.rawGroup2Response,e.rawGroup3Response,e.rawGroup4Response,e.searchQuery],(e,t,l,a,o,n,r,d)=>{let b={};return Object.values(Qt).forEach(u=>{b[u]=e?.counts[u]?.toString()||null}),[["person",t?.results],["group_0",l?.results],["group_1",a?.results],["group_2",o?.results],["group_3",n?.results],["group_4",r?.results]].forEach(([u,G])=>{G!==void 0&&(b[u]=G.length===100?"100+":G.length.toString())}),[b,d]},{resultEqualityCheck:(e,t)=>{let[l,a]=e,[o,n]=t;if(a!==n)return!1;let r=Object.values(l).filter(b=>b===null).length;return Object.values(o).filter(b=>b===null).length===r}}],tabsLoading:[e=>[e.rawSearchResponseLoading,e.rawPersonsResponseLoading,e.activeTab],(e,t,l)=>{let a=[];return e&&(l==="all"?a.push(...Object.values(Qt).filter(o=>!["all","person"].includes(o))):a.push(l)),t&&a.push("person"),a}],maxIndex:[e=>[e.combinedSearchResults],e=>e?e.length-1:0]}),(0,te.listeners)(({values:e,actions:t})=>({setSearchQuery:t.search,setActiveTab:t.search,search:l=>{t.loadSearchResponse(l),t.loadPersonsResponse(l),t.loadGroup0Response(l),t.loadGroup1Response(l),t.loadGroup2Response(l),t.loadGroup3Response(l),t.loadGroup4Response(l)},openResult:({index:l})=>{let a=e.combinedSearchResults[l];Ko.router.actions.push(Pl(a)),t.hideCommandBar(),t.reportCommandBarSearchResultOpened(a.type)}})),(0,qo.subscriptions)(({values:e,actions:t})=>({barStatus:(l,a)=>{l!=="show_search"||a==="show_search"||(e.initialQuery!==null?(t.setSearchQuery(e.initialQuery),t.clearInitialQuery()):(t.setSearchQuery(""),t.clearInitialQuery()))}})),(0,te.afterMount)(({actions:e,values:t,cache:l})=>{l.onKeyDown=a=>{if(a.key==="Enter")a.preventDefault(),e.openResult(t.activeResultIndex);else if(a.key==="ArrowDown")a.preventDefault(),e.onArrowDown(t.activeResultIndex,t.maxIndex);else if(a.key==="ArrowUp")a.preventDefault(),e.onArrowUp(t.activeResultIndex,t.maxIndex);else if(a.key==="Escape"&&a.repeat===!1)e.hideCommandBar();else if(a.key===">"){let{value:o,selectionStart:n,selectionEnd:r}=a.target;(t.searchQuery.length===0||n!==null&&r!==null&&(o.substring(0,n)+o.substring(r)).length===0)&&(a.preventDefault(),e.setCommandBar("show_actions"))}else if(a.key==="Tab"){a.preventDefault();let o=t.tabs.findIndex(n=>n===t.activeTab);if(a.shiftKey){let n=o===0?t.tabs.length-1:o-1;e.setActiveTab(t.tabs[n])}else{let n=o===t.tabs.length-1?0:o+1;e.setActiveTab(t.tabs[n])}}},window.addEventListener("keydown",l.onKeyDown)}),(0,te.beforeUnmount)(({cache:e})=>{window.removeEventListener("keydown",e.onKeyDown)})]),Pl=e=>{switch(e.type){case"action":return I.action(e.result_id);case"cohort":return I.cohort(e.result_id);case"dashboard":return I.dashboard(e.result_id);case"event_definition":return I.eventDefinition(e.result_id);case"experiment":return I.experiment(e.result_id);case"feature_flag":return I.featureFlag(e.result_id);case"group":return I.group(e.extra_fields.group_type_index,e.result_id);case"insight":return I.insightView(e.result_id);case"notebook":return I.notebook(e.result_id);case"person":return I.personByDistinctId(e.result_id);case"survey":return I.survey(e.result_id);default:throw new Error(`No action for type '${e?.type}' defined.`)}};c();m();s();var At=i(Y()),en=i(k());var ml=i(R()),tn=(0,en.forwardRef)(function(t,l){let{currentTeam:a}=(0,At.useValues)(pt),{searchQuery:o}=(0,At.useValues)(_),{setSearchQuery:n}=(0,At.useActions)(_),r=`Search ${a?"the "+a.name:"this"} project\u2026 or enter > for commands`;return(0,ml.jsx)("div",{className:"border-b",children:(0,ml.jsx)($t,{"data-attr":"search-bar-input",inputRef:l,type:"search",className:"CommandBar__input",fullWidth:!0,suffix:(0,ml.jsx)(pe,{escape:!0}),placeholder:r,autoFocus:!0,value:o,onChange:n})})});c();m();s();var rn=i(Y());c();m();s();var ln=i(Ye()),Zt=i(Y());var pl=i(k());var L=i(R()),an=({result:e,resultIndex:t,focused:l})=>{let{aggregationLabel:a}=(0,Zt.useValues)(_),{setActiveResultIndex:o,openResult:n}=(0,Zt.useActions)(_),{mobileLayout:r}=(0,Zt.useValues)(ee),{hideNavOnMobile:d}=(0,Zt.useActions)(ee),b=(0,pl.useRef)(null);return(0,pl.useLayoutEffect)(()=>{l&&(b.current?.scrollIntoViewIfNeeded?b.current.scrollIntoViewIfNeeded(!1):b.current?.scrollIntoView({block:"nearest"}))},[l]),(0,L.jsx)(L.Fragment,{children:(0,L.jsx)("div",{className:(0,ln.default)("w-full px-2 hover:bg-primary border-l-4 border-b cursor-pointer",l?"bg-surface-secondary border-l-accent-primary":"bg-surface-primary"),onClick:()=>{r&&d(),n(t)},onMouseOver:()=>{o(t)},ref:b,children:(0,L.jsxs)("div",{className:"px-2 py-3 w-full space-y-0.5 flex flex-col items-start",children:[(0,L.jsx)("span",{className:"text-muted-3000 text-xs",children:e.type!=="group"?Wt[e.type]:`${st(a(e.extra_fields.group_type_index).plural)}`}),(0,L.jsx)("span",{className:"text-text-3000 font-bold",children:(0,L.jsx)(Kl,{result:e})})]})})})},bl=()=>(0,L.jsxs)("div",{className:"px-5 py-4 w-full space-y-1.5 flex flex-col items-start bg-surface-primary border-b",children:[(0,L.jsx)(Jt,{className:"w-16 opacity-75 h-3"}),(0,L.jsx)(Jt,{className:"w-40 h-3.5"})]}),Kl=({result:e})=>{let t=Ro(),{type:l,extra_fields:a}=e;if(l==="insight"){let o=Go(a);return a.name?(0,L.jsx)("span",{children:a.name}):(0,L.jsx)("i",{children:t(o)})}else{if(l==="feature_flag")return(0,L.jsx)("span",{children:a.key});if(l==="notebook")return(0,L.jsx)("span",{children:a.title});if(l==="group")return(0,L.jsx)("span",{children:Wo(a.group_key,a.group_properties)})}return(0,L.jsx)("span",{children:a.name})},on=({result:e})=>{let{result_id:t,type:l,extra_fields:a}=e;return l==="feature_flag"?a.name&&a.name!==a.key?(0,L.jsx)("span",{children:a.name}):(0,L.jsx)("i",{children:"No description."}):l==="notebook"?(0,L.jsx)(Uo,{shortId:t,mode:"notebook",editable:!1,initialContent:a.content}):"description"in a?(0,L.jsx)("span",{children:a.description}):(0,L.jsx)("i",{children:"No description."})};c();m();s();var gl=i(Y());var ie=i(R()),nn=()=>{let{activeResultIndex:e,combinedSearchResults:t}=(0,gl.useValues)(_),{openResult:l}=(0,gl.useActions)(_);if(!t||t.length===0)return null;let a=t[e];return(0,ie.jsx)("div",{className:"border bg-surface-primary rounded p-4 md:p-6",children:(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("div",{children:Wt[a.type]}),(0,ie.jsx)("div",{className:"text-text-3000 font-bold text-lg",children:(0,ie.jsx)(Kl,{result:a})}),(0,ie.jsxs)("span",{className:"text-[var(--trace-3000)] text-xs break-all",children:[location.host,(0,ie.jsx)("span",{className:"text-muted-3000",children:Pl(a)})]}),(0,ie.jsx)("div",{className:"mt-2 text-secondary",children:(0,ie.jsx)(on,{result:a})})]}),(0,ie.jsx)("div",{className:"grid grid-cols-[auto_1fr] items-center gap-2",children:(0,ie.jsxs)(w,{type:"secondary",size:"small",onClick:()=>{l(e)},"aria-label":"Open search result",children:[(0,ie.jsx)("span",{className:"mr-1",children:"Open"})," ",(0,ie.jsx)(pe,{enter:!0})]})})]})})};var P=i(R()),dn=()=>{let{combinedSearchResults:e,combinedSearchLoading:t,activeResultIndex:l}=(0,rn.useValues)(_);return(0,P.jsx)(P.Fragment,{children:!t&&e?.length===0?(0,P.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-3 text-center",children:[(0,P.jsx)("h3",{className:"mb-0 text-xl",children:"No results"}),(0,P.jsx)("p",{className:"opacity-75 mb-0",children:"This doesn't happen often, but we're stumped!"}),(0,P.jsx)(Zo,{height:150,width:150})]}):(0,P.jsxs)("div",{className:"md:grid md:grid-cols-[320px_1fr] overflow-y-auto overflow-x-hidden",children:[(0,P.jsxs)("div",{className:"border-r border-b md:border-b-0 bg-primary overscroll-contain overflow-y-auto overflow-x-hidden",children:[t&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(bl,{}),(0,P.jsx)(bl,{}),(0,P.jsx)(bl,{})]}),!t&&e?.map((a,o)=>(0,P.jsx)(an,{result:a,resultIndex:o,focused:o===l},`${a.type}_${a.result_id}`))]}),(0,P.jsx)("div",{className:"p-2 grow hidden md:block overflow-auto",children:(0,P.jsx)(nn,{})})]})})};c();m();s();var sn=i(Y());c();m();s();var kt=i(Y());var tt=i(R()),cn=({tab:e,inputRef:t})=>{let{activeTab:l,aggregationLabel:a}=(0,kt.useValues)(_),{setActiveTab:o}=(0,kt.useActions)(_);return(0,tt.jsxs)("div",{className:`SearchBarTab flex items-center px-4 py-2 cursor-pointer text-xs whitespace-nowrap border-l-2 ${e===l?"SearchBarTab__active font-bold border-accent-primary":"border-transparent"} ${e==="all"?"h-9":""}`,onClick:()=>{o(e),t.current?.focus()},children:[Wt[e]||`${st(a(Number(e.split("_")[1])).plural)}`,(0,tt.jsx)(Oi,{tab:e})]})},Oi=({tab:e})=>{let{activeTab:t,tabsCount:l,tabsLoading:a}=(0,kt.useValues)(_),o=a.length>0;return o&&e==="all"&&t==="all"?(0,tt.jsx)(Ae,{className:"ml-0.5"}):a.includes(e)&&t!=="all"?(0,tt.jsx)(Ae,{className:"ml-0.5"}):!o&&l[e]!=null?(0,tt.jsx)("span",{className:"ml-1 text-xxs text-tertiary",children:l[e]}):null};var It=i(R()),mn=({inputRef:e})=>{let{tabsGrouped:t}=(0,sn.useValues)(_);return(0,It.jsx)("div",{className:"flex flex-col border-r bg-surface-primary overflow-y-auto",children:Object.entries(t).map(([l,a])=>(0,It.jsxs)("div",{className:l!=="all"?"pt-1.5":"",children:[l!=="all"&&(0,It.jsx)("span",{className:"ml-4 text-xxs text-secondary uppercase",children:Lo[l]}),a.map(o=>(0,It.jsx)(cn,{tab:o,inputRef:e},o))]},l))})};var lt=i(R()),gn=()=>{(0,pn.useMountedLogic)(_);let e=(0,bn.useRef)(null);return(0,lt.jsxs)("div",{className:"grid grid-cols-[8.5rem_1fr] lg:grid-cols-[12.5rem_1fr] h-full",children:[(0,lt.jsx)(mn,{inputRef:e}),(0,lt.jsxs)("div",{className:"grid grid-rows-[49px_calc(40rem-49px)] overflow-hidden overscroll-contain",children:[(0,lt.jsx)(tn,{ref:e}),(0,lt.jsx)(dn,{})]})]})};c();m();s();var Zn=i(Y());c();m();s();var Se=i(Y());var Wn=(0,Se.kea)([(0,Se.path)(["lib","components","CommandBar","shortcutsLogic"]),(0,Se.connect)({actions:[ge,["hideCommandBar"]]}),(0,Se.afterMount)(({actions:e,cache:t})=>{t.onKeyDown=l=>{l.key==="Escape"&&e.hideCommandBar()},window.addEventListener("keydown",t.onKeyDown)}),(0,Se.beforeUnmount)(({cache:e})=>{window.removeEventListener("keydown",e.onKeyDown)})]);var Be=i(R()),In=()=>((0,Zn.useMountedLogic)(Wn),(0,Be.jsxs)("div",{className:"flex flex-col h-full p-5",children:[(0,Be.jsx)("h3",{children:"Keyboard shortcuts"}),(0,Be.jsx)("h4",{children:"Site-wide shortcuts"}),(0,Be.jsxs)("div",{className:"space-y-1",children:[(0,Be.jsxs)("div",{children:[(0,Be.jsx)(pe,{command:!0,k:!0})," Open search"]}),(0,Be.jsxs)("div",{children:[(0,Be.jsx)(pe,{command:!0,shift:!0,k:!0})," Open command palette"]})]})]}));var Te=i(R()),_i=(0,Zl.forwardRef)(function({barStatus:t,children:l},a){return(0,Te.jsx)("div",{className:"CommandBar__overlay fixed",children:(0,Te.jsx)("div",{className:"CommandBar__overlay-content",children:(0,Te.jsx)("div",{"data-attr":"command-bar",className:`w-full ${t==="show_search"&&"h-full"} w-full bg-primary rounded overflow-hidden border border-border-bold`,ref:a,children:l})})})});function un(){let e=(0,Zl.useRef)(null),{barStatus:t}=(0,Wl.useValues)(ge),{hideCommandBar:l}=(0,Wl.useActions)(ge);return oo([e],l,[]),t==="hidden"?null:(0,Te.jsxs)(_i,{barStatus:t,ref:e,children:[t==="show_search"&&(0,Te.jsx)(gn,{}),t==="show_actions"&&(0,Te.jsx)(_o,{}),t==="show_shortcuts"&&(0,Te.jsx)(In,{})]})}c();m();s();var Rn=i(Ye()),Ce=i(Y());var yt=i(k());var v=i(R());function Pi({datetime:e,callback:t}){let[l,a]=(0,yt.useState)((0,St.default)()),o=St.default.duration(e.diff(l)),n=o.seconds()<0,r=n?"Expired":o.hours()>0?o.format("HH:mm:ss"):o.format("mm:ss");return(0,yt.useEffect)(()=>{let d=setInterval(()=>a((0,St.default)()),1e3);return()=>clearInterval(d)},[]),(0,yt.useEffect)(()=>{n&&t?.()},[n]),(0,v.jsx)(v.Fragment,{children:r})}function Gn(){let{projectNoticeVariant:e}=(0,Ce.useValues)(be),{currentOrganization:t}=(0,Ce.useValues)(mt),{logout:l,loadUser:a}=(0,Ce.useActions)(Ne),{user:o,userLoading:n}=(0,Ce.useValues)(Ne),{closeProjectNotice:r}=(0,Ce.useActions)(be),{showInviteModal:d}=(0,Ce.useActions)(so),{requestVerificationLink:b}=(0,Ce.useActions)(Qo),{sceneConfig:g}=(0,Ce.useValues)(ue);if(!e)return null;let u=t?.teams?.find(p=>!p.is_demo&&!p.ingested_event),V={demo_project:{message:(0,v.jsxs)(v.Fragment,{children:["This is a demo project with dummy data.",u&&(0,v.jsxs)(v.Fragment,{children:[" ","When you're ready, head on over to the"," ",(0,v.jsx)(xe,{to:I.project(u.id,I.products()),"data-attr":"demo-project-alt-team-ingestion_link",children:"onboarding wizard"})," ","to get started with your own data."]})]})},real_project_with_no_events:{message:(0,v.jsxs)(v.Fragment,{children:["This project has no events yet. Go to the"," ",(0,v.jsx)(xe,{to:I.onboarding("product_analytics","install"),"data-attr":"real_project_with_no_events-ingestion_link",children:"onboarding wizard"})," ","or grab your project\xA0API\xA0key/HTML\xA0snippet from"," ",(0,v.jsx)(xe,{to:I.settings(),"data-attr":"real_project_with_no_events-settings",children:"Project Settings"})," ","to get things moving"]}),action:{to:I.onboarding("product_analytics","install"),"data-attr":"demo-warning-cta",icon:(0,v.jsx)(zt,{}),children:"Go to wizard"},closeable:!0},invite_teammates:{message:"Get more out of PostHog by\xA0inviting your team for\xA0free",action:{"data-attr":"invite-warning-cta",onClick:d,icon:(0,v.jsx)(_a,{}),children:"Invite team members"},closeable:!0},unverified_email:{message:"Please verify your email address.",action:{"data-attr":"unverified-email-cta",onClick:()=>o&&b(o.uuid),children:"Send verification email"},type:"warning"},is_impersonated:{message:(0,v.jsxs)(v.Fragment,{children:["You are currently logged in as a customer."," ",o?.is_impersonated_until&&(0,v.jsxs)(v.Fragment,{children:["Expires in ",(0,v.jsx)(Pi,{datetime:(0,St.default)(o.is_impersonated_until),callback:a}),n?(0,v.jsx)(Ae,{}):(0,v.jsx)(xe,{className:"ml-2",onClick:()=>a(),children:"Refresh"})]})]}),type:"warning",action:{"data-attr":"stop-impersonation-cta",onClick:()=>l(),children:"Log out"}},internet_connection_issue:{message:"PostHog is having trouble connecting to the server. Please check your connection.",type:"warning",action:{"data-attr":"reload-page",onClick:()=>window.location.reload(),children:"Reload page"}}}[e],W=g?.layout&&["app-raw","app-raw-no-header"].includes(g.layout);return(0,v.jsx)(Kt,{type:V.type||"info",className:(0,Rn.default)("my-4",W&&"mx-4"),action:V.action,onClose:V.closeable?()=>r(e):void 0,children:V.message})}c();m();s();var at=i(Y());var ce=i(R());function Vn(){let{user:e}=(0,at.useValues)(Ne),{currentTeam:t}=(0,at.useValues)(pt),{currentOrganization:l}=(0,at.useValues)(mt),{isAccountPopoverOpen:a,isProjectSwitcherShown:o}=(0,at.useValues)(be),{closeAccountPopover:n,toggleAccountPopover:r,toggleProjectSwitcher:d,hideProjectSwitcher:b}=(0,at.useActions)(be);return(0,ce.jsxs)("nav",{className:"flex items-center justify-between gap-2 p-2 border-b",children:[(0,ce.jsx)("span",{className:"flex-1",children:(0,ce.jsx)(w,{noPadding:!0,icon:(0,ce.jsx)(Ma,{className:"text-3xl"}),to:I.projectHomepage()})}),l?.teams?.length??!1?(0,ce.jsx)(qe,{overlay:(0,ce.jsx)(ho,{onClickInside:b}),visible:o,onClickOutside:b,placement:"bottom",children:(0,ce.jsx)(w,{type:"tertiary",icon:(0,ce.jsx)(uo,{name:t?.name}),onClick:d,children:t?.name??"Current project"})}):null,(0,ce.jsx)(qe,{overlay:(0,ce.jsx)(il,{}),visible:a,onClickOutside:n,placement:"bottom",children:(0,ce.jsx)(w,{type:"tertiary",icon:(0,ce.jsx)(ll,{user:e,size:"md"}),onClick:r,children:e?.first_name||e?.email})})]})}c();m();s();var ql=i(Ye()),Rt=i(Y());var Cn=i(k());c();m();s();var He=i(Y());c();m();s();var Sn=i(Y());var Tt=i(k());c();m();s();var Un=i(Ye()),ut=i(Y());var ul=i(k());c();m();s();var hn=i(Y());var Il=i(k());var K=i(R()),Ki=[{identifier:"DataManagement",description:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("b",{children:"Annotations"})," have moved here!",(0,K.jsx)("br",{}),"You can now find them in ",(0,K.jsx)("b",{children:"Data Management"})]}),placement:"bottom-end",flagSuffix:"annotations-2023-10-30"},{identifier:"PersonsManagement",description:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("b",{children:"Cohorts"})," have moved here!",(0,K.jsx)("br",{}),"You can now find them in ",(0,K.jsx)("b",{children:"People"})]}),placement:"top-end",flagSuffix:"cohorts-2023-10-30"}];function Fn({notices:e,onAcknowledged:t}){return(0,K.jsxs)("div",{className:"flex items-center gap-1",onClick:t,children:[(0,K.jsx)("div",{className:"flex-1",children:e.map((l,a)=>(0,K.jsxs)(Il.Fragment,{children:[l.description,a<e.length-1&&(0,K.jsx)(ro,{})]},a))}),(0,K.jsx)(w,{size:"small",onClick:t,icon:(0,K.jsx)(_t,{})})]})}function Nn({identifier:e}){let{featureFlags:t}=(0,hn.useValues)(ve),[l,a]=(0,Il.useState)(!1),o=Ki.filter(r=>r.identifier===e).filter(r=>t[`sidebar-notice-${r.flagSuffix}`]);return[l?[]:o,()=>{o.forEach(r=>{Qe.capture("sidebar notice acknowledged",{change:r.flagSuffix,$set:{[`sidebar_notice/${r.flagSuffix}`]:!0}}),a(!0)})}]}var Ge=i(R()),Ve=ul.default.forwardRef(({identifier:e,shortTitle:t,title:l,forceTooltipOnHover:a,tag:o,onClick:n,sideAction:r,...d},b)=>{let{activeScene:g}=(0,ut.useValues)(ue),{sceneBreadcrumbKeys:u}=(0,ut.useValues)(Fe),{hideNavOnMobile:G}=(0,ut.useActions)(ee),{isNavCollapsed:V}=(0,ut.useValues)(ee),W=Io("POSTHOG_3000_NAV"),[p,U]=(0,ul.useState)(!1),Z=g===e||u.includes(e),J=V||W,S=d;W||(S.active=Z);let D;J?S.sideIcon=null:(D=t||l,o&&(D=(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("span",{className:"grow",children:D}),(0,Ge.jsx)(qt,{type:o==="alpha"?"completion":o==="beta"?"warning":"success",size:"small",className:"ml-2",children:o.toUpperCase()})]})),r&&(S.sideAction={...r,divider:!0,"data-attr":`menu-item-${r.identifier.toLowerCase()}`},S.sideIcon=null));let z=(0,Ge.jsx)(w,{ref:b,"data-attr":`menu-item-${e.toString().toLowerCase()}`,onMouseEnter:()=>U(!1),onClick:me=>{S.to&&G(),U(!0),n?.(me)},className:(0,Un.default)("NavbarButton",W&&Z&&"NavbarButton--here"),fullWidth:!0,type:"secondary",status:"alt",...S,children:D}),[f,j]=Nn({identifier:e});return(0,Ge.jsx)("li",{className:"w-full",children:f.length?(0,Ge.jsx)(Pe,{title:(0,Ge.jsx)(Fn,{notices:f,onAcknowledged:j}),placement:f[0].placement??"right",delayMs:0,visible:!0,children:z}):(0,Ge.jsx)(Pe,{title:a||J?Z?`${l} (you are here)`:l:null,placement:"right",delayMs:0,visible:p?!1:void 0,children:z})})});Ve.displayName="NavbarButton";var x=i(R());function Bn(){let[e,t]=(0,Tt.useState)(),[l,a]=(0,Tt.useState)(!1),{isNavCollapsed:o}=(0,Sn.useValues)(ee);return(0,Tt.useEffect)(()=>{let n=document.getElementById("bottom-notice"),r=document.getElementById("bottom-notice-revision")?.textContent,d=document.getElementById("bottom-notice-branch")?.textContent;return n&&r&&d&&(t({branch:d||"unknown",revision:r||"unknown"}),n.remove()),()=>{}},[]),!e||l?null:o?(0,x.jsx)(Ve,{identifier:"debug-notice",icon:(0,x.jsx)(Ml,{className:"text-accent-primary"}),title:(0,x.jsxs)("div",{className:"font-mono",children:[(0,x.jsx)("div",{children:(0,x.jsx)("strong",{children:"DEBUG mode!"})}),(0,x.jsxs)("div",{children:["Branch: ",(0,x.jsx)("b",{children:e.branch})]}),(0,x.jsxs)("div",{children:["Revision: ",(0,x.jsx)("b",{children:e.revision})]}),(0,x.jsx)("div",{className:"italic",children:"Click to hide"})]}),onClick:()=>a(!0)}):(0,x.jsxs)("div",{className:"border rounded bg-primary overflow-hidden mb-1.5 w-full font-mono max-w-60 text-[13px]",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2 px-2 h-8 border-l-4 border-brand-blue justify-between",children:[(0,x.jsx)("b",{children:"DEBUG mode"}),(0,x.jsx)(w,{icon:(0,x.jsx)(_t,{}),tooltip:"Dismiss",tooltipPlacement:"right",size:"small",noPadding:!0,onClick:()=>a(!0)})]}),(0,x.jsx)(Pe,{title:"Branch",placement:"right",children:(0,x.jsxs)("div",{className:"flex items-center gap-2 w-fit px-2 h-8 border-l-4 border-brand-red truncate max-w-full",children:[(0,x.jsx)(Ml,{className:"text-lg"}),(0,x.jsx)("span",{className:"min-w-0 flex-1 truncate font-bold",children:e.branch})]})}),(0,x.jsx)(Pe,{title:"Revision",placement:"right",children:(0,x.jsxs)("div",{className:"flex items-center gap-2 w-fit px-2 h-8 border-l-4 border-brand-yellow",children:[(0,x.jsx)(Ya,{className:"text-lg"}),(0,x.jsx)("span",{className:"min-w-0 flex-1 truncate font-bold",children:e.revision})]})}),window.location.port!=="8010"&&(0,x.jsx)(Pe,{title:(0,x.jsxs)(x.Fragment,{children:["You're currently using the app over port 8000,",(0,x.jsx)("br",{}),"which only serves the web app, without capture (/e/).",(0,x.jsx)("br",{}),"Use port 8010 for full PostHog, proxied via Caddy."]}),placement:"right",children:(0,x.jsxs)("div",{className:"flex items-center gap-2 w-fit px-2 h-8 border-l-4 border-brand-key",children:[(0,x.jsx)(Ke,{className:"text-lg"}),(0,x.jsx)(xe,{to:window.location.href.replace(`:${window.location.port}`,":8010"),className:"font-semibold text-default underline min-w-0 flex-1 truncate",children:"Click here to fix port!"})]})})]})}var E=i(R());function Rl(){let{user:e}=(0,He.useValues)(Ne),{isAccountPopoverOpen:t,systemStatusHealthy:l}=(0,He.useValues)(be),{closeAccountPopover:a,toggleAccountPopover:o}=(0,He.useActions)(be),{toggleSearchBar:n}=(0,He.useActions)(ge),{openSidePanel:r}=(0,He.useActions)(Dt),{visibleTabs:d}=(0,He.useValues)(Co);return(0,E.jsx)("div",{className:"Navbar3000__bottom",children:(0,E.jsxs)("ul",{children:[(0,E.jsx)(Bn,{}),d.includes("activation")&&(0,E.jsx)(Ve,{identifier:"activation-button",icon:(0,E.jsx)(So,{}),title:"Quick start",onClick:()=>r("activation")}),(0,E.jsx)(Ve,{identifier:"search-button",icon:(0,E.jsx)(Pa,{}),shortTitle:"Search",title:(0,E.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,E.jsxs)("span",{children:["For search, press ",(0,E.jsx)(pe,{command:!0,k:!0})]}),(0,E.jsxs)("span",{children:["For commands, press ",(0,E.jsx)(pe,{command:!0,shift:!0,k:!0})]})]}),forceTooltipOnHover:!0,sideIcon:(0,E.jsx)(pe,{command:!0,k:!0}),onClick:n}),(0,E.jsx)(Ve,{icon:(0,E.jsx)(to,{}),identifier:"ToolbarLaunch",title:"Toolbar",to:I.toolbarLaunch()}),(0,E.jsx)(Ve,{icon:(0,E.jsx)(zt,{}),identifier:"Settings",title:"Settings",to:I.settings("project")}),l?null:(0,E.jsx)(Ve,{icon:(0,E.jsx)(Ke,{}),identifier:"SystemStatus",title:"System issue!",to:I.instanceStatus()}),(0,E.jsx)(qe,{overlay:(0,E.jsx)(il,{}),visible:t,onClickOutside:a,placement:"right-end",className:"min-w-70",children:(0,E.jsx)(Ve,{icon:(0,E.jsx)(ll,{user:e,size:"md"}),identifier:"me",title:`Hi${e?.first_name?`, ${e?.first_name}`:""}!`,shortTitle:e?.first_name||e?.email,onClick:o})})]})})}var We=i(R());function Jn(){let{theme:e}=(0,Rt.useValues)(Ue),{isNavShown:t,isSidebarShown:l,activeNavbarItemId:a,navbarItems:o,mobileLayout:n}=(0,Rt.useValues)(ee),{toggleNavCollapsed:r,hideNavOnMobile:d,showSidebar:b,hideSidebar:g}=(0,Rt.useActions)(ee),{featureFlags:u}=(0,Rt.useValues)(ve),G=(0,Cn.useRef)(null);return(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("nav",{className:(0,ql.default)("Navbar3000",!t&&"Navbar3000--hidden"),ref:G,children:[(0,We.jsxs)("div",{className:"Navbar3000__content",style:e?.sidebarStyle,children:[(0,We.jsx)(Pt,{innerClassName:"Navbar3000__top",direction:"vertical",children:o.map((V,W)=>(0,We.jsx)("ul",{children:V.map(p=>p.featureFlag&&!u[p.featureFlag]?null:(0,We.jsx)(Ve,{title:p.label,identifier:p.identifier,icon:p.icon,sideAction:p.sideAction,tag:p.tag,to:"to"in p?p.to:void 0,onClick:()=>{"logic"in p&&(a===p.identifier&&!l?g():b(p.identifier)),p.onClick?.()},active:a===p.identifier&&l},p.identifier))},W))}),(0,We.jsx)(Rl,{})]}),!n&&(0,We.jsx)(al,{logicKey:"navbar",placement:"right",containerRef:G,closeThreshold:100,onToggleClosed:V=>r(V),onDoubleClick:()=>r()})]}),n&&(0,We.jsx)("div",{className:(0,ql.default)("Navbar3000__overlay",!t&&"Navbar3000--hidden"),onClick:()=>d()})]})}c();m();s();var Wa=i(Ye()),rt=i(Y()),pi=i(_e());c();m();s();c();m();s();var Ze=i(k(),1);c();m();s();var Me=i(k(),1),Xn=i(R(),1);function Gt(e,t=[]){let l=[];function a(n,r){let d=Me.createContext(r),b=l.length;l=[...l,r];let g=G=>{let{scope:V,children:W,...p}=G,U=V?.[e]?.[b]||d,Z=Me.useMemo(()=>p,Object.values(p));return(0,Xn.jsx)(U.Provider,{value:Z,children:W})};g.displayName=n+"Provider";function u(G,V){let W=V?.[e]?.[b]||d,p=Me.useContext(W);if(p)return p;if(r!==void 0)return r;throw new Error(`\`${G}\` must be used within \`${n}\``)}return[g,u]}let o=()=>{let n=l.map(r=>Me.createContext(r));return function(d){let b=d?.[e]||n;return Me.useMemo(()=>({[`__scope${e}`]:{...d,[e]:b}}),[d,b])}};return o.scopeName=e,[a,$i(o,...t)]}function $i(...e){let t=e[0];if(e.length===1)return t;let l=()=>{let a=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(n){let r=a.reduce((d,{useScope:b,scopeName:g})=>{let G=b(n)[`__scope${g}`];return{...d,...G}},{});return Me.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return l.scopeName=t.scopeName,l}c();m();s();var ze=i(k(),1);c();m();s();var Yn=i(k(),1);function Qn(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function $l(...e){return t=>{let l=!1,a=e.map(o=>{let n=Qn(o,t);return!l&&typeof n=="function"&&(l=!0),n});if(l)return()=>{for(let o=0;o<a.length;o++){let n=a[o];typeof n=="function"?n():Qn(e[o],null)}}}}function fe(...e){return Yn.useCallback($l(...e),e)}c();m();s();var le=i(k(),1);var Vt=i(R(),1),ht=le.forwardRef((e,t)=>{let{children:l,...a}=e,o=le.Children.toArray(l),n=o.find(tr);if(n){let r=n.props.children,d=o.map(b=>b===n?le.Children.count(r)>1?le.Children.only(null):le.isValidElement(r)?r.props.children:null:b);return(0,Vt.jsx)(ea,{...a,ref:t,children:le.isValidElement(r)?le.cloneElement(r,void 0,d):null})}return(0,Vt.jsx)(ea,{...a,ref:t,children:l})});ht.displayName="Slot";var ea=le.forwardRef((e,t)=>{let{children:l,...a}=e;if(le.isValidElement(l)){let o=ar(l);return le.cloneElement(l,{...lr(a,l.props),ref:t?$l(t,o):o})}return le.Children.count(l)>1?le.Children.only(null):null});ea.displayName="SlotClone";var er=({children:e})=>(0,Vt.jsx)(Vt.Fragment,{children:e});function tr(e){return le.isValidElement(e)&&e.type===er}function lr(e,t){let l={...t};for(let a in t){let o=e[a],n=t[a];/^on[A-Z]/.test(a)?o&&n?l[a]=(...d)=>{n(...d),o(...d)}:o&&(l[a]=o):a==="style"?l[a]={...o,...n}:a==="className"&&(l[a]=[o,n].filter(Boolean).join(" "))}return{...e,...l}}function ar(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=t&&"isReactWarning"in t&&t.isReactWarning;return l?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=t&&"isReactWarning"in t&&t.isReactWarning,l?e.props.ref:e.props.ref||e.ref)}var Gl=i(R(),1);function xn(e){let t=e+"CollectionProvider",[l,a]=Gt(t),[o,n]=l(t,{collectionRef:{current:null},itemMap:new Map}),r=W=>{let{scope:p,children:U}=W,Z=ze.default.useRef(null),J=ze.default.useRef(new Map).current;return(0,Gl.jsx)(o,{scope:p,itemMap:J,collectionRef:Z,children:U})};r.displayName=t;let d=e+"CollectionSlot",b=ze.default.forwardRef((W,p)=>{let{scope:U,children:Z}=W,J=n(d,U),S=fe(p,J.collectionRef);return(0,Gl.jsx)(ht,{ref:S,children:Z})});b.displayName=d;let g=e+"CollectionItemSlot",u="data-radix-collection-item",G=ze.default.forwardRef((W,p)=>{let{scope:U,children:Z,...J}=W,S=ze.default.useRef(null),D=fe(p,S),z=n(g,U);return ze.default.useEffect(()=>(z.itemMap.set(S,{ref:S,...J}),()=>void z.itemMap.delete(S))),(0,Gl.jsx)(ht,{[u]:"",ref:D,children:Z})});G.displayName=g;function V(W){let p=n(e+"CollectionConsumer",W);return ze.default.useCallback(()=>{let Z=p.collectionRef.current;if(!Z)return[];let J=Array.from(Z.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((z,f)=>J.indexOf(z.ref.current)-J.indexOf(f.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:r,Slot:b,ItemSlot:G},V,a]}c();m();s();function Vl(e,t,{checkForDefaultPrevented:l=!0}={}){return function(o){if(e?.(o),l===!1||!o.defaultPrevented)return t?.(o)}}c();m();s();var je=i(k(),1);c();m();s();var Ft=i(k(),1);function ta(e){let t=Ft.useRef(e);return Ft.useEffect(()=>{t.current=e}),Ft.useMemo(()=>(...l)=>t.current?.(...l),[])}function Mt({prop:e,defaultProp:t,onChange:l=()=>{}}){let[a,o]=or({defaultProp:t,onChange:l}),n=e!==void 0,r=n?e:a,d=ta(l),b=je.useCallback(g=>{if(n){let G=typeof g=="function"?g(e):g;G!==e&&d(G)}else o(g)},[n,e,o,d]);return[r,b]}function or({defaultProp:e,onChange:t}){let l=je.useState(e),[a]=l,o=je.useRef(a),n=ta(t);return je.useEffect(()=>{o.current!==a&&(n(a),o.current=a)},[a,o,n]),l}c();m();s();var An=i(k(),1),nr=i(Ei(),1);var kn=i(R(),1),ir=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ot=ir.reduce((e,t)=>{let l=An.forwardRef((a,o)=>{let{asChild:n,...r}=a,d=n?ht:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,kn.jsx)(d,{...r,ref:o})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{});c();m();s();var ae=i(k(),1);c();m();s();var yn=i(k(),1),nt=globalThis?.document?yn.useLayoutEffect:()=>{};c();m();s();var se=i(k(),1);var Tn=i(k(),1);function rr(e,t){return Tn.useReducer((l,a)=>t[l][a]??l,e)}var la=e=>{let{present:t,children:l}=e,a=dr(t),o=typeof l=="function"?l({present:a.isPresent}):se.Children.only(l),n=fe(a.ref,cr(o));return typeof l=="function"||a.isPresent?se.cloneElement(o,{ref:n}):null};la.displayName="Presence";function dr(e){let[t,l]=se.useState(),a=se.useRef({}),o=se.useRef(e),n=se.useRef("none"),r=e?"mounted":"unmounted",[d,b]=rr(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return se.useEffect(()=>{let g=hl(a.current);n.current=d==="mounted"?g:"none"},[d]),nt(()=>{let g=a.current,u=o.current;if(u!==e){let V=n.current,W=hl(g);e?b("MOUNT"):W==="none"||g?.display==="none"?b("UNMOUNT"):b(u&&V!==W?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,b]),nt(()=>{if(t){let g,u=t.ownerDocument.defaultView??window,G=W=>{let U=hl(a.current).includes(W.animationName);if(W.target===t&&U&&(b("ANIMATION_END"),!o.current)){let Z=t.style.animationFillMode;t.style.animationFillMode="forwards",g=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=Z)})}},V=W=>{W.target===t&&(n.current=hl(a.current))};return t.addEventListener("animationstart",V),t.addEventListener("animationcancel",G),t.addEventListener("animationend",G),()=>{u.clearTimeout(g),t.removeEventListener("animationstart",V),t.removeEventListener("animationcancel",G),t.removeEventListener("animationend",G)}}else b("ANIMATION_END")},[t,b]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:se.useCallback(g=>{g&&(a.current=getComputedStyle(g)),l(g)},[])}}function hl(e){return e?.animationName||"none"}function cr(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=t&&"isReactWarning"in t&&t.isReactWarning;return l?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=t&&"isReactWarning"in t&&t.isReactWarning,l?e.props.ref:e.props.ref||e.ref)}c();m();s();var Fl=i(k(),1);var sr=Fl.useId||(()=>{}),mr=0;function Nl(e){let[t,l]=Fl.useState(sr());return nt(()=>{e||l(a=>a??String(mr++))},[e]),e||(t?`radix-${t}`:"")}var it=i(R(),1),aa="Collapsible",[pr,oa]=Gt(aa),[br,na]=pr(aa),Mn=ae.forwardRef((e,t)=>{let{__scopeCollapsible:l,open:a,defaultOpen:o,disabled:n,onOpenChange:r,...d}=e,[b=!1,g]=Mt({prop:a,defaultProp:o,onChange:r});return(0,it.jsx)(br,{scope:l,disabled:n,contentId:Nl(),open:b,onOpenToggle:ae.useCallback(()=>g(u=>!u),[g]),children:(0,it.jsx)(ot.div,{"data-state":ra(b),"data-disabled":n?"":void 0,...d,ref:t})})});Mn.displayName=aa;var fn="CollapsibleTrigger",En=ae.forwardRef((e,t)=>{let{__scopeCollapsible:l,...a}=e,o=na(fn,l);return(0,it.jsx)(ot.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":ra(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...a,ref:t,onClick:Vl(e.onClick,o.onOpenToggle)})});En.displayName=fn;var ia="CollapsibleContent",Ln=ae.forwardRef((e,t)=>{let{forceMount:l,...a}=e,o=na(ia,e.__scopeCollapsible);return(0,it.jsx)(la,{present:l||o.open,children:({present:n})=>(0,it.jsx)(gr,{...a,ref:t,present:n})})});Ln.displayName=ia;var gr=ae.forwardRef((e,t)=>{let{__scopeCollapsible:l,present:a,children:o,...n}=e,r=na(ia,l),[d,b]=ae.useState(a),g=ae.useRef(null),u=fe(t,g),G=ae.useRef(0),V=G.current,W=ae.useRef(0),p=W.current,U=r.open||d,Z=ae.useRef(U),J=ae.useRef(void 0);return ae.useEffect(()=>{let S=requestAnimationFrame(()=>Z.current=!1);return()=>cancelAnimationFrame(S)},[]),nt(()=>{let S=g.current;if(S){J.current=J.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";let D=S.getBoundingClientRect();G.current=D.height,W.current=D.width,Z.current||(S.style.transitionDuration=J.current.transitionDuration,S.style.animationName=J.current.animationName),b(a)}},[r.open,a]),(0,it.jsx)(ot.div,{"data-state":ra(r.open),"data-disabled":r.disabled?"":void 0,id:r.contentId,hidden:!U,...n,ref:u,style:{"--radix-collapsible-content-height":V?`${V}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:U&&o})});function ra(e){return e?"open":"closed"}var vn=Mn,Dn=En,wn=Ln;c();m();s();var Ul=i(k(),1),Zr=i(R(),1),Ir=Ul.createContext(void 0);function Hn(e){let t=Ul.useContext(Ir);return e||t||"ltr"}var q=i(R(),1),Ee="Accordion",ur=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ca,Rr,Gr]=xn(Ee),[Bl,Z0]=Gt(Ee,[Gr,oa]),sa=oa(),zn=Ze.default.forwardRef((e,t)=>{let{type:l,...a}=e,o=a,n=a;return(0,q.jsx)(ca.Provider,{scope:e.__scopeAccordion,children:l==="multiple"?(0,q.jsx)(Nr,{...n,ref:t}):(0,q.jsx)(Fr,{...o,ref:t})})});zn.displayName=Ee;var[jn,Vr]=Bl(Ee),[On,hr]=Bl(Ee,{collapsible:!1}),Fr=Ze.default.forwardRef((e,t)=>{let{value:l,defaultValue:a,onValueChange:o=()=>{},collapsible:n=!1,...r}=e,[d,b]=Mt({prop:l,defaultProp:a,onChange:o});return(0,q.jsx)(jn,{scope:e.__scopeAccordion,value:d?[d]:[],onItemOpen:b,onItemClose:Ze.default.useCallback(()=>n&&b(""),[n,b]),children:(0,q.jsx)(On,{scope:e.__scopeAccordion,collapsible:n,children:(0,q.jsx)(_n,{...r,ref:t})})})}),Nr=Ze.default.forwardRef((e,t)=>{let{value:l,defaultValue:a,onValueChange:o=()=>{},...n}=e,[r=[],d]=Mt({prop:l,defaultProp:a,onChange:o}),b=Ze.default.useCallback(u=>d((G=[])=>[...G,u]),[d]),g=Ze.default.useCallback(u=>d((G=[])=>G.filter(V=>V!==u)),[d]);return(0,q.jsx)(jn,{scope:e.__scopeAccordion,value:r,onItemOpen:b,onItemClose:g,children:(0,q.jsx)(On,{scope:e.__scopeAccordion,collapsible:!0,children:(0,q.jsx)(_n,{...n,ref:t})})})}),[Ur,Cl]=Bl(Ee),_n=Ze.default.forwardRef((e,t)=>{let{__scopeAccordion:l,disabled:a,dir:o,orientation:n="vertical",...r}=e,d=Ze.default.useRef(null),b=fe(d,t),g=Rr(l),G=Hn(o)==="ltr",V=Vl(e.onKeyDown,W=>{if(!ur.includes(W.key))return;let p=W.target,U=g().filter(he=>!he.ref.current?.disabled),Z=U.findIndex(he=>he.ref.current===p),J=U.length;if(Z===-1)return;W.preventDefault();let S=Z,D=0,z=J-1,f=()=>{S=Z+1,S>z&&(S=D)},j=()=>{S=Z-1,S<D&&(S=z)};switch(W.key){case"Home":S=D;break;case"End":S=z;break;case"ArrowRight":n==="horizontal"&&(G?f():j());break;case"ArrowDown":n==="vertical"&&f();break;case"ArrowLeft":n==="horizontal"&&(G?j():f());break;case"ArrowUp":n==="vertical"&&j();break}let me=S%J;U[me].ref.current?.focus()});return(0,q.jsx)(Ur,{scope:l,disabled:a,direction:o,orientation:n,children:(0,q.jsx)(ca.Slot,{scope:l,children:(0,q.jsx)(ot.div,{...r,"data-orientation":n,ref:b,onKeyDown:a?void 0:V})})})}),Sl="AccordionItem",[Sr,ma]=Bl(Sl),Pn=Ze.default.forwardRef((e,t)=>{let{__scopeAccordion:l,value:a,...o}=e,n=Cl(Sl,l),r=Vr(Sl,l),d=sa(l),b=Nl(),g=a&&r.value.includes(a)||!1,u=n.disabled||e.disabled;return(0,q.jsx)(Sr,{scope:l,open:g,disabled:u,triggerId:b,children:(0,q.jsx)(vn,{"data-orientation":n.orientation,"data-state":ti(g),...d,...o,ref:t,disabled:u,open:g,onOpenChange:G=>{G?r.onItemOpen(a):r.onItemClose(a)}})})});Pn.displayName=Sl;var Kn="AccordionHeader",Br=Ze.default.forwardRef((e,t)=>{let{__scopeAccordion:l,...a}=e,o=Cl(Ee,l),n=ma(Kn,l);return(0,q.jsx)(ot.h3,{"data-orientation":o.orientation,"data-state":ti(n.open),"data-disabled":n.disabled?"":void 0,...a,ref:t})});Br.displayName=Kn;var da="AccordionTrigger",qn=Ze.default.forwardRef((e,t)=>{let{__scopeAccordion:l,...a}=e,o=Cl(Ee,l),n=ma(da,l),r=hr(da,l),d=sa(l);return(0,q.jsx)(ca.ItemSlot,{scope:l,children:(0,q.jsx)(Dn,{"aria-disabled":n.open&&!r.collapsible||void 0,"data-orientation":o.orientation,id:n.triggerId,...d,...a,ref:t})})});qn.displayName=da;var $n="AccordionContent",ei=Ze.default.forwardRef((e,t)=>{let{__scopeAccordion:l,...a}=e,o=Cl(Ee,l),n=ma($n,l),r=sa(l);return(0,q.jsx)(wn,{role:"region","aria-labelledby":n.triggerId,"data-orientation":o.orientation,...r,...a,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});ei.displayName=$n;function ti(e){return e?"open":"closed"}var li=zn,ai=Pn;var oi=qn,ni=ei;var re=i(k());var oe=i(R()),pa=(0,re.forwardRef)(({className:e,data:t,selectedId:l,focusedId:a,handleClick:o,renderItem:n,expandedItemIds:r,setExpandedItemIds:d,defaultNodeIcon:b,showFolderActiveState:g,right:u},G)=>{let V="size-6 aspect-square flex place-items-center";t instanceof Array||(t=[t]);function W(p,U){return p.children?(0,oe.jsx)("span",{className:V,children:(0,oe.jsx)(Ht,{className:$e("transition-transform scale-75 stroke-2",U.includes(p.id)?"rotate-90":"")})}):(0,oe.jsx)("span",{className:$e(V,{"text-secondary":p.disabledReason}),children:p.icon||b||(0,oe.jsx)("div",{className:V})})}return(0,oe.jsx)("ul",{className:$e("list-none m-0 p-0",e),role:"group",children:t.map(p=>(0,oe.jsx)(li,{type:"multiple",value:r,onValueChange:U=>d(U),ref:G,disabled:!!p.disabledReason,children:(0,oe.jsxs)(ai,{value:p.id,className:"flex flex-col w-full",children:[(0,oe.jsx)(oi,{className:"flex items-center gap-2 w-full h-8",asChild:!0,children:(0,oe.jsxs)(w,{className:$e("flex-1 flex items-center gap-2 cursor-pointer pl-0 font-normal"),onClick:()=>o(p),type:l===p.id?"secondary":"tertiary",role:"treeitem",tabIndex:-1,size:"small",fullWidth:!0,active:a===p.id||l===p.id||g&&p.children&&r.includes(p.id),icon:W(p,r),disabledReason:p.disabledReason,tooltipPlacement:"right",children:[(0,oe.jsx)("span",{className:$e("",{"font-semibold":l===p.id,"text-secondary":p.disabledReason}),children:n?n(p,p.name):p.name}),p.right||u?(0,oe.jsx)("span",{className:"ml-auto pl-1",children:p.right||u?.(p)}):null]})}),p.children&&(0,oe.jsx)(ni,{children:(0,oe.jsx)(pa,{data:p.children,selectedId:l,focusedId:a,handleClick:o,expandedItemIds:r,setExpandedItemIds:d,defaultNodeIcon:b,showFolderActiveState:g,right:u,renderItem:n,className:"ml-4 space-y-px"})})]})},p.id))})});pa.displayName="LemonTreeNode";var ba=(0,re.forwardRef)(({data:e,defaultSelectedFolderOrNodeId:t,onFolderClick:l,onNodeClick:a,expandAllFolders:o=!1,defaultNodeIcon:n,className:r,showFolderActiveState:d=!1,contentRef:b,right:g,...u},G)=>{let[W,p]=(0,re.useState)(t),[U,Z]=(0,re.useState)(t),[J,S]=(0,re.useState)(""),D=(0,re.useRef)();function z(C,A){C instanceof Array?C.forEach(Q=>{Q.disabledReason||A.push(Q.id),Q.children&&z(Q.children,A)}):(C.disabledReason||A.push(C.id),C.children&&z(C.children,A))}let[f,j]=(0,re.useState)(()=>{if(o){let Q=[];return z(e,Q),Q}if(!t)return[];let C=[];function A(Q,B){if(Q instanceof Array)for(let O of Q){if(C.push(O.id),A(O,B))return!0;C.pop()}else{if(Q.id===B)return!0;if(Q.children)return A(Q.children,B)}return!1}return A(e,t),C}),me=(0,re.useCallback)(()=>{let C=[],A=Q=>{(Q instanceof Array?Q:[Q]).forEach(O=>{C.push(O),O.children&&f.includes(O.id)&&A(O.children)})};return A(e),C},[e,f]),he=(0,re.useCallback)(()=>{b?.current&&(b.current.focus(),Z(void 0))},[b]),Ut=(C,A,Q=[])=>{for(let B of C){if(B.id===A)return Q;if(B.children){let O=Ut(B.children,A,[...Q,B.id]);if(O.length>0)return O}}return[]},Oe=(0,re.useCallback)(C=>{D.current&&clearTimeout(D.current);let A=J+C.toLowerCase();S(A),D.current=setTimeout(()=>{S("")},500);let Q=me(),B=Q.findIndex(Le=>Le.id===U),ct=[...Q.slice(B+1),...Q.slice(0,B+1)].find(Le=>Le.name.toLowerCase().startsWith(A));if(ct){Z(ct.id);let Le=Ut(Array.isArray(e)?e:[e],ct.id);Le.length>0&&j([...new Set([...f,...Le])])}},[J,U,me,e,f,Ut]),kl=(0,re.useCallback)(C=>{if(Z(C?.id),C?.children?l&&l(C):a&&(p(C?.id),a(C),he()),C?.onClick){let A=C?.children?!f.includes(C.id):void 0;C.onClick(A)}},[f,l,a,he]),Mi=(0,re.useCallback)(C=>{if(C.key.length===1&&!C.ctrlKey&&!C.altKey&&!C.metaKey){Oe(C.key);return}let A=me(),Q=A.findIndex(B=>B.id===U);switch(C.key){case"ArrowRight":{C.preventDefault();let B=A[Q];if(B?.children&&!B.disabledReason)if(!f.includes(B.id))j([...f,B.id]);else{let O=A[Q+1];O&&(Z(O.id),p(void 0))}break}case"ArrowLeft":{C.preventDefault();let B=A[Q];if(B?.children&&f.includes(B.id))j(f.filter(O=>O!==B.id)),Z(B.id);else{let O=(Le,Ga)=>{for(let Et of Le){if(Et.children?.some(Lt=>Lt.id===Ga))return Et;if(Et.children){let Lt=O(Et.children,Ga);if(Lt)return Lt}}return null},ct=O(Array.isArray(e)?e:[e],B.id);ct&&Z(ct.id)}break}case"ArrowDown":{C.preventDefault(),Q===-1?A.length>0&&(Z(A[0].id),p(void 0)):Q<A.length-1&&(Z(A[Q+1].id),p(void 0));break}case"ArrowUp":{C.preventDefault(),Q===-1?A.length>0&&(Z(A[0].id),p(void 0)):Q>0&&(Z(A[Q-1].id),p(void 0));break}case"Home":{C.preventDefault();let B=me();B.length>0&&Z(B[0].id);break}case"End":{C.preventDefault();let B=me();B.length>0&&Z(B[B.length-1].id);break}case"Enter":{C.preventDefault();let B=A[Q];B.disabledReason||(B.children?(kl(B),f.includes(B.id)?j(f.filter(O=>O!==B.id)):j([...f,B.id])):a&&(a(B),p(B.id),B.onClick&&B.onClick(),he()));break}}},[U,f,me,Oe,e,he,kl,a,l]);return(0,oe.jsx)("div",{className:$e("overflow-hidden relative p-2",r),tabIndex:0,role:"tree","aria-label":"Tree navigation",onKeyDown:Mi,onBlur:()=>Z(void 0),children:(0,oe.jsx)(pa,{data:e,ref:G,selectedId:W,focusedId:U,handleClick:kl,expandedItemIds:f,setExpandedItemIds:j,defaultNodeIcon:n,showFolderActiveState:d,right:g,className:"space-y-px",...u})})});ba.displayName="LemonTree";var bi=i(k());c();m();s();var de=i(Y()),ci=i(fl()),si=i(_e());c();m();s();var X=i(R());function ii(e){switch(e){case"aichat":return(0,X.jsx)(fa,{});case"broadcast":return(0,X.jsx)(Ea,{});case"feature_flag":return(0,X.jsx)(eo,{});case"feature":return(0,X.jsx)(ka,{});case"experiment":return(0,X.jsx)($a,{});case"insight":return(0,X.jsx)(ya,{});case"notebook":return(0,X.jsx)(va,{});case"dashboard":return(0,X.jsx)(Aa,{});case"repl":return(0,X.jsx)(qa,{});case"survey":return(0,X.jsx)(La,{});case"sql":return(0,X.jsx)(Ka,{});case"site_app":return(0,X.jsx)(Ct,{});case"destination":return(0,X.jsx)(Ct,{});case"transformation":return(0,X.jsx)(Ct,{});case"source":return(0,X.jsx)(Ct,{});case"folder":return(0,X.jsx)(Ht,{});default:return(0,X.jsx)(wt,{})}}var ri=e=>[{path:"Create new/AI chat",type:"aichat",href:I.max(),flag:Ie.ARTIFICIAL_HOG},{path:"Create new/Dashboard",type:"dashboard",href:I.dashboards()+"#newDashboard=modal"},{path:"Create new/Experiment",type:"experiment",href:I.experiment("new")},{path:"Create new/Feature flag",type:"feature_flag",href:I.featureFlag("new")},{path:"Create new/Feature",type:"feature",href:I.featureManagement("new")},{path:"Create new/Insight/Trends",type:"insight",href:I.insightNew({type:"TRENDS"})},{path:"Create new/Insight/Funnels",type:"insight",href:I.insightNew({type:"FUNNELS"})},{path:"Create new/Insight/Retention",type:"insight",href:I.insightNew({type:"RETENTION"})},{path:"Create new/Insight/User paths",type:"insight",href:I.insightNew({type:"PATHS"})},{path:"Create new/Insight/Stickiness",type:"insight",href:I.insightNew({type:"STICKINESS"})},{path:"Create new/Insight/Lifecycle",type:"insight",href:I.insightNew({type:"LIFECYCLE"})},{path:"Create new/Notebook",type:"notebook",href:I.notebook("new")},{path:"Create new/Broadcast",type:"broadcast",href:I.messagingBroadcasts()},{path:"Create new/Repl",type:"repl",href:I.debugHog()+"#repl=[]&code="},{path:"Create new/Survey",type:"survey",href:I.survey("new")},{path:"Create new/SQL query",type:"sql",href:I.sqlEditor()},{path:"Create new/Data pipeline/Source",type:"source",href:I.pipelineNodeNew("source")},{path:"Create new/Data pipeline/Destination",type:"destination",href:I.pipelineNodeNew("destination")},{path:"Create new/Data pipeline/Transformation",type:"transformation",href:I.pipelineNodeNew("transformation")},{path:"Create new/Data pipeline/Site app",type:"site_app",href:I.pipelineNodeNew("site-app")},{path:"Explore/Data management/Event Definitions",icon:(0,X.jsx)(Bt,{}),href:I.eventDefinitions()},{path:"Explore/Data management/Actions",icon:(0,X.jsx)(Ll,{}),href:I.actions()},{path:"Explore/Data management/Property Definitions",icon:(0,X.jsx)(Bt,{}),href:I.propertyDefinitions()},{path:"Explore/Data management/Annotations",icon:(0,X.jsx)(Da,{}),href:I.annotations()},{path:"Explore/Data management/History",icon:(0,X.jsx)(Bt,{}),href:I.dataManagementHistory()},{path:"Explore/Data management/Revenue",icon:(0,X.jsx)(Ta,{}),href:I.revenue(),flag:Ie.WEB_REVENUE_TRACKING},{path:"Explore/Data management/Ingestion Warnings",icon:(0,X.jsx)(Ke,{}),href:I.ingestionWarnings(),flag:Ie.INGESTION_WARNINGS_ENABLED},{path:"Explore/Data warehouse",icon:(0,X.jsx)(Bt,{}),href:I.dataWarehouse()},{path:"Explore/People and groups/People",icon:(0,X.jsx)(za,{}),href:I.persons()},{path:"Explore/People and groups/Cohorts",icon:(0,X.jsx)(Ha,{}),href:I.cohorts()},...e.map(t=>({...t,path:`Explore/People and groups/${t.path}`})),{path:"Explore/Activity",icon:(0,X.jsx)(El,{}),href:I.activity("explore")},{path:"Explore/Live",icon:(0,X.jsx)(El,{}),href:I.activity("live")},{path:"Explore/LLM ovservability",icon:(0,X.jsx)(Xa,{}),href:I.llmObservabilityDashboard(),flag:Ie.LLM_OBSERVABILITY},{path:"Explore/Web Analytics",icon:(0,X.jsx)(ja,{}),href:I.webAnalytics()},{path:"Explore/Recordings/Recordings",href:I.replay("home"),icon:(0,X.jsx)(jt,{})},{path:"Explore/Recordings/What to watch",href:I.replay("templates"),icon:(0,X.jsx)(jt,{})},{path:"Explore/Recordings/Playlists",href:I.replay("playlists"),icon:(0,X.jsx)(jt,{})},{path:"Explore/Error tracking",icon:(0,X.jsx)(Ke,{}),href:I.errorTracking(),flag:Ie.ERROR_TRACKING},{path:"Explore/Early access features",icon:(0,X.jsx)(Ll,{}),href:I.earlyAccessFeatures()},{path:"Explore/Heatmaps",icon:(0,X.jsx)(xa,{}),href:I.heatmaps(),flag:Ie.HEATMAPS_UI}].sort((t,l)=>t.path.localeCompare(l.path));c();m();s();var di=i(_e());function ga(e){let t=[],l=(o,n,r)=>{let d=o.find(b=>b.record?.path===r);return d||(d={id:"project/"+r,name:n,record:{type:"folder",id:"project/"+r,path:r},children:[]},o.push(d)),d.children||(d.children=[]),d};for(let o of e){let n=o.path.split("/").filter(Boolean),r=n.pop(),d=n.join("/"),b=d?d.split("/").filter(Boolean):[],g=t,u="";for(let V of b)u=u?u+"/"+V:V,g=l(g,V,u).children;if(o.type==="folder"&&g.find(V=>V.record?.path===o.path))continue;let G={id:"project/"+(o.id||o.path),name:r,icon:o.icon||ii(o.type),record:o,onClick:()=>{o.href&&di.router.actions.push(o.href)}};g.push(G)}let a=o=>{o.sort((n,r)=>n.name.localeCompare(r.name));for(let n of o)n.children&&a(n.children)};return a(t),t}var Jl=i(R()),Xl=(0,de.kea)([(0,de.path)(["layout","navigation-3000","components","projectTreeLogic"]),(0,de.connect)({values:[el,["aggregationLabel","groupTypes","groupsAccessStatus"],ve,["featureFlags"]]}),(0,de.actions)({loadSavedItems:!0,loadUnfiledItems:e=>({type:e}),addFolder:e=>({folder:e}),deleteItem:e=>({item:e}),moveItem:(e,t)=>({oldPath:e,newPath:t}),queueAction:e=>({action:e}),removeQueuedAction:e=>({action:e}),applyPendingActions:!0,createSavedItem:e=>({savedItem:e}),updateSavedItem:e=>({savedItem:e}),deleteSavedItem:e=>({savedItem:e})}),(0,ci.loaders)(({actions:e,values:t})=>({savedItems:[[],{loadSavedItems:async()=>{let l=await ne.fileSystem.list();return[...t.savedItems,...l.results]}}],allUnfiledItems:[[],{loadUnfiledItems:async({type:l})=>{let a=await ne.fileSystem.unfiled(l);return[...t.allUnfiledItems,...a.results]}}],pendingLoader:[!1,{applyPendingActions:async()=>{for(let l of t.pendingActions){if(l.type==="move"&&l.newPath)if(l.item.id){let a=await ne.fileSystem.update(l.item.id,{path:l.newPath});e.updateSavedItem(a)}else{let a=await ne.fileSystem.create({...l.item,path:l.newPath});e.createSavedItem(a)}else if(l.type==="create"){let a=await ne.fileSystem.create(l.item);e.createSavedItem(a)}else l.type==="delete"&&l.item.id&&(await ne.fileSystem.delete(l.item.id),e.deleteSavedItem(l.item));e.removeQueuedAction(l)}return!0}}]})),(0,de.reducers)({unfiledLoadingCount:[0,{loadUnfiledItems:e=>e+1,loadUnfiledItemsSuccess:e=>e-1,loadUnfiledItemsFailure:e=>e-1}],pendingActions:[[],{queueAction:(e,{action:t})=>[...e,t],removeQueuedAction:(e,{action:t})=>e.filter(l=>l!==t)}],savedItems:[[],{createSavedItem:(e,{savedItem:t})=>[...e,t],updateSavedItem:(e,{savedItem:t})=>e.map(l=>l.id===t.id?t:l),deleteSavedItem:(e,{savedItem:t})=>e.filter(l=>l.id!==t.id)}]}),(0,de.selectors)({unfiledLoading:[e=>[e.unfiledLoadingCount],e=>e>0],unfiledItems:[e=>[e.savedItems,e.allUnfiledItems],(e,t)=>{let l=new Set;for(let a of[...e]){let o=`${a.type}/${a.ref}`;l.has(o)||l.add(o)}return t.filter(a=>!l.has(`${a.type}/${a.ref}`))}],viableItems:[e=>[e.unfiledItems,e.savedItems,e.pendingActions],(e,t,l)=>{let a=[...e,...t],o=Object.fromEntries(a.map(n=>[n.path,n]));for(let n of l)if(n.type==="move"&&n.newPath){let r=o[n.path];r?o[n.newPath]?console.error("Item already exists, can't move",n.newPath):(o[n.newPath]={...r,path:n.newPath},delete o[n.path]):console.error("Item not found, can't move",n.path)}else n.type==="create"&&n.newPath?o[n.newPath]?console.error("Item already exists, can't create",n.item):o[n.newPath]={...n.item,path:n.newPath}:n.type==="delete"&&n.path&&delete o[n.path];return Object.values(o)}],unappliedPaths:[e=>[e.pendingActions],e=>{let t={};for(let l of e)if((l.type==="move-create"||l.type==="move"||l.type==="create")&&l.newPath){t[l.newPath]=!0;let a=l.newPath.split("/");for(let o=1;o<a.length;o++)t[a.slice(0,o).join("/")]=!0}return t}],loadingPaths:[e=>[e.unfiledLoading,e.savedItemsLoading,e.pendingLoaderLoading,e.pendingActions],(e,t,l,a)=>{let o={};return e&&(o.Unfiled=!0,o[""]=!0),t&&(o[""]=!0),l&&a.length>0&&(o[a[0].newPath||a[0].path]=!0),o}],pendingActionsCount:[e=>[e.pendingActions],e=>e.length],projectTree:[e=>[e.viableItems],e=>ga(e)],groupNodes:[e=>[e.groupTypes,e.groupsAccessStatus,e.aggregationLabel],(e,t,l)=>[...[1,2,3].includes(t)?[{path:"Groups",href:I.groups(0)}]:Array.from(e.values()).map(n=>({path:st(l(n.group_type_index).plural),href:I.groups(n.group_type_index)}))]],defaultTreeNodes:[e=>[e.featureFlags,e.groupNodes],(e,t)=>ga(ri(t))],projectRow:[e=>[e.pendingActionsCount,e.pendingLoaderLoading],(e,t)=>[...e>0?[{id:"applyPendingActions",name:`--- Apply${t?"ing":""} ${e} unsaved change${e>1?"s":""} ---`,icon:t?(0,Jl.jsx)(Ae,{}):(0,Jl.jsx)(Ot,{className:"text-warning"}),onClick:t?void 0:()=>Xl.actions.applyPendingActions()}]:[{id:"--",name:"----------------------"}],{id:"project",name:"Default Project",icon:(0,Jl.jsx)(wt,{}),record:{type:"project",id:"project"},onClick:()=>si.router.actions.push(I.projectHomepage())}]],treeData:[e=>[e.defaultTreeNodes,e.projectTree,e.projectRow],(e,t,l)=>[...e,...l,...t]]}),(0,de.listeners)(({actions:e,values:t})=>({moveItem:async({oldPath:l,newPath:a})=>{for(let o of t.viableItems)(o.path===l||o.path.startsWith(l+"/"))&&e.queueAction({type:"move",item:o,path:o.path,newPath:a+o.path.slice(l.length)})},deleteItem:async({item:l})=>{e.queueAction({type:"delete",item:l,path:l.path})},addFolder:({folder:l})=>{t.viableItems.find(a=>a.path===l)||e.queueAction({type:"create",item:{id:`project/${l}`,path:l,type:"folder"},path:l,newPath:l})}})),(0,de.afterMount)(({actions:e})=>{e.loadSavedItems(),e.loadUnfiledItems("feature_flag"),e.loadUnfiledItems("experiment"),e.loadUnfiledItems("insight"),e.loadUnfiledItems("dashboard"),e.loadUnfiledItems("notebook")})]);var y=i(R());function Jr(e){let{attributes:t,listeners:l,setNodeRef:a,transform:o}=bo({id:e.id}),n={transform:mo.Translate.toString(o)};return(0,y.jsx)("div",{ref:a,style:n,...l,...t,children:e.children})}function mi(e){let{setNodeRef:t}=go({id:e.id});return(0,y.jsx)("div",{ref:t,children:e.children})}function gi(){let{theme:e}=(0,rt.useValues)(Ue),{isNavShown:t,mobileLayout:l}=(0,rt.useValues)(ee),{toggleNavCollapsed:a,hideNavOnMobile:o}=(0,rt.useActions)(ee),{treeData:n,viableItems:r,loadingPaths:d,unappliedPaths:b}=(0,rt.useValues)(Xl),{addFolder:g,deleteItem:u,moveItem:G}=(0,rt.useActions)(Xl),V=(0,bi.useRef)(null);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("nav",{className:(0,Wa.default)("Navbar3000",!t&&"Navbar3000--hidden"),ref:V,children:[(0,y.jsxs)("div",{className:"Navbar3000__content w-80",style:e?.sidebarStyle,children:[(0,y.jsx)(po,{onDragEnd:({active:W,over:p})=>{let U=W.id,Z=p?.id;if(Z===U){let J=r.find(S=>S.path===U);J&&J.href&&pi.router.actions.push(J.href)}else if(Z===""){let J=U.split("/"),S=J.pop();S&&J.length>0&&G(U,S)}else if(Z){let J=r.find(S=>S.path===Z);if(!J||J.type==="folder"){let D=U.split("/").pop(),z=Z+"/"+D;z!==U&&G(U,z)}}},children:(0,y.jsx)(Pt,{innerClassName:"Navbar3000__top",direction:"vertical",children:(0,y.jsx)(ba,{className:"px-0 py-1",data:n,renderItem:(W,p)=>{let U=W.record?.path||"",Z=typeof W.record?.path=="string"||W.record?.type==="project"?d[U]?(0,y.jsx)(Ae,{className:"ml-1"}):b[U]?(0,y.jsx)(Ot,{className:"ml-1 text-warning"}):void 0:void 0;return W.record?.type==="project"?(0,y.jsxs)(mi,{id:"",children:[p,Z]}):U?(0,y.jsx)(mi,{id:U,children:(0,y.jsxs)(Jr,{id:U,children:[p,Z]})}):(0,y.jsxs)(y.Fragment,{children:[p,Z]})},right:({record:W})=>W?.created_at||W?.type?(0,y.jsx)(co,{size:"xsmall",onClick:p=>p.stopPropagation(),overlay:(0,y.jsxs)(y.Fragment,{children:[W?.type==="folder"||W?.type==="project"?(0,y.jsx)(w,{onClick:()=>{let p=prompt(W.path?`Create a folder under "${W.path}":`:"Create a new folder:","");p&&g(W.path?W.path+"/"+p:p)},fullWidth:!0,children:"New Folder"}):null,W.path?(0,y.jsx)(w,{onClick:()=>{let p=W.path,U=prompt("New name?",p);U&&G(p,U)},fullWidth:!0,children:"Rename"}):null,W.path?(0,y.jsx)(w,{onClick:()=>{navigator.clipboard.writeText(W.path)},fullWidth:!0,children:"Copy Path"}):null,W?.created_at?(0,y.jsx)(w,{onClick:()=>u(W),fullWidth:!0,children:"Delete"}):null]})}):void 0})})}),(0,y.jsx)(Rl,{})]}),!l&&(0,y.jsx)(al,{logicKey:"navbar",placement:"right",containerRef:V,closeThreshold:100,onToggleClosed:W=>a(W),onDoubleClick:()=>a()})]}),l&&(0,y.jsx)("div",{className:(0,Wa.default)("Navbar3000__overlay",!t&&"Navbar3000--hidden"),onClick:()=>o()})]})}c();m();s();var Za=i(Ye()),Je=i(Y()),Ii=i(_e());c();m();s();var Ql=i(Y());var Nt=i(R());function Wi(){let{instanceId:e,viewCount:t,viewCountLoading:l}=(0,Ql.useValues)(Bo),a=t?.views??0,o=t?.users??0,{openSidePanel:n}=(0,Ql.useActions)(Dt);return!e||l?null:(0,Nt.jsxs)("span",{className:"relative inline-flex",children:[(0,Nt.jsx)(w,{loading:l,icon:(0,Nt.jsx)(Oa,{}),size:"small",onClick:()=>n("activity","metalytics"),tooltip:`${o} PostHog members have viewed this a total of ${a} times. Click to see more.`}),(0,Nt.jsx)(Ba.Number,{count:a,size:"small",position:"top-right",showZero:!1,status:"primary",maxDigits:3})]})}var dt=i(k());var T=i(R()),Xr=44;function ui(){let{mobileLayout:e}=(0,Je.useValues)(be),{showNavOnMobile:t}=(0,Je.useActions)(ee),{breadcrumbs:l,renameState:a}=(0,Je.useValues)(Fe),{setActionsContainer:o}=(0,Je.useActions)(Fe),[n,r]=(0,dt.useState)(0),d=e?0:n,b=Ii.router.values.location.pathname.includes("/onboarding/");return(0,dt.useLayoutEffect)(()=>{function g(){let G=document.getElementsByTagName("main")[0],V=G.scrollTop,W=Math.min(G.scrollHeight-G.clientHeight,Xr),p=W>0?Math.min(V/W,1):0;if(r(p),a&&(p>.5&&n<=.5||p<=.5&&n>.5)){let[U,Z]=p>.5?["large","small"]:["small","large"],J=document.querySelector(`input[name="item-name-${U}"]`),S=document.querySelector(`input[name="item-name-${Z}"]`);J&&S&&(S.focus(),S.setSelectionRange(J.selectionStart||0,J.selectionEnd||0))}}let u=document.getElementsByTagName("main")[0];return u.addEventListener("scroll",g),()=>u.removeEventListener("scroll",g)},[n]),l.length?(0,T.jsx)("div",{className:(0,Za.default)("TopBar3000",d===0&&"TopBar3000--full",d===1&&"TopBar3000--compact"),style:{"--breadcrumbs-compaction-rate":d},children:(0,T.jsxs)("div",{className:"TopBar3000__content",children:[e&&(0,T.jsx)(w,{size:"small",onClick:()=>t(),icon:(0,T.jsx)(Ja,{}),className:"TopBar3000__hamburger"}),(0,T.jsxs)("div",{className:"TopBar3000__breadcrumbs",children:[l.length>1&&(0,T.jsxs)("div",{className:"TopBar3000__trail",children:[l.slice(0,-1).map(g=>(0,T.jsxs)(dt.default.Fragment,{children:[(0,T.jsx)(Zi,{breadcrumb:g}),(0,T.jsx)("div",{className:"TopBar3000__separator"})]},Ia(g.key))),(0,T.jsx)(Zi,{breadcrumb:l[l.length-1],here:!0,isOnboarding:b})]}),(0,T.jsx)(Qr,{breadcrumb:l[l.length-1],isOnboarding:b})]}),(0,T.jsx)(Xt,{flag:"metalytics",children:(0,T.jsx)("div",{className:"shrink-1",children:(0,T.jsx)(Wi,{})})}),(0,T.jsx)("div",{className:"TopBar3000__actions border-danger",ref:o})]})}):null}function Zi({breadcrumb:e,here:t,isOnboarding:l}){let{renameState:a}=(0,Je.useValues)(Fe),{tentativelyRename:o,finishRenaming:n}=(0,Je.useActions)(Fe),[r,d]=(0,dt.useState)(!1),b=Ia(e.key),g=l&&t?"Onboarding":e.name,u;e.symbol?u=e.symbol:e.name!=null&&e.onRename?u=(0,T.jsx)(Hl,{name:"item-name-small",value:a&&a[0]===b?a[1]:g,onChange:W=>o(b,W),onSave:W=>{e.onRename?.(W)},mode:a&&a[0]===b?"edit":"view",onModeToggle:W=>{W==="edit"?o(b,g):n(),d(!1)},placeholder:"Unnamed",compactButtons:"xsmall",editingIndication:"underlined"}):u=(0,T.jsxs)("span",{className:"flex items-center gap-1.5",children:[g||(0,T.jsx)("i",{children:"Unnamed"}),"tag"in e&&e.tag&&(0,T.jsx)(qt,{size:"small",children:e.tag})]});let G=e.path?xe:"div",V=(0,T.jsxs)(G,{className:(0,Za.default)("TopBar3000__breadcrumb",r&&"TopBar3000__breadcrumb--open",(e.path||e.popover)&&"TopBar3000__breadcrumb--actionable",t&&"TopBar3000__breadcrumb--here"),onClick:()=>{e.popover&&d(!r)},"data-attr":`breadcrumb-${b}`,to:e.path,children:[u,e.popover&&!e.symbol&&(0,T.jsx)(Qa,{})]});return e.popover?(0,T.jsx)(qe,{...e.popover,visible:r,onClickOutside:()=>{r&&d(!1)},onClickInside:()=>{r&&d(!1)},children:V}):V}function Qr({breadcrumb:e,isOnboarding:t}){let{renameState:l}=(0,Je.useValues)(Fe),{tentativelyRename:a,finishRenaming:o}=(0,Je.useActions)(Fe),n=Ia(e.key),r=t?"Onboarding":e.name;return(0,T.jsx)("h1",{className:"TopBar3000__here","data-attr":"top-bar-name",children:e.name==null?(0,T.jsx)(Jt,{className:"w-40 h-4"}):e.onRename?(0,T.jsx)(Hl,{name:"item-name-large",value:l&&l[0]===n?l[1]:r,onChange:d=>{a(n,d),e.forceEditMode&&e.onRename?.(d)},onSave:d=>{e.onRename?.(d)},mode:e.forceEditMode||l&&l[0]===n?"edit":"view",onModeToggle:e.forceEditMode?void 0:d=>{d==="edit"?a(n,r):o()},placeholder:"Unnamed",compactButtons:"xsmall",editingIndication:"underlined",autoFocus:!0}):(0,T.jsx)("span",{children:r})})}function Ia(e){return Array.isArray(e)?e.map(String).join(":"):String(e)}var $=i(R());function Ri({children:e,sceneConfig:t}){let{theme:l}=(0,Yl.useValues)(Ue),{mobileLayout:a}=(0,Yl.useValues)(be),{activeNavbarItem:o,mode:n}=(0,Yl.useValues)(ee);return n!=="full"?(0,$.jsxs)("div",{className:"Navigation3000 flex-col",style:l?.mainStyle,children:[n==="minimal"?(0,$.jsx)(Vn,{}):null,(0,$.jsx)("main",{children:e})]}):(0,$.jsxs)("div",{className:(0,ua.default)("Navigation3000",a&&"Navigation3000--mobile"),style:l?.mainStyle,children:[(0,$.jsx)(Xt,{flag:Ie.TREE_VIEW,fallback:(0,$.jsx)(Jn,{}),children:(0,$.jsx)(gi,{})}),(0,$.jsx)(Xt,{flag:Ie.POSTHOG_3000_NAV,children:o&&(0,$.jsx)(Xo,{navbarItem:o},o.identifier)}),(0,$.jsxs)("main",{children:[(t?.layout!=="app-raw-no-header"||a)&&(0,$.jsx)(ui,{}),(0,$.jsxs)("div",{className:(0,ua.default)("Navigation3000__scene",t?.layout==="app-raw"&&"Navigation3000__scene--raw",t?.layout==="app-raw-no-header"&&"Navigation3000__scene--raw-no-header"),children:[(0,$.jsxs)("div",{className:t?.layout==="app-raw-no-header"?"px-4":"",children:[!t?.hideBillingNotice&&(0,$.jsx)(To,{}),!t?.hideProjectNotice&&(0,$.jsx)(Gn,{})]}),e]})]}),(0,$.jsx)(Jo,{}),(0,$.jsx)(un,{})]})}var H=i(R());window.process=ha;var Gi=(0,M.kea)([(0,M.path)(["scenes","App"]),(0,M.connect)([pt,mt]),(0,M.actions)({enableDelayedSpinner:!0,ignoreFeatureFlags:!0}),(0,M.reducers)({showingDelayedSpinner:[!1,{enableDelayedSpinner:()=>!0}],featureFlagsTimedOut:[!1,{ignoreFeatureFlags:()=>!0}]}),(0,M.selectors)({showApp:[e=>[Ne.selectors.userLoading,Ne.selectors.user,ve.selectors.receivedFeatureFlags,e.featureFlagsTimedOut,Dl.selectors.preflightLoading,Dl.selectors.preflight],(e,t,l,a,o,n)=>(!e||t)&&(l||a)&&(!o||n)]}),(0,M.events)(({actions:e,cache:t})=>({afterMount:()=>{t.spinnerTimeout=window.setTimeout(()=>e.enableDelayedSpinner(),1e3),t.featureFlagTimeout=window.setTimeout(()=>e.ignoreFeatureFlags(),3e3)},beforeUnmount:()=>{window.clearTimeout(t.spinnerTimeout),window.clearTimeout(t.featureFlagTimeout)}}))]);function Vi(){let{showApp:e,showingDelayedSpinner:t}=(0,M.useValues)(Gi);return(0,M.useMountedLogic)(ue({scenes:Ao})),(0,M.useMountedLogic)(No),Yo(),e?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(xr,{}),(0,H.jsx)(Ar,{})]}):(0,H.jsx)(vl,{sceneLevel:!0,visible:t})}function Yr({scene:e}){if(!e.logic)throw new Error("Loading scene without a logic");return(0,M.useMountedLogic)(e.logic(e.paramsToProps?.(e.sceneParams))),null}function xr(){let{loadedScenes:e}=(0,M.useValues)(ue);return(0,H.jsx)(H.Fragment,{children:Object.entries(e).filter(([,{logic:t}])=>!!t).map(([t,l])=>(0,H.jsx)(Yr,{scene:l},t))})}function Ar(){(0,M.useMountedLogic)(Fe);let{user:e}=(0,M.useValues)(Ne),{activeScene:t,activeLoadedScene:l,sceneParams:a,params:o,loadedScenes:n,sceneConfig:r}=(0,M.useValues)(ue),{showingDelayedSpinner:d}=(0,M.useValues)(Gi),{isDarkModeOn:b}=(0,M.useValues)(Ue),g=(0,H.jsx)(ao,{autoClose:6e3,transition:lo,closeOnClick:!1,draggable:!1,closeButton:(0,H.jsx)(no,{}),position:"bottom-right",theme:b?"dark":"light"}),u;if(t&&t in n){let{component:V}=n[t];u=(0,H.jsx)(V,{user:e,...o})}else u=(0,H.jsx)(vl,{sceneLevel:!0,visible:d});let G=(0,H.jsx)(tl,{tags:{feature:t},children:l?.logic?(0,H.jsx)(M.BindLogic,{logic:l.logic,props:l.paramsToProps?.(a)||{},children:u}):u},t);return e?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Ri,{sceneConfig:r,children:G}),g,(0,H.jsx)(Vo,{})]}):r?.onlyUnauthenticated||r?.allowUnauthenticated?(0,H.jsxs)(H.Fragment,{children:[G,g]}):null}c();m();s();var Si=i(Y()),Bi=i(Di()),Ci=i(fl()),Ji=i(Ui()),Xi=i(_e()),Qi=i(yl()),Yi=i(wi()),xi=i(vi());var yr=["loadPreflight","loadUser","loadFunnels","authenticate","signup","loadLatestVersion","loadBilling","loadData","loadRecordingMeta"],Tr=!1;var Mr=()=>({name:"verbose-kea-logger",events:{beforeReduxStore(e){e.middleware.push(t=>l=>a=>{let o=l(a);return console.groupCollapsed("KEA LOGGER",a),console.log(t.getState()),console.groupEnd(),o})}}});function Ai({routerHistory:e,routerLocation:t,beforePlugins:l}={}){let a=[...l||[],(0,Ji.localStoragePlugin)(),(0,xi.windowValuesPlugin)({window}),(0,Xi.routerPlugin)({history:e,location:t,urlPatternOptions:{segmentValueCharset:"a-zA-Z0-9-_~ %.@()!'|"},pathFromRoutesToWindow:o=>Tl(o),transformPathInActions:o=>Tl(o),pathFromWindowToRoutes:o=>Sa(o)}),Bi.formsPlugin,(0,Ci.loadersPlugin)({onFailure({error:o,reducerKey:n,actionKey:r}){if(!yr.includes(r)&&o?.status!==void 0&&![200,201,204,401].includes(o.status)){let d=o.detail||o.statusText;!d&&o.status===404&&(d="URL not found"),d&&io.error(`${Ua(r)} failed: ${d}`)}Tr||console.error({error:o,reducerKey:n,actionKey:r}),window.Sentry?.captureException(o)}}),Qi.subscriptionsPlugin,Yi.waitForPlugin];(window.JS_KEA_VERBOSE_LOGGING||"localStorage"in window&&window.localStorage.getItem("ph-kea-debug"))&&a.push(Mr),window.__REDUX_DEVTOOLS_EXTENSION__&&console.log("NB Redux Dev Tools are disabled on PostHog. See: https://github.com/PostHog/posthog/issues/17482"),(0,Si.resetContext)({plugins:a,createStore:{compose:(...o)=>o.length===0?n=>n:o.length===1?o[0]:o.reduce((n,r)=>(...d)=>n(r(...d)))}})}c();m();s();var fr=e=>(window.SENTRY_DSN&&(e.on_xhr_error=t=>{let l=t.status,a=t.statusText||"no status text in error";vt(new Error(`Failed with status ${l} while sending to PostHog. Message: ${a}`),{tags:{status:l,statusText:a}})}),e);function ki(){window.JS_POSTHOG_API_KEY?Qe.init(window.JS_POSTHOG_API_KEY,fr({opt_out_useragent_filter:window.location.hostname==="localhost",api_host:window.JS_POSTHOG_HOST,ui_host:window.JS_POSTHOG_UI_HOST,rageclick:!0,persistence:"localStorage+cookie",bootstrap:window.POSTHOG_USER_IDENTITY_WITH_FLAGS?window.POSTHOG_USER_IDENTITY_WITH_FLAGS:{},opt_in_site_apps:!0,api_transport:"fetch",before_send:e=>{let t=window;return t.Cypress&&e&&(t._cypress_posthog_captures=t._cypress_posthog_captures||[],t._cypress_posthog_captures.push(e)),e},loaded:e=>{e.sessionRecording&&(e.sessionRecording._forceAllowLocalhostNetworkCapture=!0),window.IMPERSONATED_SESSION?(e.sessionManager?.resetSessionId(),e.opt_out_capturing()):e.opt_in_capturing();let t=window.Cypress;t&&Object.entries(t.env()).forEach(([a,o])=>{a.startsWith("POSTHOG_PROPERTY_")&&e.register_for_session({[a.replace("POSTHOG_PROPERTY_","E2E_TESTING_").toLowerCase()]:o})}),e.getFeatureFlag(Ie.SESSION_RESET_ON_LOAD)&&e.sessionManager?.resetSessionId(),window.posthog=e},scroll_root_selector:["main","html"],autocapture:{capture_copied_text:!0},capture_performance:{web_vitals:!0},person_profiles:"always",__preview_remote_config:!0})):Qe.init("fake token",{autocapture:!1,loaded:function(e){e.opt_out_capturing()}}),window.SENTRY_DSN&&Fa({dsn:window.SENTRY_DSN,environment:window.SENTRY_ENVIRONMENT,...location.host.includes("posthog.com")&&{integrations:[new Qe.SentryIntegration(Qe,"posthog",1899813,void 0,"*")]}})}var Al=i(R());ki();Ai();typeof window<"u"&&(window.getReduxState=()=>"Disabled outside development!");function yi(){let e=document.getElementById("root");e?(0,Ti.createRoot)(e).render((0,Al.jsx)(tl,{children:(0,Al.jsx)(Va,{client:Qe,children:(0,Al.jsx)(Vi,{})})})):console.error('Attempted, but could not render PostHog app because <div id="root" /> is not found.')}document.readyState!=="loading"?yi():document.addEventListener("DOMContentLoaded",yi);
//# sourceMappingURL=/static/index-FEXRKWZF.js.map
