import{b as pe}from"/static/chunk-7GUW4FOI.js";import{g as ce}from"/static/chunk-M7JKKBGY.js";import{b as le,c as K}from"/static/chunk-TIKFJXRT.js";import"/static/chunk-KYJ4OXJI.js";import"/static/chunk-KYV72GAC.js";import"/static/chunk-OXUIEO32.js";import"/static/chunk-SEJ4C6TB.js";import"/static/chunk-WNE4BY7V.js";import{a as ue}from"/static/chunk-QNYERZG7.js";import{a as F}from"/static/chunk-FT4MFWRB.js";import"/static/chunk-YDKHEMDP.js";import"/static/chunk-7SO55T25.js";import"/static/chunk-HRNZBUVG.js";import{a as se,b as de,d as me}from"/static/chunk-Y35PDO57.js";import"/static/chunk-KBNOIM2W.js";import"/static/chunk-BB32DDTD.js";import"/static/chunk-QB3AUFV2.js";import"/static/chunk-PWG7LMNW.js";import"/static/chunk-CEZSENEJ.js";import"/static/chunk-GOBPXP3Z.js";import{Ac as j,Ae as te,Dl as ae,Do as b,Pg as oe,Sd as i,Ta as J,Wd as O,Xg as W,Zg as A,a as V,ce as Q,de as x,ee as k,f as ge,ie as h,je as U,jo as re,m as q,pe as Z,r as T,td as G,th as ne,ve as ee,vo as ie,ze as _}from"/static/chunk-TW5IU73S.js";import"/static/chunk-XPJ4MQJV.js";import"/static/chunk-KQJ3FYBQ.js";import{F as Y,a as ye,na as c}from"/static/chunk-3UDJFOQH.js";import"/static/chunk-HHT4SG7V.js";import"/static/chunk-K7LQKAJG.js";import"/static/chunk-QQTK3LZH.js";import"/static/chunk-IJQNM355.js";import"/static/chunk-4CN6THWS.js";import"/static/chunk-272RTCFX.js";import"/static/chunk-2ROB4QWU.js";import"/static/chunk-ALT2ZZSO.js";import"/static/chunk-UE6SLBBN.js";import"/static/chunk-GINZUAUY.js";import"/static/chunk-SQELCOUW.js";import"/static/chunk-IGYUTZ65.js";import"/static/chunk-YM6UBNGD.js";import"/static/chunk-C6TQ5FFZ.js";import"/static/chunk-GXGA523B.js";import"/static/chunk-N4MMWRNK.js";import"/static/chunk-NRLAI7OY.js";import"/static/chunk-LVVHNICT.js";import"/static/chunk-2AXSSSSX.js";import"/static/chunk-DGXQI7RB.js";import"/static/chunk-HUCRWDLX.js";import"/static/chunk-RFEQG3YN.js";import"/static/chunk-PUISI233.js";import{d as s,e as S,g as C,j as N}from"/static/chunk-SJXEOBQC.js";S();N();C();var E=s(V()),fe=s(ge());S();N();C();var w=s(V());var X=s(ye());var e=s(T());function he(){let{holdouts:R,holdoutsLoading:H,holdout:r}=(0,w.useValues)(K),{createHoldout:B,deleteHoldout:f,setHoldout:l,updateHoldout:D}=(0,w.useActions)(K),[M,y]=(0,X.useState)(!1),[p,g]=(0,X.useState)(null),I=a=>{g(a),l(a),y(!0)},P=()=>{g(null),l({...le}),y(!0)},v=()=>{y(!1),g(null)},z=()=>{if(!r.name)return"Name is required";if(r.filters?.[0]?.rollout_percentage===void 0)return"Rollout percentage is required"},L=[{title:"Name",dataIndex:"name",key:"name",render:a=>(0,e.jsx)("div",{className:"font-semibold",children:a})},{title:"Description",dataIndex:"description",key:"description"},{title:"Rollout Percentage",dataIndex:"filters",key:"rollout",render:a=>{let d=a?.[0]?.rollout_percentage||0;return(0,e.jsxs)("div",{children:[d," %"]})}},{title:"Actions",key:"actions",render:(a,d)=>(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(i,{type:"secondary",size:"xsmall",icon:(0,e.jsx)(j,{}),onClick:()=>I(d)}),(0,e.jsx)(i,{type:"secondary",icon:(0,e.jsx)(G,{}),size:"xsmall",status:"danger",onClick:()=>{x.open({title:"Delete this holdout?",content:(0,e.jsxs)("div",{className:"text-sm",children:["Are you sure you want to delete the holdout ",(0,e.jsxs)("b",{children:['"',d.name,'"']}),"? This action cannot be undone."]}),primaryButton:{children:"Delete",type:"primary",status:"danger",onClick:()=>f(d.id),size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})}})]})}];return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(Q,{isOpen:M,onClose:v,title:p?"Edit holdout":"Add holdout",footer:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i,{onClick:v,children:"Cancel"}),(0,e.jsx)(i,{type:"primary",onClick:()=>{p?D(p.id,r):B(),v()},disabledReason:z(),children:p?"Update":"Save"})]}),children:(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(U,{children:"Name"}),(0,e.jsx)(h,{value:r.name,onChange:a=>l({name:a}),placeholder:"e.g. 'Frontend holdout group 1'"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(U,{children:"Description"}),(0,e.jsx)(h,{value:r.description||"",onChange:a=>l({description:a})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(k,{}),(0,e.jsx)(O,{type:"info",children:(0,e.jsx)("div",{className:"space-y-2",children:(0,e.jsx)("div",{children:"Specify the percentage population that should be included in this holdout group. This is stable across experiments."})})}),(0,e.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-1",children:["Roll out to"," ",(0,e.jsx)(re,{value:r.filters?.[0]?.rollout_percentage||100,onChange:a=>l({filters:[{properties:[],rollout_percentage:a}]}),min:0,max:100,step:1,className:"ml-1.5 w-20"}),(0,e.jsx)(h,{"data-attr":"rollout-percentage",type:"number",className:"ml-2 mr-1.5 max-w-30",value:r.filters?.[0]?.rollout_percentage||100,onChange:a=>l({filters:[{properties:[],rollout_percentage:a}]}),min:0,max:100,step:"any",suffix:(0,e.jsx)("span",{children:"%"})}),"of ",(0,e.jsx)("b",{children:"total users."})]})]})]})}),(0,e.jsx)(O,{type:"info",children:(0,e.jsx)("div",{className:"space-y-2",children:(0,e.jsx)("div",{children:"Holdouts are stable groups of users excluded from experiment variations.They act as a baseline, helping you see how users behave without any changes applied. This lets you directly compare their behavior to those exposed to the experiment variations. Once a holdout is configured, you can apply it to an experiment during creation."})})}),(0,e.jsx)(_,{emptyState:(0,e.jsx)("div",{className:"py-4 text-secondary text-sm text-center",children:"You have not created any holdouts yet."}),loading:H,dataSource:R,columns:L}),(0,e.jsx)(i,{type:"primary",onClick:P,"data-attr":"add-holdout",children:"New holdout"})]})}var t=s(T()),lt={component:Ee,logic:A};function Ee(){let{filteredExperiments:R,experimentsLoading:H,tab:r,searchTerm:B,shouldShowEmptyState:f,searchStatus:l,userFilter:D}=(0,E.useValues)(A),{setExperimentsTab:M,deleteExperiment:y,archiveExperiment:p,setSearchStatus:g,setSearchTerm:I,setUserFilter:P}=(0,E.useActions)(A),{featureFlags:v}=(0,E.useValues)(q),z=v[Y.EXPERIMENTS_NEW_QUERY_RUNNER_AA_TEST],L="Experiments help you test changes to your product to see which changes will lead to optimal results. Automatic statistical calculations let you see if the results are valid or if they are likely just a chance occurrence.",a=n=>n.end_date?(0,c.default)(n.end_date).diff((0,c.default)(n.start_date),"day"):n.start_date?(0,c.default)().diff((0,c.default)(n.start_date),"day"):void 0,d=[{title:"Name",dataIndex:"name",className:"ph-no-capture",sticky:!0,width:"40%",render:function(m,o){return(0,t.jsx)(oe,{to:o.id?b.experiment(o.id):void 0,title:ae(o.name,17),description:o.description})}},me(),de(),se("start_date","Started"),{title:"Duration",key:"duration",render:function(m,o){let u=a(o);return(0,t.jsx)("div",{children:u!==void 0?`${u} day${u!==1?"s":""}`:"\u2014"})},sorter:(n,m)=>{let o=a(n)??-1,u=a(m)??-1;return o>u?1:-1},align:"right"},{title:"Status",key:"status",render:function(m,o){return(0,t.jsx)(ce,{experiment:o})},align:"center",sorter:(n,m)=>{let o=W(n),u=W(m),$={draft:1,running:2,complete:3};return $[o]>$[u]?1:-1}},{width:0,render:function(m,o){return(0,t.jsx)(ee,{overlay:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i,{to:b.experiment(`${o.id}`),size:"small",fullWidth:!0,children:"View"}),!o.archived&&o?.end_date&&(0,c.default)().isSameOrAfter((0,c.default)(o.end_date),"day")&&(0,t.jsx)(i,{onClick:()=>{x.open({title:"Archive this experiment?",content:(0,t.jsx)("div",{className:"text-sm text-secondary",children:"This action will move the experiment to the archived tab. It can be restored at any time."}),primaryButton:{children:"Archive",type:"primary",onClick:()=>p(o.id),size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},"data-attr":`experiment-${o.id}-dropdown-archive`,fullWidth:!0,children:"Archive experiment"}),(0,t.jsx)(k,{}),(0,t.jsx)(i,{status:"danger",onClick:()=>{x.open({title:"Delete this experiment?",content:(0,t.jsx)("div",{className:"text-sm text-secondary",children:"This action cannot be undone. All experiment data will be permanently removed."}),primaryButton:{children:"Delete",type:"primary",onClick:()=>y(o.id),size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},"data-attr":`experiment-${o.id}-dropdown-remove`,fullWidth:!0,children:"Delete experiment"})]})})}}];return(0,t.jsxs)("div",{children:[(0,t.jsx)(ie,{buttons:(0,t.jsx)(i,{type:"primary","data-attr":"create-experiment",to:b.experiment("new"),children:"New experiment"}),caption:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(J,{"data-attr":"experiment-help",to:"https://posthog.com/docs/experiments/installation?utm_medium=in-product&utm_campaign=new-experiment",target:"_blank",children:[" ","Visit the guide"]})," ","to learn more."]}),tabbedPage:!0}),(0,t.jsxs)("span",{className:"hidden","data-attr":"aa-test-flag-result",children:["AA test flag result: ",String(z)]}),(0,t.jsx)(te,{activeKey:r,onChange:n=>M(n),tabs:[{key:"all",label:"All experiments"},{key:"yours",label:"Your experiments"},{key:"archived",label:"Archived experiments"},{key:"holdouts",label:"Holdout groups"},{key:"shared-metrics",label:"Shared metrics"}]}),r==="holdouts"?(0,t.jsx)(he,{}):r==="shared-metrics"?(0,t.jsx)(pe,{}):(0,t.jsxs)(t.Fragment,{children:[r==="archived"?(0,t.jsx)(F,{productName:"Experiments",productKey:"experiments",thingName:"archived experiment",description:L,docsURL:"https://posthog.com/docs/experiments",isEmpty:f}):(0,t.jsx)(F,{productName:"Experiments",productKey:"experiments",thingName:"experiment",description:L,docsURL:"https://posthog.com/docs/experiments",action:()=>fe.router.actions.push(b.experiment("new")),isEmpty:f,customHog:ne}),!f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,t.jsx)(h,{type:"search",placeholder:"Search experiments",onChange:I,value:B}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:(0,t.jsx)("b",{children:"Status"})}),(0,t.jsx)(Z,{size:"small",onChange:n=>{n&&g(n)},options:[{label:"All",value:"all"},{label:"Draft",value:"draft"},{label:"Running",value:"running"},{label:"Complete",value:"complete"}],value:l??"all",dropdownMatchSelectWidth:!1,dropdownMaxContentWidth:!0}),(0,t.jsx)("span",{className:"ml-1",children:(0,t.jsx)("b",{children:"Created by"})}),(0,t.jsx)(ue,{defaultLabel:"Any user",value:D??null,onChange:n=>P(n?.uuid??null)})]})]}),(0,t.jsx)(_,{dataSource:R,columns:d,rowKey:"id",loading:H,defaultSorting:{columnKey:"created_at",order:-1},noSortingCancellation:!0,pagination:{pageSize:100},nouns:["experiment","experiments"],"data-attr":"experiment-table"})]})]})]})}export{Ee as Experiments,lt as scene};
//# sourceMappingURL=/static/Experiments-4L6XPYEL.js.map
