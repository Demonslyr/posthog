import{j as X}from"/static/chunk-CBJ7RAUW.js";import"/static/chunk-XSEDUXPL.js";import{f as K}from"/static/chunk-NKVVAJQ7.js";import"/static/chunk-2HTNY362.js";import"/static/chunk-S27Q4QO6.js";import"/static/chunk-JUFFFVO5.js";import"/static/chunk-JZCOVRBI.js";import"/static/chunk-EIJECEWK.js";import{Ae as B,Do as u,Ko as $,Mc as g,Oc as P,Qd as U,Sa as F,Sd as q,Vd as R,a as v,ch as D,f as Q,h as M,m as k,oi as x,r as p,vo as j,wg as C,wk as V,wo as J,ze as I}from"/static/chunk-RFJTZKD6.js";import"/static/chunk-XPJ4MQJV.js";import"/static/chunk-KQJ3FYBQ.js";import{Ha as _,Ua as T,da as Z}from"/static/chunk-3UDJFOQH.js";import"/static/chunk-HHT4SG7V.js";import"/static/chunk-K7LQKAJG.js";import"/static/chunk-QQTK3LZH.js";import"/static/chunk-IJQNM355.js";import"/static/chunk-4CN6THWS.js";import"/static/chunk-272RTCFX.js";import"/static/chunk-2ROB4QWU.js";import"/static/chunk-ALT2ZZSO.js";import"/static/chunk-UE6SLBBN.js";import"/static/chunk-GINZUAUY.js";import"/static/chunk-SQELCOUW.js";import"/static/chunk-IGYUTZ65.js";import"/static/chunk-YM6UBNGD.js";import"/static/chunk-C6TQ5FFZ.js";import"/static/chunk-GXGA523B.js";import"/static/chunk-N4MMWRNK.js";import"/static/chunk-NRLAI7OY.js";import"/static/chunk-LVVHNICT.js";import"/static/chunk-2AXSSSSX.js";import"/static/chunk-DGXQI7RB.js";import"/static/chunk-HUCRWDLX.js";import"/static/chunk-RFEQG3YN.js";import"/static/chunk-PUISI233.js";import{d as n,e as c,g as l,j as m}from"/static/chunk-SJXEOBQC.js";c();m();l();var i=n(v()),Y=n(Q());c();m();l();var d=n(v());c();m();l();var H=n(Z()),s=n(v()),y=n(Q());var h=(0,s.kea)([(0,s.path)(["scenes","events","eventsSceneLogic"]),(0,s.connect)({values:[$,["currentTeam"],k,["featureFlags"]]}),(0,s.actions)({setQuery:e=>({query:e})}),(0,s.reducers)({savedQuery:[null,{setQuery:(e,{query:t})=>t}]}),(0,s.selectors)({defaultQuery:[e=>[e.currentTeam],e=>{let t=e&&K(e),o=J();return t?{...o,source:t}:o}],query:[e=>[e.savedQuery,e.defaultQuery],(e,t)=>e||t]}),(0,y.actionToUrl)(({values:e})=>({setQuery:()=>[u.activity("explore"),{},T(e.query,e.defaultQuery)?{}:{q:e.query},{replace:!0}]})),(0,y.urlToAction)(({actions:e,values:t})=>{let o=(A,N,{q:f})=>{(0,H.default)(f,t.query)||(f?typeof f=="object"?e.setQuery(f):(R.error("Invalid query in URL"),console.error({queryParam:f})):T(t.query,t.defaultQuery)||e.setQuery(t.defaultQuery))};return{[u.activity("explore")]:o}})]);var G=n(p());function z(){let{query:e}=(0,d.useValues)(h),{setQuery:t}=(0,d.useActions)(h);return(0,G.jsx)(X,{query:e,setQuery:t,context:{showOpenEditorButton:!0,extraDataTableQueryFeatures:[14]}})}c();m();l();var O=n(M()),b=n(v());var r=n(p()),te=[{title:"Event",key:"event",className:"max-w-80",render:function(t,o){return(0,r.jsx)(C,{value:o.event,type:"events"})}},{title:"Person distinct ID",tooltip:"Some events may be missing a person profile \u2013 this is expected, because live events are streamed before person processing completes",key:"person",className:"max-w-80",render:function(t,o){return(0,r.jsx)(V,{person:{distinct_id:o.distinct_id}})}},{title:"URL / Screen",key:"$current_url",className:"max-w-80",render:function(t,o){return(0,r.jsx)("span",{children:o.properties.$current_url||o.properties.$screen_name})}},{title:"Time",key:"timestamp",className:"max-w-80",render:function(t,o){return(0,r.jsx)(D,{time:o.timestamp})}}];function W(){let{events:e,stats:t,streamPaused:o}=(0,b.useValues)(x),{pauseStream:A,resumeStream:N}=(0,b.useActions)(x);return(0,r.jsxs)("div",{"data-attr":"manage-events-table",children:[(0,r.jsxs)("div",{className:"mb-4 flex w-full justify-between items-center",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(F,{title:"Estimate of users active in the last 30 seconds.",placement:"right",children:(0,r.jsxs)("div",{className:"flex justify-center items-center bg-surface-primary px-3 py-2 rounded border border-primary text-xs font-medium text-secondary space-x-2.5",children:[(0,r.jsxs)("span",{className:"relative flex h-2.5 w-2.5",children:[(0,r.jsx)("span",{className:(0,O.default)("absolute inline-flex h-full w-full rounded-full bg-danger",t?.users_on_product!=null&&"animate-ping"),style:{opacity:.75}}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-danger"})]}),(0,r.jsxs)("span",{className:"text-sm cursor-default",children:["Users active right now: ",(0,r.jsx)("b",{children:t?.users_on_product??"0"})]})]})})}),(0,r.jsx)("div",{children:(0,r.jsx)(q,{icon:o?(0,r.jsx)(P,{className:"w-4 h-4"}):(0,r.jsx)(g,{className:"w-4 h-4"}),type:"secondary",onClick:o?N:A,children:o?"Play":"Pause"})})]}),(0,r.jsx)(I,{columns:te,"data-attr":"live-events-table",rowKey:"uuid",dataSource:e,useURLForSorting:!1,emptyState:(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center gap-4 p-6",children:[o?(0,r.jsx)(g,{className:"text-4xl"}):(0,r.jsx)(U,{className:"text-4xl",textColored:!0}),(0,r.jsx)("span",{className:"text-lg font-title font-semibold leading-tight",children:o?"Stream paused":"Waiting for events\u2026"})]}),nouns:["event","events"]})]})}var a=n(p()),re=[{key:"explore",label:"Explore",content:(0,a.jsx)(z,{}),link:u.activity("explore")},{key:"live",label:"Live",content:(0,a.jsx)(W,{}),link:u.activity("live")}],w=(0,i.kea)([(0,i.path)(["scenes","events","activitySceneLogic"]),(0,i.actions)({setTab:e=>({tab:e})}),(0,i.reducers)({tab:["explore",{setTab:(e,{tab:t})=>t}]}),(0,i.selectors)({breadcrumbs:[e=>[e.tab],e=>[{key:"Activity",name:"Activity",path:u.activity()},{key:e,name:_(e)}]]}),(0,Y.urlToAction)(({actions:e})=>({[u.activity(":tab")]:({tab:t})=>{e.setTab(t)}}))]);function oe(){let{tab:e}=(0,i.useValues)(w),{setTab:t}=(0,i.useActions)(w);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{tabbedPage:!0}),(0,a.jsx)(B,{activeKey:e,onChange:o=>t(o),tabs:re})]})}var We={component:oe,logic:w};export{oe as ActivityScene,We as scene};
//# sourceMappingURL=/static/ActivityScene-TFLWJI7T.js.map
