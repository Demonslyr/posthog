import{a as ce,b as pe,c as p}from"/static/chunk-CBI3XVLR.js";import{c as me,d as de}from"/static/chunk-LJNR27CG.js";import"/static/chunk-FCOMHTD6.js";import"/static/chunk-336DAFEI.js";import"/static/chunk-GH3IWF3M.js";import{j as le}from"/static/chunk-CBJ7RAUW.js";import"/static/chunk-XSEDUXPL.js";import"/static/chunk-NKVVAJQ7.js";import"/static/chunk-2HTNY362.js";import"/static/chunk-S27Q4QO6.js";import"/static/chunk-JUFFFVO5.js";import{a as ie}from"/static/chunk-JZCOVRBI.js";import"/static/chunk-EIJECEWK.js";import{Qd as $,Sa as Y,Sd as T,Ta as _,Yn as J,Zn as ne,_n as H,a as V,ae as q,bo as oe,cc as K,ch as z,co as A,do as se,ee as G,h as Pe,ke as ee,lo as re,oe as te,r as m,se as L,vo as ae}from"/static/chunk-RFJTZKD6.js";import"/static/chunk-XPJ4MQJV.js";import"/static/chunk-KQJ3FYBQ.js";import{a as U,hb as j}from"/static/chunk-3UDJFOQH.js";import"/static/chunk-HHT4SG7V.js";import"/static/chunk-K7LQKAJG.js";import"/static/chunk-QQTK3LZH.js";import"/static/chunk-IJQNM355.js";import"/static/chunk-4CN6THWS.js";import"/static/chunk-272RTCFX.js";import"/static/chunk-2ROB4QWU.js";import"/static/chunk-ALT2ZZSO.js";import"/static/chunk-UE6SLBBN.js";import"/static/chunk-GINZUAUY.js";import"/static/chunk-SQELCOUW.js";import"/static/chunk-IGYUTZ65.js";import"/static/chunk-YM6UBNGD.js";import"/static/chunk-C6TQ5FFZ.js";import"/static/chunk-GXGA523B.js";import"/static/chunk-N4MMWRNK.js";import"/static/chunk-NRLAI7OY.js";import"/static/chunk-LVVHNICT.js";import"/static/chunk-2AXSSSSX.js";import"/static/chunk-DGXQI7RB.js";import"/static/chunk-HUCRWDLX.js";import"/static/chunk-RFEQG3YN.js";import"/static/chunk-PUISI233.js";import{d as o,e as i,g as l,j as c}from"/static/chunk-SJXEOBQC.js";i();c();l();var B=o(V());i();c();l();var R=o(Pe());var x=o(m());function Z({className:e,...t}){return(0,x.jsx)(ue,{className:(0,R.default)(e,"PanelLayout"),...t,primary:!1})}function ue({children:e,primary:t,className:n,column:r}){return(0,x.jsx)("div",{className:(0,R.default)("flex",t&&"flex-1",r?"flex-col gap-y-4":"gap-x-2",t?"PanelLayout__container--primary":"PanelLayout__container--secondary",n),children:e})}function We({children:e,primary:t,className:n}){return(0,x.jsx)("div",{className:(0,R.default)(t&&"flex-1","border bg-surface-primary rounded-sm",n),children:e})}function Ce({children:e,title:t,border:n}){return(0,x.jsxs)("div",{className:(0,R.default)("flex flex-row w-full overflow-hidden bg-surface-primary items-center justify-between",n==="bottom"&&"border-b",n==="top"&&"border-t"),children:[t&&(0,x.jsx)("span",{className:"pl-1 font-medium",children:t}),(0,x.jsx)("div",{className:"flex font-light text-xs",children:e})]})}function Xe({label:e,items:t,icon:n,isAvailable:r=!0,closeOnClickInside:u=!0,highlightWhenActive:f=!0,whenUnavailable:b,...k}){let y=t.some(d=>!!d.active);return(0,x.jsx)(ee,{buttonSize:"xsmall",closeOnClickInside:u,items:r?t:b?[b]:[],...k,children:(0,x.jsx)(T,{className:"rounded-[0px]",status:f&&y?"danger":"default",size:"xsmall",icon:n,children:e})})}function ge({tooltip:e,icon:t,label:n,active:r,...u}){let f=(0,x.jsx)(T,{className:"rounded-[0px]",icon:t,size:"xsmall",status:r?"danger":"default",...u,children:n});return u.disabledReason?f:(0,x.jsx)(Y,{title:e,children:f})}function D(e){return(0,x.jsx)(ge,{active:!1,...e})}Z.Panel=We;Z.PanelSettings=Ce;Z.Container=ue;Z.SettingsMenu=Xe;Z.SettingsToggle=ge;Z.SettingsButton=D;var X=Z;var Ze=o(U());i();c();l();var w=o(V());var ke=o(U());i();c();l();var ve=o(V());var g=o(m()),be=()=>{let{issueProperties:e,issueLoading:t}=(0,ve.useValues)(p),{synthetic:n,level:r,browser:u,os:f,library:b,unhandled:k}=J(e),y=({label:d,value:S})=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"text-secondary",children:d}),(0,g.jsx)("td",{children:S??(0,g.jsx)("div",{className:"italic",children:"unknown"})})]});return t?(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(L,{}),(0,g.jsx)(L.Row,{repeat:2})]}):(0,g.jsx)("div",{className:"px-1",children:(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,g.jsx)("table",{children:[{label:"Level",value:r},{label:"Synthetic",value:n},{label:"Library",value:b},{label:"Unhandled",value:k}].map((d,S)=>(0,g.jsx)(y,{...d},S))}),(0,g.jsx)("table",{children:[{label:"Browser",value:u},{label:"OS",value:f},{label:"URL",value:e.$current_url}].map((d,S)=>(0,g.jsx)(y,{...d},S))})]})})};i();c();l();var fe=o(V());var ye=o(m()),Me=()=>{let{issueProperties:e}=(0,fe.useValues)(p);return(0,ye.jsx)(re,{playerKey:"issue",sessionRecordingId:e.$session_id,noMeta:!0,noBorder:!0,autoPlay:!0,noInspector:!0,matchingEventsMatchType:{matchType:"name",eventNames:["$exception"]}})},xe={key:"recording",Content:Me,Header:"Recording",hasContent:({hasRecording:e})=>e,className:"p-0"};i();c();l();var P=o(V());var M=o(m()),Re=()=>{let{issueProperties:e}=(0,P.useValues)(p),{showAllFrames:t}=(0,P.useValues)(A),{exceptionList:n}=J(e),r=H(n);return(0,M.jsx)(se,{showAllFrames:r?t:!0,exceptionList:n})},Ye=({active:e})=>{let{issueProperties:t}=(0,P.useValues)(p),{showAllFrames:n}=(0,P.useValues)(A),{setShowAllFrames:r}=(0,P.useActions)(A),{exceptionList:u}=J(t),f=H(u);return(0,M.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,M.jsx)("span",{children:"Stack trace"}),e&&f?(0,M.jsx)(te,{onChange:(b,k)=>{r(b==="full"),k.stopPropagation()},value:n?"full":"in-app",options:[{value:"in-app",label:"In app only"},{value:"full",label:"Show full stack"}],size:"xsmall"}):null]})},Se={key:"stacktrace",Content:Re,Header:Ye,hasContent:({hasStack:e})=>e};i();c();l();var he=o(V());var Ee=o(m()),Ne=()=>{let{eventsQuery:e}=(0,he.useValues)(p);return(0,Ee.jsx)(le,{query:e,context:{columns:{"recording_button(properties.$session_id)":{title:"Recording",width:"134px"}},showOpenEditorButton:!1,insightProps:{dashboardItemId:"new-ErrorTrackingEventsQuery"}}})};var v=o(m()),Ge=[Se,xe],Ie=()=>{let{issueProperties:e,eventsMode:t}=(0,w.useValues)(p),{setEventsMode:n}=(0,w.useActions)(p),[r,u]=(0,ke.useState)(["stacktrace"]),{exceptionList:f}=J(e),b=ne(f),k=e.$session_id&&e.$recording_status==="active",y=Ge.filter(({hasContent:d})=>d({hasStack:b,hasRecording:k})).map(({key:d,Header:S,Content:F,className:C})=>({key:d,content:(0,v.jsx)(F,{}),header:typeof S=="string"?S:(0,v.jsx)(S,{active:r.includes(d)}),className:C}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(X.PanelSettings,{title:"Events",border:"bottom",children:(0,v.jsx)(D,{label:t==="all"?"Close":"View all events",active:!0,onClick:()=>n(t==="all"?"latest":"all")})}),t==="all"?(0,v.jsx)(Ne,{}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(be,{}),(0,v.jsx)(G,{className:"mt-2 mb-0"}),y.length>0&&(0,v.jsx)(q,{embedded:!0,multiple:!0,activeKeys:r,onChange:u,panels:y})]})]})};i();c();l();var Ve=o(V());i();c();l();i();c();l();var I=o(U());var W=o(m()),Ae=e=>e.scrollHeight>e.clientHeight,O=I.default.forwardRef(function({lines:t,text:n},r){let[u,f]=(0,I.useState)(t),[b,k]=(0,I.useState)(!1),[y,d]=(0,I.useState)(!1),S=C=>{d(!y),k(!b),f(C?void 0:t)},F=C=>{C&&(Ae(C)?(!y||!b)&&d(!0):d(!1))};return(0,I.useEffect)(()=>f(t),[t]),(0,W.jsxs)("div",{ref:r,children:[(0,W.jsx)(we,{lines:u,ref:F,text:n}),(0,W.jsx)("div",{children:b||y?(0,W.jsx)(_,{onClick:()=>S(!b),children:b?"Show less":"Show more"}):null})]})}),we=I.default.forwardRef(function({text:t,lines:n},r){return(0,W.jsx)("span",{style:n?{overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:n}:{},ref:r,children:t})});var s=o(m()),Le=()=>{let{issue:e}=(0,Ve.useValues)(p),t=e&&e.aggregations&&e.aggregations.sessions!==0,n=({value:u})=>e&&e.aggregations?(0,s.jsx)("div",{className:"text-2xl font-semibold",children:u?j(u):"-"}):(0,s.jsx)("div",{className:"flex flex-1 items-center",children:(0,s.jsx)(L,{})}),r=(0,s.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,s.jsxs)("div",{className:"flex text-muted text-xs space-x-px",children:[(0,s.jsx)("span",{children:"Sessions"}),!t&&(0,s.jsx)(K,{className:"mt-0.5"})]}),(0,s.jsx)(n,{value:e?.aggregations?.sessions})]});return(0,s.jsxs)("div",{className:"space-y-1",children:[e&&e.description?(0,s.jsx)(O,{text:e.description,lines:2}):(0,s.jsx)(L,{}),(0,s.jsxs)("div",{className:"flex flex-1 justify-between",children:[(0,s.jsxs)("div",{className:"flex items-end space-x-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted text-xs",children:"First seen"}),e?(0,s.jsx)(z,{time:e.first_seen,className:"border-dotted border-b"}):(0,s.jsx)(L,{})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted text-xs",children:"Last seen"}),e&&e.last_seen?(0,s.jsx)(z,{time:e.last_seen,className:"border-dotted border-b"}):(0,s.jsx)(L,{})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2 gap-8 items-end",children:[(0,s.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,s.jsx)("div",{className:"text-muted text-xs",children:"Occurrences"}),(0,s.jsx)(n,{value:e?.aggregations?.occurrences})]}),t?r:(0,s.jsx)(Y,{title:"No $session_id was set for any event in this issue",delayMs:0,children:r}),(0,s.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,s.jsx)("div",{className:"text-muted text-xs",children:"Users"}),(0,s.jsx)(n,{value:e?.aggregations?.users})]})]})]})]})};i();c();l();var Q=o(V());var Je=o(m()),Te=()=>{let{customSparklineConfig:e}=(0,Q.useValues)(me),{issue:t}=(0,Q.useValues)(p);if(!e)return null;let n=oe(e),r=t?.aggregations?.customVolume||Array(n.length).fill(0);return(0,Je.jsx)(ie,{loading:!t?.aggregations?.customVolume,className:"h-16 w-full",data:r,labels:n})};var a=o(m()),Ln={component:Fe,logic:p,paramsToProps:({params:{id:e},searchParams:{fingerprint:t}})=>({id:e,fingerprint:t})},Be={active:"Active",archived:"Archived",resolved:"Resolved",pending_release:"Pending release"};function Fe(){let{issue:e}=(0,B.useValues)(p),{updateIssue:t,initIssue:n,assignIssue:r}=(0,B.useActions)(p);return(0,Ze.useEffect)(()=>{n()},[]),(0,a.jsx)(de,{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ae,{buttons:e?e.status==="active"?(0,a.jsxs)("div",{className:"flex divide-x gap-x-2",children:[(0,a.jsx)(ce,{assignee:e.assignee,onChange:r,type:"secondary",showName:!0}),(0,a.jsxs)("div",{className:"flex pl-2 gap-x-2",children:[(0,a.jsx)(T,{type:"secondary",onClick:()=>t({status:"archived"}),children:"Archive"}),(0,a.jsx)(T,{type:"primary",onClick:()=>t({status:"resolved"}),children:"Resolve"})]})]}):(0,a.jsx)(T,{type:"secondary",className:"upcasefirst-letter:uppercase",onClick:()=>t({status:"active"}),tooltip:"Mark as active",children:Be[e.status]}):!1}),e?(0,a.jsxs)("div",{className:"ErrorTrackingIssue",children:[(0,a.jsx)(Le,{}),(0,a.jsx)(G,{className:"my-4"}),(0,a.jsx)(X,{children:(0,a.jsxs)(X.Container,{column:!0,primary:!0,children:[(0,a.jsx)(pe,{}),(0,a.jsx)(Te,{}),(0,a.jsx)(X.Panel,{primary:!0,children:(0,a.jsx)(Ie,{})})]})})]}):(0,a.jsx)($,{})]})})}export{Fe as ErrorTrackingIssueScene,Ln as scene};
//# sourceMappingURL=/static/ErrorTrackingIssueScene-5PCMBBOO.js.map
