import{Bh as K,Bp as nt,Cd as M,Cp as rt,Dh as _,Do as it,Jh as $,Ko as ot,Lh as q,Md as f,Nd as j,Od as D,Oh as tt,Sb as L,Sd as V,Tc as z,Wb as E,Xd as O,Xj as U,Yj as et,Zj as lt,_j as I,a as Y,ah as W,cm as g,fg as w,h as pt,lc as H,r as Z,tg as P,y as T}from"/static/chunk-RFJTZKD6.js";import{Sb as A,a as h}from"/static/chunk-3UDJFOQH.js";import{d as a,e as m,g as b,j as u}from"/static/chunk-SJXEOBQC.js";m();u();b();var d=a(Y()),k=a(h());m();u();b();var at=a(pt()),y=a(Y());var ct=a(h());var l=a(Z()),st=ct.default.forwardRef(function({onClick:e,onClose:o,filter:t},n){let r=o!==void 0,s=I(t),p=et(t),B=U(t),J=lt(t);return(0,l.jsxs)("div",{ref:n,onClick:s?e:void 0,className:(0,at.default)("UniversalFilterButton inline-flex items-center",{"UniversalFilterButton--clickable":s,"UniversalFilterButton--closeable":r,"ph-no-capture":!0}),children:[(0,l.jsx)("div",{className:"flex items-center flex-1 truncate gap-1",children:B?(0,l.jsx)(bt,{filter:t,onClick:e}):p?(0,l.jsx)(g,{filter:t}):J?(0,l.jsx)(ut,{filter:t}):(0,l.jsx)(mt,{filter:t})}),r&&(0,l.jsx)(f.Provider,{value:null,children:(0,l.jsx)(V,{size:"xsmall",icon:(0,l.jsx)(M,{}),onClick:R=>{R.stopPropagation(),o()},className:"p-0.5"})})]})}),mt=({filter:i})=>{let{cohortsById:e}=(0,y.useValues)(tt),{formatPropertyValueForDisplay:o}=(0,y.useValues)(P),t=nt(i,e,r=>o(i.key,r)?.toString()||"?"),n=t.startsWith("$feature/");return n&&(t=t.replace("$feature/","Feature: ")),(0,l.jsxs)(l.Fragment,{children:[n?(0,l.jsx)(H,{}):(0,l.jsx)($,{type:i.type}),(0,l.jsx)("span",{className:"UniversalFilterButton-content flex flex-1 items-center truncate",title:t,children:typeof t=="string"?A(t,32):t})]})},bt=({filter:i,onClick:e})=>(0,l.jsxs)("div",{className:"flex truncate  items-center space-x-1",children:[(0,l.jsx)(g,{filter:i}),(0,l.jsx)(V,{size:"xsmall",icon:(0,l.jsx)(T,{count:i.properties?.length||0,showZero:!1,children:(0,l.jsx)(L,{})}),className:"p-0.5",onClick:e})]}),ut=({filter:i})=>(0,l.jsx)("div",{className:"flex items-center truncate",children:i.key});var c=a(Z());function G({rootKey:i,group:e=null,onChange:o,taxonomicGroupTypes:t,children:n}){return(0,c.jsx)(d.BindLogic,{logic:W,props:{rootKey:i,group:e,onChange:o,taxonomicGroupTypes:t},children:n})}function Vt({group:i,index:e,children:o}){let{rootKey:t,taxonomicGroupTypes:n}=(0,d.useValues)(W),{replaceGroupValue:r}=(0,d.useActions)(W);return(0,c.jsx)(G,{rootKey:`${t}.group_${e}`,group:i,onChange:s=>r(e,s),taxonomicGroupTypes:n,children:o},e)}var Wt=({index:i,filter:e,onChange:o,onRemove:t,initiallyOpen:n=!1,metadataSource:r})=>{let{rootKey:s,taxonomicPropertyFilterGroupTypes:p}=(0,d.useValues)(W),B=U(e),J=I(e),[X,R]=(0,k.useState)(J&&n),C=`${s}.filter_${i}`;return(0,c.jsx)(j,{visible:X,onClickOutside:()=>R(!1),overlay:B?(0,c.jsx)(q,{pageKey:C,propertyFilters:e.properties,onChange:S=>o({...e,properties:S}),disablePopover:!0,taxonomicGroupTypes:["event_properties"],metadataSource:r}):J?(0,c.jsx)(_,{pageKey:C,index:0,filters:[e],onComplete:()=>{rt(e)&&!e.key&&t()},setFilter:(S,dt)=>o(dt),disablePopover:!1,taxonomicGroupTypes:p}):null,children:(0,c.jsx)(st,{onClick:()=>R(!X),onClose:t,filter:e})})},Ft=i=>{let[e,o]=(0,k.useState)(!1),{taxonomicGroupTypes:t}=(0,d.useValues)(W),{addGroupFilter:n}=(0,d.useActions)(W);return(0,c.jsx)(D,{overlay:(0,c.jsx)(K,{onChange:(r,s,p)=>{n(r,s,p),o(!1)},taxonomicGroupTypes:t}),visible:e,onClickOutside:()=>o(!1),children:(0,c.jsx)(V,{icon:(0,c.jsx)(z,{}),sideIcon:null,onClick:()=>o(!e),...i,children:i?.title||"Add filter"})})};G.Group=Vt;G.Value=Wt;G.AddFilterButton=Ft;var Ot=G;m();u();b();var N=a(Y());var F=a(Z());function ne({filters:i,size:e,onChange:o,disabledReason:t}){let{currentTeam:n}=(0,N.useValues)(ot),r=(n?.test_account_filters||[]).length>0,{setLocalDefault:s}=(0,N.useActions)(w);return(0,F.jsx)(O,{checked:r?!!i.filter_test_accounts:!1,onChange:p=>{o({filter_test_accounts:p}),s(p)},id:"test-account-filter",bordered:!0,label:(0,F.jsxs)("div",{className:"flex items-center whitespace-nowrap",children:[(0,F.jsx)("span",{children:"Filter out internal and test users"}),(0,F.jsx)(V,{icon:(0,F.jsx)(E,{}),to:it.settings("project-product-analytics","internal-user-filtering"),size:"small",noPadding:!0,className:"ml-1"})]}),fullWidth:!0,size:e,disabledReason:r?t:"You haven't set any internal and test filters"})}m();u();b();export{Ot as a,ne as b};
//# sourceMappingURL=/static/chunk-336DAFEI.js.map
