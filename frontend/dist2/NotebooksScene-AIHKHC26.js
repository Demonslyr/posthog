import"/static/chunk-E5EBD4YF.js";import{a as Y,b as Z}from"/static/chunk-ZXSHFYOF.js";import{a as q}from"/static/chunk-DYVMG6MY.js";import{a as F,d as H}from"/static/chunk-OKGJSIGC.js";import{Do as b,Io as W,Mb as T,Sa as V,Sd as d,Ta as G,Vd as O,Wd as z,Za as pe,a as w,b as R,f as me,fe as D,ie as K,ke as g,q as U,qk as u,r as c,td as J,ue as Q,vo as j,ze as X}from"/static/chunk-RFJTZKD6.js";import"/static/chunk-XPJ4MQJV.js";import{Cc as A,Ua as B,Za as M,a as le}from"/static/chunk-3UDJFOQH.js";import"/static/chunk-HHT4SG7V.js";import"/static/chunk-K7LQKAJG.js";import"/static/chunk-QQTK3LZH.js";import"/static/chunk-IJQNM355.js";import"/static/chunk-4CN6THWS.js";import"/static/chunk-272RTCFX.js";import"/static/chunk-2ROB4QWU.js";import"/static/chunk-ALT2ZZSO.js";import"/static/chunk-UE6SLBBN.js";import"/static/chunk-GINZUAUY.js";import"/static/chunk-SQELCOUW.js";import"/static/chunk-IGYUTZ65.js";import"/static/chunk-YM6UBNGD.js";import"/static/chunk-C6TQ5FFZ.js";import"/static/chunk-GXGA523B.js";import"/static/chunk-N4MMWRNK.js";import"/static/chunk-NRLAI7OY.js";import"/static/chunk-LVVHNICT.js";import"/static/chunk-2AXSSSSX.js";import"/static/chunk-DGXQI7RB.js";import"/static/chunk-HUCRWDLX.js";import"/static/chunk-RFEQG3YN.js";import"/static/chunk-PUISI233.js";import{d as i,e as l,g as m,j as p}from"/static/chunk-SJXEOBQC.js";l();p();m();var se=i(me());l();p();m();var f=i(w());var te=i(le());l();p();m();var k=i(c()),ce={"ph-feature-flag":"Feature flags","ph-feature-flag-code-example":"Feature flag Code Examples","ph-experiment":"Experiments","ph-early-access-feature":"Early Access Features","ph-survey":"Surveys","ph-image":"Images","ph-person":"Persons","ph-query":"Queries","ph-recording":"Session recordings","ph-recording-playlist":"Session replay playlists","ph-replay-timestamp":"Session recording comments","ph-cohort":"Cohorts","ph-group":"Groups"};function $({filters:e,setFilters:o}){return(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{children:"Containing:"}),(0,k.jsx)(Q,{mode:"multiple",placeholder:"Any content",options:Object.entries(ce).filter(n=>n[1]!=="").map(([n,a])=>({key:n,label:a})),value:e.contains,onChange:n=>{R.capture("notebook containing filter applied"),o({contains:n.map(a=>a)})},"data-attr":"notebooks-list-contains-filters"})]})}l();p();m();var s=i(w()),oe=i(pe());var v={search:"",createdBy:null,contains:[]},x=50,ee={columnKey:"-created_at",order:1},_=(0,s.kea)([(0,s.path)(["scenes","notebooks","NotebooksTable","notebooksTableLogic"]),(0,s.actions)({loadNotebooks:!0,setFilters:e=>({filters:e}),tableSortingChanged:e=>({sorting:e}),setPage:e=>({page:e})}),(0,s.connect)({values:[u,["notebookTemplates"]],actions:[u,["deleteNotebookSuccess"]]}),(0,s.reducers)({filters:[v,{setFilters:(e,{filters:o})=>M({...e||{},...o})}],sortValue:[null,{setSortValue:(e,{sortValue:o})=>o}],page:[1,{setPage:(e,{page:o})=>o,setFilters:()=>1,setSortValue:()=>1}],tableSorting:[ee,{persist:!0},{tableSortingChanged:(e,{sorting:o})=>o||ee}]}),(0,oe.loaders)(({values:e})=>({notebooksResponse:[null,{loadNotebooks:async(o,n)=>{await n(100);let a=e.filters?.contains.map(h=>({type:h,attrs:{}}))||void 0,y=e.filters?.createdBy===v.createdBy?void 0:e.filters?.createdBy,L=await W.notebooks.list({contains:a,created_by:y??void 0,search:e.filters?.search||void 0,order:e.sortValue??"-last_modified_at",limit:x,offset:(e.page-1)*x});return n(),L}}]})),(0,s.listeners)(({actions:e})=>({setFilters:()=>e.loadNotebooks(),setSortValue:()=>e.loadNotebooks(),setPage:()=>e.loadNotebooks(),deleteNotebookSuccess:()=>e.loadNotebooks()})),(0,s.selectors)(({actions:e})=>({notebooksAndTemplates:[o=>[o.notebooks,o.notebookTemplates,o.filters],(o,n,a)=>[...B(a,v)?n:[],...o]],notebooks:[o=>[o.notebooksResponse],o=>o?.results||[]],pagination:[o=>[o.page,o.notebooksResponse],(o,n)=>({controlled:!0,pageSize:x,currentPage:o,entryCount:n?.count??0,onBackward:()=>e.setPage(o-1),onForward:()=>e.setPage(o+1)})]}))]);var t=i(c());function de(){return{title:"Title",dataIndex:"title",width:"100%",render:function(o,{short_id:n,is_template:a}){return(0,t.jsxs)(G,{"data-attr":"notebook-title",to:b.notebook(n),className:"font-semibold flex items-center gap-2",children:[o||"Untitled",a&&(0,t.jsx)(D,{type:"highlight",children:"TEMPLATE"})]})},sorter:(e,o)=>(e.title??"Untitled").localeCompare(o.title??"Untitled")}}function ne(){let{notebooksAndTemplates:e,filters:o,notebooksResponseLoading:n,notebookTemplates:a,tableSorting:y,pagination:L}=(0,f.useValues)(_),{loadNotebooks:h,setFilters:S,tableSortingChanged:re}=(0,f.useActions)(_),{selectNotebook:ae}=(0,f.useActions)(U);(0,te.useEffect)(()=>{h()},[]);let ie=[de(),H(),F("created_at","Created"),F("last_modified_at","Last modified"),{render:function(ue,C){return C.is_template?null:(0,t.jsx)(g,{items:[{label:"Delete",icon:(0,t.jsx)(J,{}),status:"danger",onClick:()=>{u.actions.deleteNotebook(C.short_id,C?.title)}}],children:(0,t.jsx)(d,{"aria-label":"more",icon:(0,t.jsx)(T,{}),size:"small"})})}}];return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(z,{type:"info",action:{onClick:()=>{ae(a[0].short_id)},children:"Get started"},dismissKey:"notebooks-preview-banner",children:[(0,t.jsx)("b",{children:"Welcome to Notebooks"})," - a great way to bring Insights, Replays, Feature Flags and many more PostHog products together into one place."]}),(0,t.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap",children:[(0,t.jsx)(K,{type:"search",placeholder:"Search for notebooks",onChange:N=>{S({search:N})},value:o.search,"data-attr":"notebooks-search"}),(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,t.jsx)($,{filters:o,setFilters:S}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Created by:"}),(0,t.jsx)(q,{value:o.createdBy,onChange:N=>S({createdBy:N?.uuid||null})})]})]})]}),(0,t.jsx)(X,{"data-attr":"notebooks-table",pagination:L,dataSource:e,rowKey:"short_id",columns:ie,loading:n,defaultSorting:y,emptyState:"No notebooks matching your filters!",nouns:["notebook","notebooks"],onSort:re})]})}var r=i(c()),so={component:be};function be(){return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(j,{buttons:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{items:[{label:"Load from JSON",onClick:()=>{Y({contentType:"application/json",multiple:!1}).then(e=>Z(e[0])).then(e=>{if(JSON.parse(e).type!=="doc")throw new Error("Not a notebook");se.router.actions.push(b.canvas(),{},{"\u{1F994}":A(e)})}).catch(e=>{O.error(e.message)})}}],children:(0,r.jsx)(d,{icon:(0,r.jsx)(T,{}),size:"small"})}),(0,r.jsx)(V,{title:"Like a Notebook but all your exploration is persisted to the URL for easy sharing.",children:(0,r.jsx)(d,{"data-attr":"new-canvas",to:b.canvas(),type:"secondary",children:"New canvas"})}),(0,r.jsx)(d,{"data-attr":"new-notebook",to:b.notebook("new"),type:"primary",children:"New notebook"})]})}),(0,r.jsx)(ne,{})]})}export{be as NotebooksScene,so as scene};
//# sourceMappingURL=/static/NotebooksScene-AIHKHC26.js.map
